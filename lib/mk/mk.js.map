{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f2c0a5fe4b2e9ba5c6b1","webpack:///./src/main.js","webpack:///./src/meek/config.js","webpack:///./src/utils/counter.js","webpack:///./src/utils/helpers.js","webpack:///./src/utils/obj.js","webpack:///./src/utils/math.js","webpack:///./src/utils/coordinate.js","webpack:///./src/utils/canvas.js","webpack:///./src/geometry/support/geometryutil.js","webpack:///./src/geometry/geometry.js","webpack:///./src/core/baseobject.js","webpack:///./src/core/event.js","webpack:///./src/meek/eventtype.js","webpack:///./src/geometry/support/extentutil.js","webpack:///./src/utils/functions.js","webpack:///./src/style/style.js","webpack:///./src/style/fillstyle.js","webpack:///./src/style/basestyle.js","webpack:///./src/style/textstyle.js","webpack:///./src/style/linestyle.js","webpack:///./src/style/pointstyle.js","webpack:///./src/core/eventmanager.js","webpack:///./src/geometry/extent.js","webpack:///./src/geometry/point.js","webpack:///./src/geometry/line.js","webpack:///./src/geometry/support/interpolate.js","webpack:///./src/utils/array.js","webpack:///./src/geometry/polygon.js","webpack:///./src/geometry/support/orient.js","webpack:///./src/geometry/mutilpolygon.js","webpack:///./src/geometry/parallelogram.js","webpack:///./src/geometry/rotatableextent.js","webpack:///./src/utils/log.js","webpack:///./src/lyr/image/imagestate.js","webpack:///./src/lyr/image/imageevent.js","webpack:///./src/core/baseevent.js","webpack:///./src/lyr/image/singleimage.js","webpack:///./src/core/baseimage.js","webpack:///./src/lyr/featurelayer.js","webpack:///./src/lyr/baselayer.js","webpack:///./src/meek/featureevent.js","webpack:///./src/lyr/singleimagelayer.js","webpack:///./src/utils/domutil.js","webpack:///./src/components/draw.js","webpack:///./src/components/component.js","webpack:///./src/meek/browserevent.js","webpack:///./src/meek/feature.js","webpack:///./src/components/drawevent.js","webpack:///./src/utils/feature.js","webpack:///./src/components/select.js","webpack:///./src/components/selectevent.js","webpack:///./src/components/modify.js","webpack:///./src/components/modifyevent.js","webpack:///./src/utils/mousekey.js","webpack:///./src/components/dragpan.js","webpack:///./src/components/mousewheelzoom.js","webpack:///./src/control/control.js","webpack:///./src/control/zoom.js","webpack:///./src/meek/map.js","webpack:///./src/renderer/canvas/canvasrenderer.js","webpack:///./src/renderer/renderer.js","webpack:///./src/renderer/canvas/featurelayerrenderer.js","webpack:///./src/renderer/canvas/layerrenderer.js","webpack:///./src/data/matrix/transform.js","webpack:///./src/renderer/render/pointrender.js","webpack:///./src/renderer/render/geomertyrender.js","webpack:///./src/renderer/render/linerender.js","webpack:///./src/renderer/render/polygonrender.js","webpack:///./src/renderer/render/textrender.js","webpack:///./src/renderer/canvas/imagelayerrenderer.js","webpack:///./src/renderer/rendereventtype.js","webpack:///./src/renderer/renderevent.js","webpack:///./src/meek/browsereventhandler.js","webpack:///./src/meek/view.js","webpack:///./src/components/componentdefaults.js","webpack:///./src/components/kinetic.js","webpack:///./src/components/keyboardhome.js","webpack:///./src/components/keyboardzoom.js","webpack:///./src/components/keyboardpan.js","webpack:///./src/control/controldefaults.js","webpack:///./src/control/home.js","webpack:///./src/control/zoompercentage.js","webpack:///./src/meek/overlay.js","webpack:///./src/data/json/geojson.js","webpack:///./src/geometry/analysis/intersects.js","webpack:///./src/geometry/analysis/splitpolygon.js","webpack:///./src/geometry/analysis/contains.js","webpack:///./src/geometry/analysis/polygonwithhole.js"],"names":["version","Config","Coordinate","Canvas","Event","SelectEvent","FeatureEvent","ModifyEvent","EventManager","Counter","Helpers","ImageState","ImageEvent","SingleImage","Geometry","Extent","Point","Line","Polygon","MutilPolygon","Parallelogram","RotatabelExtent","Style","PointStyle","LineStyle","FillStyle","TextStyle","FeatureLayer","SingleImageLayer","Draw","DrawEvent","BrowserEvent","EventType","Feature","Map","View","Overlay","GeometryUtil","ExtentUtil","Select","Modify","DragPan","Control","Zoom","Obj","Math","MouseWheelZoom","GeoJSON","intersects","splitPolygonByPolyline","contains","polygonWithHole","DEBUG","DEFAULT_ZOOM_FACTOR","DEFAULT_MAX_ZOOM","DEFAULT_MIN_ZOOM","MOUSE_WHEEL_ZOOM_MAXDELTA","DEFAULT_TILE_SIZE","getUid","uid","colorToString","color","alpha","r","g","b","deepClone","obj","cpObj","Array","key","getValues","object","values","property","push","clear","Reflect","deleteProperty","objectToMap","map","Object","keys","ke","set","mapToObject","undefined","forEach","value","clamp","lerp","min","max","a","x","add","coordinate","delta","rotate","angle","cosAngle","cos","sinAngle","sin","y","scale","equal","coordinate1","coordinate2","rotateAtOffset","context","rotation","offsetX","offsetY","translate","pointIntersectPoint","pointIntersectLine","squaredSegmentDistance","squaredDistanceToSegment","equals","squaredDistance","distance","closestOnSegment","linearRingsContainsXY","linearRingContainsXY","getPointInExtendedLineByDistanceFromAB","getProjectivePoint","getAngleBetweenTwoVectors","simplify","pointA","pointB","tolerance","toleranceDistance","line","path","squaredSegmentDistanceFn","find","i","ii","length","nowP","nextP","sqrt","x1","y1","x2","y2","dx","dy","t","segment","closestCoordinate","coord1","coord2","x0","y0","start","end","along","flatCoordinates","offset","ends","stride","wn","xa","ya","xb","yb","d","xab","yab","xbd","xd","yd","pLine","k","pOut","projectX","projectY","atan2","geometry","coordinates","geoType","geometryType","POLYGON","getCoordinates","LINE","sliceCoords","slice","newCoords","len","setCoordinates","_extent","rotable","moveable","scaleable","pointInExtent","containsPoint","extent","intersect","geomtry","getFormShowPosition","getFlatInteriorPoint","containsXY","move","opts","origin","getRotatedCoordinates","anchor","newCoordinates","rotateXYFn","rotateXY","coor","changed","rx","ry","getAnchorForRotating","toJSON","clone","UNDEFINED","fp","sp","f1","f2","f3","EXTENT","BaseObject","POINT","MULTI_POINT","MULTI_LINE","MULTI_POLYGON","CIRCLE","PARALLELOGRAM","ROTATABLE_EXTENT","_id","_revision","dispatchEvent","CHANGE","_pendingRemovals","_listeners","_dispatching","nullFunction","getListeners","type","hasListener","optType","has","removeEventListener","listener","listeners","index","indexOf","splice","addEventListener","event","evt","target","propagate","call","propagationStopped","pendingRemovals","VIEW_CHANGED","ERROR","LOAD","RESIZE","createEmpty","Infinity","createOrUpdateFromFlatCoordinates","opt_extent","createOrUpdateEmpty","extendFlatCoordinates","extendXY","createOrUpdate","minX","minY","maxX","maxY","getCenter","createScaleExtent","center","boundingExtentFromTwoPoints","point1","point2","xmin","ymin","xmax","ymax","boundingExtent","extendCoordinate","getBottomLeft","getBottomRight","getTopRight","getTopLeft","boundingSimpleExtent","point","isArray","buffer","optExtent","minMaxToRing","ring","getHeight","getWidth","updateExtent","dragSegments","dragSegment","extentCoordinates","segment1","segment2","isVertex","getIntersection","extent1","extent2","intersection","containsExtent","isEmpty","getForViewAndSize","resolution","size","cosRotation","sinRotation","xCos","xSin","yCos","ySin","x3","y3","functions","TURE","FALSE","defaultFunction","_default","white","blue","width","createDefaultEditing","styles","LineCap","ROUND","LineJion","createDefaultSelecting","outsideLine","insideLine","createFunction","styleFunction","feature","borderStyle","style","SOLID","_borderStyle","textStyle","newStyle","BaseStyle","_color","_style","_alpha","_textStyle","optOptions","options","text","font","DEFAULT_FONT","rotateWithView","DEFAULT_SCALE","textAlign","DEFAULT_TEXT_START","textBaseline","DEFAULT_BASE_LINE","fill","DEFAULT_FILL_COLOR","stroke","DEFAULT_STROKE","_text","_font","_rotation","_rotateWithView","_scale","_textAlign","_textBaseline","_fill","_stroke","_offsetX","_offsetY","lineCap","lineJion","DEFAULT_TEXT_ALIGN","BUTT","MITER","miterLimit","_width","_lineCap","_lineJion","_miterLimit","DASH","DOT","DASHDOT","DASHDOTDOT","NULL","SQUARE","BEVEL","xoffset","yoffset","_size","_xoffset","_yoffset","_angle","CROSS","X","TRIANGLE","unlistenByKey","listen","listenOnce","listenerMap","lm","removeListeners","boundListener","deleteIndex","bindListener","listenerObj","bindTo","callOnce","findListener","optThis","optSetDeleteIndex","getListenerMap","optOnce","opt_this","_xmin","_ymin","_xmax","_ymax","_rings","_flatInteriorPointRevision","_flatInteriorPoint","revision","beyond","minPoint","height","newMinPoint","newCoordiante","getFormShowPosition1","rings","extentArr","getCoordinateIndex","coord","findIndex","points","abs","xValue","yValue","nx","ny","opt","update","geom","Number","isNaN","isBeyond","existBeyondPoint","newCoord","extentObj","_x","_y","_path","addPath","forEachSegment","callback","interiorPoint","fraction","lastPoint","coords","newLine","me","POSITIVE_INFINITY","NEGATIVE_INFINITY","coors","p","np","lineString","linearRings","linearRingss","centerLinearRingss","opt_dest","pointX","NaN","pointY","n","cumulativeLengths","o","flatCenters","flatCentersOffset","intersections","maxSegmentLength","sort","numberSafeCompareFunction","segmentLength","endss","interiorPoints","linearFindNearest","stableSort","binarySearch","arr","direction","compareFnc","tmp","haystack","needle","opt_comparator","mid","cmp","comparator","low","high","found","arr1","arr2","len1","addRing","outRing","_inOneRing","coordsTemp","inHole","some","px","py","flag","l","j","sx","sy","tx","ty","flatCenter","centerX","centerY","coorLen","orientedFlatCoordinates","getOrientedFlatCoordinates","hasHoles","jLen","ringIndex","outRings","idBeyond","newPolygon","orientLinearRingss","orientLinearRings","linearRingssAreOriented","linearRingsAreOriented","linearRingIsClockwise","opt_right","right","isClockwise","reverse","reverseCoordinates","edge","_polygons","getPolygon","innerRing","polygon","polygons","onePolygon","orderArray","lastLen","currLen","polygonCoods","iiLen","polygonIndex","allCoords","newMutilPolygon","convertToPolygons","allPolygonCoords","polyCoods","getTheLastPoint","firstPoint","secondPoint","thirdPoint","updateCoordinatesForModification","vertex","oldVertex","dis","oldRingsCoordinates","oldCoordinates","segement","edgeIndex","firstCoord","nowCood","otherCood","newCood1","tempXX","tempYY","tempX2","tempY2","newCood2","RotatableExtent","_anchorSide","_height","p1","p2","p3","d1","d2","_anchor","_findAnchorEdge","idx1","idx2","idx3","idx4","c1","c2","c3","c4","center1","center2","uponEdge","belowEdge","view","getTheLastTwoPoint","pointC","pointD","pointE","kAB","dBD","dk","toFixed","handleRect","p4","console","log","Log","message","str","warn","IDLE","LOADING","LOADED","image","BaseEvent","Type","IMAGELOADSTART","IMAGELOADEND","IMAGELOADERROR","propagatinoStopped","stopPropagation","preventDefault","pixelRatio","attributions","src","crossOrigin","imageLoadFunction","_src","domImage","Image","getDomImage","_imageByContext","_imageListenerKeys","state","_imageLoadFunction","opt_context","_domImage","cloneNode","_handleImageError","_unlistenImage","_handleImageLoad","load","BaseImage","_attributions","_pixelRatio","_resolution","_state","optContext","_features","_styleFunction","_featureChangeKeys","features","addFeatures","zIndex","_renderBuffer","renderBufferValue","unlistenByKeyFn","CLEAR","FEATURE_COLLECTION_CHANGED","findFeature","id","f","_addFeaturesInner","hasFeature","featureId","_setupChangeEvents","ADD_FEATURE","addFeature","forEachFeatureAtPiexl","frameState","piexl","_getCurrentExtentFeatures","extentFeatures","_getIntersectedFeatures","piexlX","piexlY","viewState","result","filter","display","removeFeature","delete","REMOVE_FEATURE","featureKey","_handleFeatureChange","loadFeature","newFeatures","pointFeatures","lineFeatures","geometryExtent","concat","BaseLayer","baseOptions","assign","name","visible","datasource","opacity","dataExtent","maxResolution","minResolution","_mapRenderKey","_map","render","_visible","_opacity","_minResolution","_maxResolution","_dataExtent","_datasource","_zIndex","FEATURE_VISIBLE_CHANGED","imageExtent","defaultImageLoadFunction","_singleImage","url","_imageSize","imageSize","singleImage","handleImageChange","getImageInternal","imageWidth","imageHeight","targetWidth","ceil","canvas","drawImage","_dispatchImageEvent","_attributes","createCanvasContext2D","outerWidth","outerHeight","removeNode","removeChildren","optWidth","optHeight","document","createElement","getContext","element","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","offsetHeight","marginTop","marginBottom","node","parentNode","removeChild","lastChild","applyHandleEventOption","handleDownEvent","_handleDownEvent","handleMouseEvent","handleUpEvent","_handleUpEvent","_drawLayer","drawLayer","_downPointPx","_finishCoordinate","drawMode","getDrawMode","_sketchCoords","_sketchLine","_finishCondition","finishCondition","_hasFinishConditionOptions","_undoCondition","undoCondition","_hasUndoConditionOptions","_undoStep","freehandUndoStep","_handleKeyboardEvent","_sketchLayer","FeaureLayer","getDefaultStyleFunction","_sketchPoint","_enableSketchPoint","enableSketchPoint","_sketchFeature","_geometryFunction","_sketchLineCoords","_freehand","freehand","_snapTolerance","snapTolerance","snapOptions","_snapToOthers","snapToOthers","_snapToOthersTolerance","_maxLinePoints","maxLinePoints","_maxPolygonPoints","maxPolygonPoints","_minPoints","minPoints","DrawMode","_condition","condition","_shouldHandle","_squaredClickTolerance","clickUpTolerance","_finishCheck","pcoordinates","mode","_finishDrawing","undoDrawing","_existInDrawMode","constructor","String","modeValue","toUpperCase","val","_geometryFactory","Constructor","_initGeometryFunction","geometryFunction","opt_geometry","_freehandEnable","buttons","originalEvent","coordinateBeyond","pass","eventType","MOUSE_DRAG","_addToDrawing","MOUSE_MOVE","_handleMove","DBLCLICK","downPx","clickPx","pixel","_modifyDrawing","_updateSketchPoint","_startDrawing","_atFinish","_abortDrawing","startPoint","_drawMode","_updateSketchFeatures","DRAW_START","closeToVertex","_calculateCloseToVertexOfOhters","lastSecondPoint","last","lstPoint","coordinateLen","lstTwoPoint","checkIfCoordinateWithInMapView","tempLastRing","lastPoint2","pop","sketchPointGeom","sketchLineGeom","DRAWING","done","sketchFeature","finishDrawing","DRAW_END","MultiPolygon","at","potentiallyDone","potentiallyFinishCoordinates","finishCoordinate","finishPixel","getPixelFromCoordinate","sketchPointgeom","_autoPan","undoStep","polygonDeleteStep","pixelCoordinate","getCoordinateFromPixel","nodes","snapToOthersTolerance","sortByDistance","s1","s2","closestSegment","vertexPixel","dist","pixel1","pixel2","squaredDist1","squaredDist2","_snappedToVertex","_pixelTolerance","_updateState","active","shouldStopEvent","isIn","mapValue","addLayer","layer","_active","Component","targetPointers","_trackedPointers","handlingDownUpSequence","_handleDragEvent","handleDragEvent","_handleMoveEvent","handleMoveEvent","browserEvent","stopEvent","_updateTrackedPointers","MOUSE_UP","handledUp","MOUSE_DOWN","handled","_isPointerDraggingEvent","pointerId","pan","currentCenter","zoomByDelta","opt_anchor","opt_duration","currentResolution","constrainResolution","calculateCenterZoom","constrainCenter","zoomWithoutConstraints","getViewDataExtent","allowCoordinatesBeyondImage","newCoordinate","e","oriEvent","eventTyle","getEventPixel","SINGLE_CLICK","CLICK","MOUSE_OVER","MOUSE_OUT","WHEEL","MOUSE_WHEEL","KEYDOWN","KEYPRESS","attributes","displayText","_geometryChangeKey","initArribute","textDisplay","styleHighLight","_handleGeometryChanged","_attributesMap","get","forEachAttribute","cloneAttributesMap","newMap","entries","renderStyleArr","newFeature","_geometry","_displayText","_styleHighLight","newStyles","s","firstStyle","cloneStyle","unshift","oriFont","boldFont","split","_display","_textDisplay","getCollisionFeaturesByPoint","tolarance","_ExtentUtil","gometryExtent","bufferExtent","jj","nextPoints","pathExtent","pathBufferExtent","hasMutilSelectedSymbol","Symbol","_hitTolerance","hitTolerance","_hasSelectedStyle","_multiSelectMode","_selectLayer","_selectFeatures","selectMode","_selectMultiMode","selectMultiMode","_handleCtrlKeyDwon","_handleCtrlKeyUp","_keyPress","selectFeatures","_forEachStyle","SELECT","_isInSelectFeatures","_watchFeatures","_selectMode","selectedFeatures","pixelTolerance","_movableGeometrys","movableGeometrys","_hasMoveableGeometrys","movableGeometrySet","Set","_deleteCondition","deleteCondition","_defaultDeleteCondition","_vertexEditableCondition","vertexEditableCondition","_edgeEditableCondition","edgeEditableCondition","_featureLayer","featureLayer","_snapSegments","_vertexFeature","_anchorFeature","_anchorPointStyle","_rotatableFeature","_rotatingFeature","_rotatableLine","_rotatableLineStyle","_lastRotatablePoint","_lastPixel","_overLayer","_dragSegments","_modified","_changingFeature","_ignoreNextSingleClick","_shouldAddToVertexs","_insertVertices","_downPoint","_currentMovedFeature","_oldEditedVertex","_mapViewChangedKey","_featuresEventKeys","_initAnthorPointForRotatableGeometry","anthor","lastPointerEvent_","_handlePointerMove","removePoint","_lastPointerEvent","willModifyFeatures_","_removeVertex","MODIFY_END","_compareIndexes","_willModifyFeatures","MODIFY_START","rotatingFeature","vertexFeature","insertVertices","filters","_handlePointerAtPixel","rotatableGeometry","_getRotatableGeometry","_pointDistanceToSegment","_closestOnSegment","vertexEditable","MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX","coordinateIndex","_createOrUpdateVertexFeature","_handleRotating","vertexTemp","_insertVertex","segmentData","depth","withoutView","MODIFY_SEGMENT_CIRCLE_CENTER_INDEX","setCenter","setRadius","_setGeometryCoordinates","downPoint","_hideAnchorFeature","modifiedFeature","newSegmentData","rotatableFeatures","modifiedFeatures","mf","dragPoint","flatInteriorPoint","lineCoordinates","V1","V2","rotatedGeometry","rotatedCoordinates","_mapViewChanged","_handleFeatureVisibleChanged","featureEvent","circleGeometry","distanceToCenterSquared","distanceToCircumference","getRadius","mapBrowserEvent","isActive","singleClick","mouseWheel","noModifierKeys","targetNotEditable","altKey","metaKey","ctrlKey","shiftKey","tagName","lastCentroid","_kinetic","kinetic","_lastPointersCount","_noKinetic","begin","centroid","deltaX","deltaY","getViewState","pointerEvents","clientX","clientY","_delta","_useAnchor","useAnchor","_duration","duration","_lastAnchor","_startTime","_timeout","timeout","_timeoutId","_mode","wheelEvent","wheelDeltaY","now","Date","timeLeft","clearTimeout","setTimeout","_handleWheelZoom","maxDelta","_element","_target","_listenerKeys","overlayContainerStopEvent","appendChild","getElementById","className","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","setAttribute","title","createTextNode","outElement","cssClasses","_handleClick","_handleClickIn","_zoomByDelta","newResolution","_frameState","_layers","_toPixelTransform","Transform","create","_toCoordinateTransform","_animationDelayKey","_components","_controls","_createViewport","_overlayContainer","viewport","_overlayContainerStopEvent","overlayEvents","overlayEvent","optionsInner","parseOptionsInner","_renderer","rendererClass","_createBrowserEventHandler","_animationDelay","_renderFrame","layers","components","addComponents","component","controls","addControl","control","_overlayIdIndex","_overlays","overlays","_addOverlayInternal","overlay","_handleViewChange","_handleMouseWheelEvent","position","overflow","_viewport","_createRenderer","CanvasRenderer","_browserEventHandler","BrowserEventHandler","_handleBrowserEvent","keyboardEvent","cpts","cpt","cont","toPixelTransform","toCoordinateTransform","renderFrame","window","requestAnimationFrame","isRendered","getFeaturesLayer","overlayId","toString","getTargetElement","updateSize","targetElement","computedStyle","parseFloat","viewportPosition","getBoundingClientRect","eventPosition","left","top","pixelPoint","apply","zoomIn","zoomOut","switchToOverview","orignalCenter","originalCenter","originalResolution","handleRize","bind","container","_context","_canvas","_rendererVisible","_layerRenderers","_transform","_addToContainer","insertBefore","childNodes","canvasWidth","canvasHeight","sortByZIndex","updateTransform","_dispatchComposeEvent","RenderEventType","PRERENDER","layerRender","getLayerRenderer","prepareFrame","composeFrame","POSTRENDER","layerKey","layerRenderer","createLayerRenderer","ImageLayerRenderer","FeatureLayerRenderer","coordinateToPixelTransform","pixelToCoordinateTransform","compose","invert","setFromArray","state1","state2","composeEvent","RenderEvent","Renderer","contianer","_geometryRenderGroup","_textRender","TextRender","_maxExtent","_renderFeatures","_renderResolution","_renderExtent","_renderRevision","_cacheableThisTime","_getGeometryRender","GeometryRender","_renderFeaturesInOrder","_calculaterFeaturesFontSize","originResolution","_originalResolution","resolutions","_resolutions","oriIndex","curIndex","deep","fontStr","frameExtent","layerRevision","featureLayerRenderBuffer","renderBuffer","renderExtent","frameStateOpt","transform","getTransform","preCompose","_clipExtent","renderStyle","_cloneRenderStyle","geomertyRender","_resetRender","restore","postCompose","rs","flatClipCoords","getClipCoords","save","beginPath","moveTo","lineTo","clip","maxExtent","transform2D","resetRenderOption","LayerRenderer","PointRender","LineRender","PolygonRender","_layer","renderedResolution","dx1","dy1","dx2","dy2","loadImage","imageState","_handleImageChange","renderIfReadyAndVisible","topLeft","topRight","bottomRight","bottomLeft","optTransform","tmp_","reset","dest","multiply","transform1","transform2","a1","b1","e1","a2","b2","e2","c","det","determinant","mat","_pixelCoordinates","ctx","styleArray","geomerty","pixelCoordinates","styleObj","renderOptions","radius","fillStyle","drawCircle","arc","PI","strokeStyle","lineWidth","lineDash","setLineDash","closePath","GeomertyRender","renderedTransform","equalsTransform","geometryCoordinates","hasDash","drawLine","renderOpt","lineJoin","geometryCoordinages","renderCoords","polygonCoords","renderMutilPolygon","renderPolygon","drawStylePolygon","kk","cd","_setTextStyle","lines","numLines","fontSize","lineY","round","measureText","lineIndex","lineText","strokeText","fillText","_image","_imageTransform","coordinateToCanvasPixelTransform","viewCenter","viewResolution","imageLayer","renderedExtent","projection","loaded","imageResolution","imagePixelRatio","imageTransform","clipped","globalAlpha","dw","dh","imageSmoothingEnabled","RENDER","trasform","_dragging","_down","_dragListenerKeys","_clickTimeoutId","_mapping","_mousedown","_mousemove","_mouseup","_mouseover","_mouseout","_registerSource","events","getEvents","eventName","documentDom","_isMoving","newEvent","_emulateClick","_innerOptions","_applyOptions","resolutionConstraint","_createResolutionConstraint","_zoomFactor","zoomFactor","_minZoom","minZoom","centerConstraint","_createCenterConstraint","constraint","rotationConstraint","_createRotationConstraint","_constraints","_calculateCenter","zoom","_originalCenter","_options","defaultMaxZoom","defaultZoomFactor","defaultMinZoom","defaultTileSize","maxZoom","createSnapToResolutions","defaultMaxResolution","pow","defaultMinResolution","floor","createSnapToPower","power","opt_maxLevel","oldLevel","newLevel","reso","z","opt_delta","opt_direction","_center","componentsDefaults","Kinetic","dragPan","mouseWheelZoom","zoomDuration","keyboard","keyborad","KeyboardHome","KeyboardPan","KeyboardZoom","zoomDelta","decay","minVelocity","delay","_decay","_minVelocity","_delay","_points","_initialVelocity","lastIndex","firstIndex","getDistance","_defaultCondition","keyCode","_goToHome","keyEvent","charCode","charCodeAt","_pixelDelta","pixelDelta","mapUnitsDelta","controlDefaults","zoomControl","zoomOptions","homeControl","home","Home","homeOptions","zoomPercentageControl","zoomPercentage","zoomPercentageOptions","homeLabel","homeLabelTip","homeElement","ZoomPercentage","_innerElement","html","innerHTML","_offset","_position","_positioning","_overlay","_insertFirst","insertFirst","_stopEvent","autoPan","_autoPanAnimation","autoPanAnimation","_autoPanMargin","autoPanMargin","_rendered","_bottom","_left","_right","_top","_mapPostrenderListenerKey","popupEelement","positioning","OverlayPositioning","TOP_LEFT","updatePixelPosition","setVisible","mapSize","updateRenderedPosition","BOTTOM_RIGHT","CENTER_RIGHT","TOP_RIGHT","left_","right_","BOTTOM_CENTER","CENTER_CENTER","TOP_CENTER","BOTTOM_LEFT","top_","bottom","bottom_","CENTER_LEFT","_panIntoView","mapRect","_getRect","clientHeight","clientWidth","overlayRect","margin","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","box","pageXOffset","pageYOffset","_setElement","pelement","_overlayId","_popupEelement","overlayContainer","read","json","featuresObj","featureObj","geometryObj","Error","propertiesObj","properties","write","featuresArr","getGeoJSONGeometryType","jsonType","geometry1","geometry2","ext1Arr","ext2Arr","pointIntersectsGeometry","lineIntersectsGeometry","mutilPolygonIntersectsGeometry","polygonIntersectsGeometry","lineIntersectsLine","lineIntersectsPolygon","line1","line2","lineLinearRings1","lineLinearRings2","intersectsByLinearRings","poly","MUTIL_POLYGON","polygonIntersectsPolygon","mutilPoly","mutilPolygonIntersectsPolygon","lineLinearRings","polygon2LinearRings","intersectsByLinearRingsFn","polygonGeometryType","oneRingIntersects","linarRing","LinearRing1","LinearRings2","segs1","getSortedSegments","segs2","seg1","seg1x1","seg1x2","seg1y1","seg1y2","seg2","seg2y1","seg2y2","jlen","segmentsIntersect","numSeg","segments","byX1","x11_21","y11_21","x12_11","y12_11","y22_21","x22_21","n1","n2","along1","along2","segs","seg","source","distanceToSegment","distanceSquaredToSegment","isDividedPointSymbol","alreadyUsedSymbol","dividePointSymbol","targetPolygon","splitLine","polygonCoordinates","dividedPointList","findIntersectionPoints","afterInsertLineCoords","insertDiveidePointsToSplitLineCoords","allPartsScliedFromLineCoords","sliceDividedPointFromLine","vertexListAfterDivide","insertDividePointsToCoordinates","results","renewal","featureCollection","arrs","handleHolesForPolygon","isInArray","singlePolygonCoords","item","findPartners","parts","ep","newParts","findNextPoint","m","mlen","goThrough","ePoint","ffpoint","eepoint","endPoint","nextPoint","updataStatus","isInOneSegment","onePoint","otherPoint","allPartsScliedFromLineCoordsTemp","findCount","group","jjlen","fPoint","tp","allParts","singleParts","isDividePointStart","getDividePoints","fP","eP","dfPoint","dp","intersectFrom","fromPoint","dePoint","afterArr","dividePoints","firstPointXY","item1","item2","afterInserted","isInDividedPointList","orialPoint","originPoint","ofPoint","oePoint","toPoint","itemDividedPoint","findOneIntersectionPoints","lineCoordinatesExtent","lineCoordinatesExtentBuffer","ntersectionPoints","intersectPoint","_findOneIntersectionPoints","intersectionPoints","ntp","intersectIndex","geometryCollection","addHoleToPolygon","needPoly","lineCoords","dividedPoints","polyGeometryType","isContained","targetGeometryType","polyContainsLine","polyContainsPoly","polyContainsMultiPoly","polygonContainsLinestring","poly2","poly2Type","mutilpolygon","polys","contained","hasOne","polygonWithHoles","polygon1","polygon2","holePolygon","resultPolygon","holeCoordinates","holeOutRings","polygonOutRings","tempHoleOutRings","tempPolygonOutRings","holeOriented","polygonOutRingOriented","polygonsWithHole","polyWithHole","multiPolygon"],"mappings":"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","file":"mk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mk\"] = factory();\n\telse\n\t\troot[\"mk\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"<%=baseUrl%>/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2c0a5fe4b2e9ba5c6b1","import {Config} from 'meek/config'\nimport Counter from 'utils/counter'\nimport Helpers from 'utils/helpers'\nimport Obj from 'utils/obj'\nimport {Math} from 'utils/math'\nimport {Coordinate} from 'utils/coordinate'\nimport {Canvas} from 'utils/canvas'\n\nimport GeometryUtil from 'geometry/support/geometryutil'\nimport {ExtentUtil} from 'geometry/support/extentutil'\nimport {EventType} from 'meek/eventtype'\nimport {Style} from 'style/style'\n\nimport Event from 'core/event'\nimport EventManager from 'core/eventmanager'\n\nimport Geometry from 'geometry/geometry'\nimport Extent from 'geometry/extent'\nimport Point from 'geometry/point'\nimport Line from 'geometry/line'\nimport Polygon from 'geometry/polygon'\nimport MutilPolygon from 'geometry/mutilpolygon'\nimport Parallelogram from 'geometry/parallelogram'\nimport RotatabelExtent from 'geometry/rotatableextent'\n\nimport {ImageState} from 'lyr/image/imagestate'\nimport {ImageEvent} from 'lyr/image/imageevent'\nimport SingleImage from 'lyr/image/singleimage'\n\nimport PointStyle from 'style/pointstyle'\nimport LineStyle from 'style/linestyle'\nimport FillStyle from 'style/fillstyle'\nimport TextStyle from 'style/textstyle'\n\nimport FeatureLayer from 'lyr/featurelayer'\nimport SingleImageLayer from 'lyr/singleimagelayer'\nimport Draw from 'components/draw'\nimport DrawEvent from 'components/drawevent'\nimport Select from 'components/select'\nimport Modify from 'components/modify'\nimport DragPan from 'components/dragpan'\nimport MouseWheelZoom from 'components/mousewheelzoom'\n\nimport BrowserEvent from 'meek/browserevent'\nimport SelectEvent from 'components/selectevent'\nimport FeatureEvent from 'meek/featureevent'\nimport ModifyEvent from 'components/modifyevent'\n\nimport Control from 'control/control'\nimport Zoom from 'control/zoom'\n\nimport Feature from 'meek/feature'\nimport Map from 'meek/map'\nimport View from 'meek/view'\nimport Overlay from 'meek/overlay'\n\nimport GeoJSON from 'data/json/geojson'\n\nimport intersects from 'geometry/analysis/intersects'\nimport splitPolygonByPolyline from 'geometry/analysis/splitpolygon'\nimport contains from 'geometry/analysis/contains'\nimport polygonWithHole from 'geometry/analysis/polygonwithhole'\n\nconst version = VERSION\n\nexport default {\n  Config,\n  Coordinate,\n  Canvas,\n  Event,\n  SelectEvent,\n  FeatureEvent,\n  ModifyEvent,\n  EventManager,\n  Counter,\n  Helpers,\n  ImageState,\n  ImageEvent,\n  SingleImage,\n  Geometry,\n  Extent,\n  Point,\n  Line,\n  Polygon,\n  MutilPolygon,\n  Parallelogram,\n  RotatabelExtent,\n  Style,\n  PointStyle,\n  LineStyle,\n  FillStyle,\n  TextStyle,\n  FeatureLayer,\n  SingleImageLayer,\n  Draw,\n  DrawEvent,\n  BrowserEvent,\n  EventType,\n  Feature,\n  Map,\n  View,\n  Overlay,\n  GeometryUtil,\n  ExtentUtil,\n  Select,\n  Modify,\n  DragPan,\n  Control,\n  Zoom,\n  Obj,\n  Math,\n  MouseWheelZoom,\n  GeoJSON,\n  version,\n  intersects,\n  splitPolygonByPolyline,\n  contains,\n  polygonWithHole\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Constants defined width the define tag connot be changed in application code,\n * but can be set at compile time.\n *\n * @type {{}}\n */\nexport const Config = {}\n\n/**\n * Enable debug mode ,Default is 'true'\n *\n * 配置DEBUG\n *\n * @property DEBUG\n * @static\n * @type {Boolean}\n */\nConfig.DEBUG = true\n\n/**\n * Default max zomm factor\n *\n * @property DEFAULT_ZOOM_FACTOR\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_ZOOM_FACTOR = 2\n\n/**\n * Default max zoom level for map view.\n * Defaylt is '10'\n *\n * @property DEFAULT_MAX_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MAX_ZOOM = 10\n\n/**\n * Default min zoom level for map view.\n * Default is '0'\n *\n * @property DEFAULT_MIN_ZOOM\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_MIN_ZOOM = 0\n\n/**\n * Maxinum mouse wheel delta.\n *\n * @property MOUSE_WHEEL_ZOOM_MAXDELTA\n * @static\n * @type {Number}\n */\nConfig.MOUSE_WHEEL_ZOOM_MAXDELTA = 1\n\n/**\n * Default tile size\n *\n * @property DEFAULT_TILE_SIZE\n * @static\n * @type {Number}\n */\nConfig.DEFAULT_TILE_SIZE = 256\n\n\nexport default{\n  Config\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/config.js","\nlet uid = 0\n\nexport function getUid () {\n  return uid++\n}\n\nexport default {\n  getUid\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/counter.js","/**\n * 将rbg数组装换成rgba的字符串格式\n * @param color rgb数组\n * @param alpha 透明度\n * @returns {string} 返回rgba格式字符串\n */\nexport function colorToString(color,alpha = 1){\n  let r = color[0]\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0\n  }\n  \n  let g = color[1]\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0\n  }\n  \n  let b = color[2]\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0\n  }\n  \n  return `rgba(${r}, ${g} , ${b} , ${alpha} )`\n}\n\nexport default {\n  colorToString\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/helpers.js","export default class Obj {\n\n\n  static deepClone(obj) {\n    if (obj === null || typeof obj !== 'object') {\n      return obj\n    }\n\n    var cpObj = obj instanceof Array ? [] : {}\n\n    for (var key in obj) {\n      cpObj[key] = Obj.deepClone(obj[key])\n    }\n    \n    return cpObj\n  }\n  \n  /**\n   * Get a collection from object\n   * @param object\n   * @returns {Array}\n   */\n  static getValues (object) {\n    const values = []\n    for (let property in object) {\n      values.push(object[property])\n    }\n    return values\n  }\n  \n  /**\n   * Clear all properties in object\n   * @param object\n   */\n  static clear (object) {\n    for (let property in object) {\n      Reflect.deleteProperty(object, property)\n    }\n  }\n  \n  /**\n   * Convert an object to a map instance\n   * @param obj\n   * @returns {Map}\n   */\n  static objectToMap (obj) {\n    let map = new Map()\n    \n    for (let ke of Object.keys(obj)) {\n      map.set(ke, obj[ke])\n    }\n    \n    return map\n  }\n  \n  /**\n   *\n   * Convert a map object to object\n   *\n   * @static\n   * @method mapToObject\n   * @param map {Map} 传入的 Map 的对象\n   * @returns {Object} 装换成后的 Object 的对象\n   */\n  static mapToObject (map) {\n    // 合法性判断\n    if (map === undefined || map === null) {\n      return {}\n    }\n    \n    let object = {}\n    map.forEach( (value, key) => {\n      object[key] = value\n    })\n    \n    return object\n  }\n  \n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/obj.js","export function clamp (value, min, max) {\n  return Math.min(Math.max(value, min), max)\n}\n\n\nexport function lerp (a, b, x) {\n  return a + x * (b - a)\n}\n\nexport default {\n  clamp,\n  lerp\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/math.js","export const Coordinate = {}\n\nCoordinate.add = (coordinate, delta)  => {\n  coordinate[0] += delta[0]\n  coordinate[1] += delta[1]\n  return coordinate\n}\n\nCoordinate.rotate = (coordinate, angle) => {\n  const cosAngle = Math.cos(angle)\n  const sinAngle = Math.sin(angle)\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle\n  coordinate[0] = x\n  coordinate[1] = y\n  return coordinate\n}\n\nCoordinate.scale = (coordinate, scale) => {\n  coordinate[0] *= scale\n  coordinate[1] *= scale\n  return coordinate\n}\n\nCoordinate.equal = (coordinate1, coordinate2) => {\n  return coordinate1[0] === coordinate2[0] &&\n         coordinate1[1] === coordinate2[1]\n}\n\nexport default {\n  Coordinate\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/coordinate.js","export const Canvas = {}\n\n/**\n *\n * @param context\n * @param rotation\n * @param offsetX\n * @param offsetY\n */\nCanvas.rotateAtOffset = function(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY)\n    context.rotate(rotation)\n    context.translate(-offsetX, -offsetY)\n  }\n}\n\nexport default {\n  Canvas\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/canvas.js","import Geometry from '../../geometry/geometry'\n\n// -------------------------------------------------\n// geometryUtil：\n// 底层数学计算方法集，如直线距离计算、投影点计算、向量计算等\n// -------------------------------------------------\n\n/**\n * 判断两个点是否相交\n *\n * @method pointIntersectPoint\n * @param pointA\n * @param pointB\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectPoint (pointA, pointB, tolerance) {\n  const toleranceDistance = tolerance ? tolerance : 2\n  \n  const distance = squaredDistance(pointA.x, pointA.y, pointB.x, pointB.y)\n  if (distance <= toleranceDistance) {\n    return true\n  }\n  \n  return false\n}\n\n/**\n * 判断点是否与线相交\n *\n * @method pointIntersectLine\n * @param pointA\n * @param line\n * @param tolerance {Number}\n * @returns {Boolean}\n */\nexport function pointIntersectLine (pointA, line, tolerance) {\n  const path = line.path\n  const squaredSegmentDistanceFn = squaredSegmentDistance\n  const x = pointA.x\n  const y = pointA.y\n  \n  let find = false\n  for (let i = 0, ii = path.length - 1; i < ii; i++) {\n    let nowP = path[i]\n    let nextP = path[i + 1]\n    let distance = squaredSegmentDistanceFn(x, y, nowP.x, nowP.y, nextP.x, nextP.y)\n    distance = Math.sqrt(distance)\n    if (distance <= tolerance) {\n      find = true\n      break\n    }\n  }\n  \n  return find\n}\n\n/**\n * Return the square of the closest distance between the point\n * and the line segment.\n * @param x\n * @param y\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {number}\n */\nexport function squaredSegmentDistance (x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  if (dx !== 0 || dy !== 0) {\n    let t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy)\n    if (t > 1) {\n      x1 = x2\n      y1 = y2\n    } else if (t > 0) {\n      x1 += dx * t\n      y1 += dy * t\n    }\n  }\n  \n  return squaredDistance(x, y, x1, y1)\n}\n\n/**\n *\n * @param coordinate\n * @param segment\n * @returns {number}\n */\nexport function squaredDistanceToSegment (coordinate, segment) {\n  const closestCoordinate = closestOnSegment(coordinate, segment)\n  return squaredDistance(coordinate[0], coordinate[1], closestCoordinate[0], closestCoordinate[1])\n}\n\n/**\n * 判断两个坐标是否相等\n *\n * @method equals\n * @param coordinate1\n * @param coordinate2\n * @returns {Boolean}\n */\nexport function equals (coordinate1, coordinate2) {\n  let equals = true\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false\n      break\n    }\n  }\n  \n  return equals\n}\n\n/**\n * 计算两点之间的距离的平方\n *\n * @method squaredDistance\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @returns {Number} squared distance\n */\nexport function squaredDistance (x1, y1, x2, y2) {\n  const dx = x2 - x1\n  const dy = y2 - y1\n  return dx * dx + dy * dy\n}\n\n/**\n * 计算两点之间的距离\n *\n * @method distance\n * @param coord1\n * @param coord2\n * @returns {Number}\n */\nexport function distance (coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1[0], coord1[1], coord2[0], coord2[1]))\n}\n\n/**\n *\n * @param coordinate {Array}\n * @param segment\n * @returns {Array}\n */\nexport function closestOnSegment (coordinate, segment) {\n  const x0 = coordinate[0]\n  const y0 = coordinate[1]\n  const start = segment[0]\n  const end = segment[1]\n  const x1 = start[0]\n  const y1 = start[1]\n  const x2 = end[0]\n  const y2 = end[1]\n  const dx = x2 - x1\n  const dy = y2 - y1\n  \n  const along = (dx === 0 && dy === 0) ? 0 :\n  ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0)\n  \n  let x, y\n  if (along <= 0) {\n    x = x1\n    y = y1\n  } else if (along >= 1) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return [x, y]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param x\n * @param y\n * @returns {oolean}\n */\nexport function linearRingsContainsXY (flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false\n  }\n  \n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false\n  }\n  \n  let i, ii\n  for (i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param x\n * @param y\n * @returns {boolean}\n */\nexport function linearRingContainsXY (flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    \n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--\n    }\n    \n    x1 = x2\n    y1 = y2\n  }\n  \n  return wn !== 0\n}\n\n/**\n * 计算在 AB 延长线上的距离点 B d 距离的点\n * @param xa A 点的 X\n * @param ya A 点的 Y\n * @param xb B 点的 X\n * @param yb B 点的 Y\n * @param d 距离 B 点 d 距离\n * @returns {Array} 返回延长线上的点\n */\nexport function getPointInExtendedLineByDistanceFromAB (\n  xa, ya, xb, yb, d\n) {\n  let xab, yab\n  let xbd\n  let xd, yd\n  \n  xab = xb - xa\n  yab = yb - ya\n\n  if (xab === 0) {\n    if (yab < 0) {\n      return [xb, yb - d]\n    } else {\n      return [xb, yb + d]\n    }\n  }\n\n  if (yab === 0) {\n    if (xab < 0) {\n      return [xb - d, yb]\n    } else {\n      return [xb + d, yb]\n    }\n  }\n  \n  xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  \n  if (xab > 0) {\n    xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  } else {\n    xbd = -Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1))\n  }\n  \n  xd = xb + xbd\n  yd = yb + yab / xab * xbd\n  \n  return [xd, yd]\n}\n\nexport function getProjectivePoint(pLine, k, pOut) {\n  let [projectX, projectY] = [null, null]\n\n  //垂线斜率不存在情况\n  if (k == 0) {\n    projectX = pOut[0]\n    projectY = pLine[1]\n  } else {\n    projectX = (k * pLine[0] + pOut[0] / k + pOut[1] - pLine[1]) / (1 / k + k)\n    projectY = -1 / k * (projectX - pOut[0]) + pOut[1]\n  }\n\n  return [projectX, projectY]\n}\n\nexport function getAngleBetweenTwoVectors(x1, y1, x2, y2) {\n  const a = Math.atan2(y1, x1)\n  const b = Math.atan2(y2, x2)\n  const angle = b - a\n  return angle\n}\n\nexport function simplify(geometry) {\n  if (!geometry) {\n    return geometry\n  }\n  \n  let coordinates\n  const geoType = geometry.geometryType\n  if (geoType === Geometry.POLYGON) {\n    coordinates = geometry.getCoordinates()[0]\n  } else if (geoType === Geometry.LINE) {\n    coordinates = geometry.getCoordinates()\n    \n    const sliceCoords = coordinates.slice(1, coordinates.length - 2)\n    const newCoords = [coordinates[0]]\n    \n    for (let i = 0, len = sliceCoords.length ;i < len; i += 2) {\n      newCoords.push(sliceCoords[i])\n    }\n  \n    newCoords.push(coordinates[coordinates.length - 1])\n    geometry.setCoordinates(newCoords)\n  }\n}\n\nexport default {\n  linearRingContainsXY,\n  linearRingsContainsXY,\n  pointIntersectPoint,\n  squaredDistance,\n  closestOnSegment,\n  getPointInExtendedLineByDistanceFromAB,\n  equals,\n  simplify,\n  distance\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/geometryutil.js","import BaseObject from '../core/baseobject'\nimport {ExtentUtil} from './support/extentutil'\nimport { functions } from '../utils/functions'\n\n/**\n * 图形基础类，不能直接实例化改类，只能继承和扩展，并实现该类定义的接口\n *\n * @class Geometry\n * @extends BaseObject\n * @module geometry\n * @constructor\n */\nexport default class Geometry extends BaseObject {\n\n  /**\n   * @constructor\n   */\n  constructor () {\n    super()\n    \n    this._extent = null\n  \n    /**\n     * @type {number}\n     */\n    this.stride = 2\n\n    /**\n     * 图形是否可以旋转\n     * @type {boolean}\n     */\n    this.rotable = false\n\n    /**\n     * 图形是否可以被平移\n     * @type {boolean}\n     */\n    this.moveable = false\n\n    /**\n     * 图形是否可以被缩放\n     * @type {boolean}\n     */\n    this.scaleable = false\n  }\n\n  /**\n   * 获取图形的类型\n   *\n   * @property geometryType\n   * @type {String}\n   */\n  get geometryType () {return Geometry.UNDEFINED}\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 除去点意外，任何图形都有最小外接矩形\n   *\n   * @property extent\n   * @type {mk.Extent}\n   */\n  get extent () { return this._extent }\n  \n  /**\n   * 获取图形是否是逆时针\n   *\n   * @property anticlockwise\n   * @type {Boolean}\n   */\n  get anticlockwise () {\n    const geometryType = this.geometryType\n    const coordinates = this.getCoordinates()\n  \n    let fp, sp, f1, f2, f3\n    \n    if (geometryType === Geometry.LINE ) {\n      f1 = [0, 0]\n      f2 = coordinates[0]\n      f3 = coordinates[1]\n    } else if ( geometryType === Geometry.POLYGON ||\n                geometryType === Geometry.EXTENT ) {\n      f1 = coordinates[0]\n      f2 = coordinates[1]\n      f3 = coordinates[2]\n    }\n  \n    fp = [f2[0] - f1[0], f2[1] - f1[1]]\n    sp = [f3[0] - f2[0], f3[1] - f2[1]]\n    \n    return fp[0] * sp[1] - sp[0] * fp[1] < 0\n  }\n  \n  /**\n   * 判断传入的点坐标是否在图形内\n   *\n   * @method pointInExtent\n   * @param coordinate {Array} 包含x, y的点数组\n   * @return {Boolean} ture returned if success, false otherwise.\n   */\n  pointInExtent (coordinate) {\n    return ExtentUtil.containsPoint(this.extent, coordinate)\n  }\n  \n  /**\n   * 判断是否相交\n   *\n   * intersect\n   * @param geomtry {Geometry}\n   * @returns {Boolean}\n   */\n  intersect (geomtry) { // eslint-disable-line no-unused-vars\n    return false\n  }\n  \n  /**\n   * @TODO 使用getter、setter的读取器优化\n   * 获取图形的坐标信息\n   * @abstract\n   * @method getCoordinates\n   * @return {Array} 返回坐标数组\n   */\n  getCoordinates () { return [] }\n\n  /**\n   * 计算表单显示的坐标\n   *\n   *  @method getFormShowPosition\n   *  @param {Number} offsetX 表单显示的 x 偏移量, 默认为 0\n   *  @param {Number} offsetY 表单显示的 y 偏移量, 默认为 0\n   *  @return {Array} 返回点坐标的数组表达方式\n   *  @example\n   *\n   *      var point = geometry.getFormShowPosition(10, 10)\n   *      Form.position = point\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) { return [] } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns { Array }\n   */\n  getFlatInteriorPoint () { return [] }\n  \n  /**\n   * 判断当前图形是否包含一个点\n   *\n   * @abstract\n   * @method containsXY\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   * @return {Boolean} ture returned if contains, false otherwise\n   */\n  containsXY (x, y) { return true } // eslint-disable-line no-unused-vars\n  \n  /**\n   * 移动改图形，移动图形，需要传递x，y的移动量\n   *\n   * @method move\n   * @abstract\n   * @param x {Number} x 坐标信息\n   * @param y {Number} y 坐标信息\n   */\n  move (x = 0, y = 0, opts) {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 定义对图形本身的缩放方法\n   *\n   * @method scale\n   * @abstract\n   * @param scale {Number} 缩放比率\n   * @param origin {Array} 缩放参考点\n   */\n  scale(scale = 1,origin) {} // eslint-disable-line no-unused-vars\n\n  getRotatedCoordinates(angle, anchor) {\n    const coordinates = this.getCoordinates()[0]\n    const newCoordinates = []\n\n    const rotateXYFn = this.rotateXY\n    for (let i = 0, len = coordinates.length; i < len; i++) {\n      let coor = coordinates[i]\n      coor = rotateXYFn(coor[0], coor[1], anchor, angle)\n      newCoordinates.push(coor)\n    }\n\n    return newCoordinates\n  }\n  \n  /**\n   * 旋转图形\n   * @method rotate\n   * @abstract\n   * @param angle {Number} 旋转的角度\n    * @param anchor {Object} 旋转的中心点\n   */\n  rotate(angle = 0, anchor = [0, 0], opts) {\n    const newCoordinates = this.getRotatedCoordinates(angle, anchor)\n    this.setCoordinates([newCoordinates])\n    this.changed()\n  }\n\n  rotateXY(x, y, anchor, angle) {\n    let [rx, ry] = anchor\n\n    const dx = (x - rx) * Math.cos(angle) - (y - ry) * Math.sin(angle) + rx\n    const dy = (x - rx) * Math.sin(angle) + (y - ry) * Math.cos(angle) + ry\n    return [dx, dy]\n  }\n\n\n  /**\n   * 获取旋转图形的旋转锚点\n   */\n  getAnchorForRotating() {} // eslint-disable-line no-unused-vars\n  \n  /**\n   * 创建一个简化后的图形副本\n   *\n   * @method simplify\n   * @abstract\n   * @param tolerance {Number} 阈值\n   */\n  simplify(tolerance = 1) {} // eslint-disable-line no-unused-vars\n \n  /**\n   * 将图形转换成json格式\n   *\n   * @method toJSON\n   * @abstrct\n   */\n  toJSON () {}\n  \n  /**\n   * 克隆一个图形副本\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n}\n\n/**\n * 点类型\n *\n * @property POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.POINT = 'point'\n\n/**\n * 多点类型\n *\n * @property MULTI_POINT\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POINT = 'multi_point'\n\n/**\n * 线类型\n *\n * @property LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.LINE = 'line'\n\n/**\n * 多线类型\n *\n * @property MULTI_LINE\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_LINE = 'multi_line'\n\n/**\n * 多边形类型\n *\n * @property POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.POLYGON = 'polygon'\n\n/**\n * 多个多边形类型\n *\n * @property MULTI_POLYGON\n * @static\n * @final\n * @type {String}\n */\nGeometry.MULTI_POLYGON = 'multi_polygon'\n\n/**\n * 矩形类型\n *\n * @property EXTENT\n * @static\n * @final\n * @type {String}\n */\nGeometry.EXTENT = 'extent'\n\n/**\n * 圆类型\n *\n * @property CIRCLE\n * @static\n * @final\n * @type {String}\n */\nGeometry.CIRCLE = 'circle'\n\n/**\n * 定义平行四边形图形\n * @type {string}\n */\nGeometry.PARALLELOGRAM = 'parallelogram'\n\n/**\n * 定义可旋转矩形\n */\nGeometry.ROTATABLE_EXTENT = 'rotatable_extent'\n\n/**\n * 未定义\n *\n * @property UNDEFINED\n  * @static\n * @final\n * @type {String}\n */\nGeometry.UNDEFINED = 'undefined'\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/geometry.js","// The BaseObject is a base class that only can be inherited, not be instanced.\nimport Event from './event'\nimport {getUid} from '../utils/counter'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * 对象基类，所有子类原则上要继承该类。\n *\n * 该类提供一个 id 和一个 revision,id 作为类的唯一标示\n *\n * @class BaseObject\n * @extends Event\n * @constructor\n * @module core\n */\nexport default class BaseObject extends Event {\n\n  /**\n   * Create a BaseObject\n   *\n   * 构造函数\n   *\n   * @consructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * ID\n     *\n     * @property id\n     * @type {Number}\n     * @private\n     */\n    this._id = getUid()\n  \n    /**\n     * 版本号\n     *\n     * @property revision\n     * @type {Number}\n     * @private\n     */\n    this._revision = 0\n  }\n  \n  /**\n   * @TODO 需要加入渲染队列，采取延时手段，批量渲染，提高性能\n   * 可以借鉴vue的队列方式\n   * \n   * 此方法用于派发map渲染事件\n   *\n   * @example this.changed() | super.changed()\n   *\n   * @method changed\n   */\n  changed () {\n    ++this._revision\n    this.dispatchEvent(EventType.CHANGE)\n  }\n\n  /**\n   *\n   * ID属性，用于获取该对象的ID编号\n   *\n   * @property id\n   * @type {Number}\n   */\n  get id () {\n    return this._id\n  }\n  \n  /**\n   *\n   * 地图渲染的版本号\n   *\n   * @property revision\n   * @type {Number}\n   * @returns {Number} the revision id\n   */\n  get revision () { return this._revision }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseobject.js"," // The event processor for all subclasss, which can allow subclass\n // to handle event dispatching and listening.This is the top level class\n/**\n * 顶层事件处理器类,让子类具备事件的监听和派发\n *\n * @class Event\n * @module core\n * @constructor new Event()\n *\n */\nexport default class Event {\n  \n  /**\n   * Event's constructor\n   * @constructor constructor\n   */\n  constructor () {\n    this._pendingRemovals = {}\n\n    this._listeners = {}\n    this._dispatching = {}\n\n    this.nullFunction = function () {}\n  }\n  \n  /**\n   * 根据事件标识获取对应标识的方法列表\n   *\n   * @method getListeners\n   * @param type {String} event type 事件标识\n   * @return {Array} 返回对应事件标示的函数数组\n   */\n  getListeners (type) {\n    return this._listeners[type]\n  }\n  \n  /**\n   * 判断是否含有对应事件标识的监听\n   *\n   * @method hasListener\n   * @param optType {Boolean}\n   * @returns {Boolean} ture if exsit ,false otherwise\n   */\n  hasListener (optType) {\n    return optType ?\n      Reflect.has(this._listeners, optType) :\n      Object.keys(this._listeners).length > 0\n  }\n\n  /**\n   * 移除事件监听\n   *\n   * @method removeEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  removeEventListener (type, listener) {\n    const listeners = this._listeners[type]\n    if (listeners) {\n      let index = listeners.indexOf(listener)\n\n      if (Reflect.has(this._pendingRemovals, type)) {\n        listeners[index] = this.nullFunction\n        ++this._pendingRemovals[type]\n      } else {\n        listeners.splice(index, 1)\n\n        if (listeners.length === 0) {\n          Reflect.deleteProperty(this._listeners, type)\n        }\n      }\n    }\n  }\n  \n  /**\n   * 添加事件监听,需要指定事件标示和处理方法\n   *\n   * @example\n   *    map.addEventListener('singleclick', function(event) {})\n   *\n   * @method addEventListener\n   * @param type {String} event type\n   * @param listener {Array} listeners for event type\n   */\n  addEventListener (type, listener) {\n    let listeners = this._listeners[type]\n    if (!listeners) {\n      listeners = this._listeners[type] = []\n    }\n\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener)\n    }\n  }\n  \n  /**\n   * 事件派发\n   *\n   * @example\n   * this.dispatchEvent(EventType.CHANGE)\n   *\n   * @method dispatchEvent\n   * @param event {String} event type string\n   * @returns {Boolean} ture if success ,false otherwise.\n   */\n  dispatchEvent (event) {\n    const evt = typeof event === 'string' ? {type: event} : event\n    const type = evt.type\n    evt.target = this\n    const listeners = this._listeners[type]\n    let propagate\n\n    if (listeners) {\n      if(!Reflect.has(this._dispatching, type)) {\n        this._dispatching[type] = 0\n        this._pendingRemovals[type] = 0\n      }\n\n      ++this._dispatching[type]\n\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false\n          break\n        }\n      }\n\n      --this._dispatching[type]\n\n      if (this._dispatching[type] === 0) {\n        let pendingRemovals = this._pendingRemovals[type]\n        Reflect.deleteProperty(this._pendingRemovals, type)\n\n        while (pendingRemovals--) {\n          this.removeEventListener(type, this.nullFunction)\n        }\n\n        Reflect.deleteProperty(this._dispatching, type)\n      }\n\n      return propagate\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/event.js","export const EventType = {}\n\n/**\n * Triggered when map is needed to render\n *\n * @property CHANGE\n * @static\n * @final\n * @type {String}\n */\nEventType.CHANGE = 'change'\n\n\n/**\n * Triggered when view has been changed\n *\n * 当地图视图发生变化时将会派发改事件\n *\n * @property VIEW_CHANGED\n * @static\n * @final\n * @type {String}\n */\nEventType.VIEW_CHANGED = 'viewchanged'\n\n/**\n * Triggered when a image download error\n *\n * @property ERROR\n * @static\n * @final\n * @type {String}\n */\nEventType.ERROR = 'error'\n\n/**\n * Triggered when a image finish load\n *\n * @property LOAD\n * @static\n * @final\n * @type {String}\n */\nEventType.LOAD = 'load'\n\n/**\n * 当浏览器窗口的尺寸发生变化时派发\n *\n * @property RESIZE\n * @static\n * @final\n * @type {string}\n */\nEventType.RESIZE = 'resize'\n\n\nexport default {\n  EventType\n}\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/eventtype.js","export const ExtentUtil = {}\n\n// -------------------------------------------------\n// extentUtil:\n// extent辅助方法集，如extent类转换、计算中心点、计算长宽、构建\n// 缓冲extent等作用\n// -------------------------------------------------\n\n/**\n * 创建一个空矩形\n *\n * @method createEmpty\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createEmpty = function () {\n  return [Infinity, Infinity, -Infinity, -Infinity]\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param opt_extent\n */\nExtentUtil.createOrUpdateFromFlatCoordinates = function(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = ExtentUtil.createOrUpdateEmpty(opt_extent)\n  return extendFlatCoordinates(\n    extent, flatCoordinates, offset, end, stride)\n}\n\nconst extendXY = function(extent, x, y) {\n  extent[0] = Math.min(extent[0], x)\n  extent[1] = Math.min(extent[1], y)\n  extent[2] = Math.max(extent[2], x)\n  extent[3] = Math.max(extent[3], y)\n}\n\n\nconst extendFlatCoordinates = function(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(\n      extent, flatCoordinates[offset], flatCoordinates[offset + 1])\n  }\n  \n  return extent\n}\n\n/**\n *\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.createOrUpdateEmpty = function(opt_extent) {\n  return ExtentUtil.createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent)\n}\n\n/**\n * 创建或更新矩形\n *\n * @method createOrUpdate\n * @param minX {Number}\n * @param minY {Number}\n * @param maxX {Number}\n * @param maxY {Number}\n * @param opt_extent {Array}\n * @returns {*}\n */\nExtentUtil.createOrUpdate = function(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX\n    opt_extent[1] = minY\n    opt_extent[2] = maxX\n    opt_extent[3] = maxY\n    return opt_extent\n  } else {\n    return [minX, minY, maxX, maxY]\n  }\n}\n\n/**\n * 获取矩形的中心点\n *\n * @method getCenter\n * @param extent\n * @returns {[*,*]}\n */\nExtentUtil.getCenter = function(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2]\n}\n\n/**\n * Create an empty extent.\n * @returns {[*,*,*,*]}\n */\nExtentUtil.createScaleExtent = function (center,value) {\n  return [center.x  - value, center.y  - value, center.x  + value, center.y + value]\n}\n\n/**\n *\n * @param point1\n * @param point2\n * @returns {[*,*,*,*]}\n */\nExtentUtil.boundingExtentFromTwoPoints = function (point1, point2) {\n  let xmin = 0, ymin = 0, xmax = 0, ymax = 0\n  \n  if (point1[0] > point2[0]) {\n    xmin = point2[0]\n    xmax = point1[0]\n  } else {\n    xmin = point1[0]\n    xmax = point2[0]\n  }\n  \n  if (point1[1] > point2[1]) {\n    ymin = point2[1]\n    ymax = point1[1]\n  } else {\n    ymin = point1[1]\n    ymax = point2[1]\n  }\n  \n  return [xmin, ymin, xmax, ymax]\n}\n\n/**\n * 通过坐标数据构建矩形\n *\n * @method boundingExtent\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return [\n    ExtentUtil.getBottomLeft(extent),\n    ExtentUtil.getBottomRight(extent),\n    ExtentUtil.getTopRight(extent),\n    ExtentUtil.getTopLeft(extent),\n    ExtentUtil.getBottomLeft(extent)\n  ]\n}\n\n/**\n * Build an extent that includes all given coordinates.\n * @param extent\n * @param coordinate\n */\nExtentUtil.boundingSimpleExtent = function (coordinates) {\n  let extent = ExtentUtil.createEmpty()\n  \n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    ExtentUtil.extendCoordinate(extent, coordinates[i])\n  }\n  \n  return extent\n}\n\n/**\n * 通过坐标更新矩形\n *\n * @method extendCoordinate\n * @param extent {Geometry}\n * @param coordinate {Array}\n */\nExtentUtil.extendCoordinate = function(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0]\n  }\n  \n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0]\n  }\n  \n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1]\n  }\n  \n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1]\n  }\n}\n\n\n/**\n * 获取矩形右侧线段坐标\n *\n * getBottomRight\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomRight = function (extent) {\n  return [extent[2], extent[1]]\n}\n\n\n/**\n * 获取矩形左侧线段坐标\n *\n * getBottomLef\n * @param extent {Geometry}\n * @returns {[*,*]}\n */\nExtentUtil.getBottomLeft = function (extent) {\n  return [extent[0], extent[1]]\n}\n\n\n/**\n * Get the top right coordinate of an extent\n * extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopRight = function (extent) {\n  return [extent[2], extent[3]]\n}\n\n\n/**\n * Get the top left coordinate of an extent\n *  extent\n * @returns {[*,*]}\n */\nExtentUtil.getTopLeft = function (extent) {\n  return [extent[0], extent[3]]\n}\n\n/**\n * 判断点是否在矩形上\n *\n * @method containsPoint\n * @param extent {Geometry}\n * @param point {Array}\n * @returns {Boolean}\n */\nExtentUtil.containsPoint = function(extent, point){\n  const x = point[0]\n  const y = point[1]\n  \n  if (Array.isArray(extent)) {\n    return extent[0] <= x && x <= extent[2] &&\n           extent[1] <= y && y <= extent[3]\n  } else {\n    return (extent.xmin - 1) <= x && x <= (extent.xmax + 1) &&\n      (extent.ymin - 1)<= y && y <= (extent.ymax + 1)\n  }\n}\n\n/**\n * Return extent increased by the provided value.\n * @param extent\n * @param value\n * @param optExtent\n * @returns {*}\n */\nExtentUtil.buffer = function(extent, value, optExtent) {\n  if (optExtent) {\n    optExtent[0] = extent[0] - value\n    optExtent[1] = extent[1] - value\n    optExtent[2] = extent[2] + value\n    optExtent[3] = extent[3] + value\n    return optExtent\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ]\n  }\n}\n\n/**\n * Convert xmin, ymin, xmax, ymax of an extent to a ring array\n * @param xmin\n * @param ymin\n * @param xmax\n * @param ymax\n * @returns {[*,*,*,*,*]}\n */\nExtentUtil.minMaxToRing = function (xmin, ymin, xmax, ymax) {\n  const ring = [\n    [xmin, ymin],\n    [xmax, ymin],\n    [xmax, ymax],\n    [xmin, ymax],\n    [xmin, ymin]\n  ]\n  \n  return ring\n}\n\n/**\n * 获取图形的高\n *\n * @method getHeight\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getHeight = function(extent) {\n  return extent[3] - extent[1]\n}\n\n/**\n * 获取图形的宽\n *\n * @method getWidth\n * @param extent {Geometry}\n * @returns {Number}\n */\nExtentUtil.getWidth = function(extent) {\n  return extent[2] - extent[0]\n}\n\n/**\n * 矩形坐标点更新\n *\n * @method updateExtent\n * @param geometry {Geometry}\n * @param newCoordinates {Array}\n * @param dragSegments\n * @returns {Array}\n */\nExtentUtil.updateExtent = function (geometry, newCoordinates, dragSegments) {\n  const dragSegment = dragSegments[0]\n  const index = dragSegment.index\n  const extentCoordinates = geometry.getCoordinates()\n  const segment1 = extentCoordinates[index]\n  const segment2 = extentCoordinates[index + 1]\n  \n  const isVertex = dragSegment.isVertex\n  if (isVertex) {\n    if (index === 0 || index === 4) {\n      extentCoordinates[0] = newCoordinates\n      extentCoordinates[4] = newCoordinates\n      extentCoordinates[1][1] = newCoordinates[1]\n      extentCoordinates[3][0] = newCoordinates[0]\n    } else if (index === 1) {\n      extentCoordinates[1] = newCoordinates\n      \n      extentCoordinates[2][0] = newCoordinates[0]\n      extentCoordinates[0][1] = newCoordinates[1]\n      extentCoordinates[4] = extentCoordinates[0]\n    } else if (index === 2) {\n      extentCoordinates[2] = newCoordinates\n      extentCoordinates[1][0] = newCoordinates[0]\n      extentCoordinates[3][1] = newCoordinates[1]\n    } else if (index === 3) {\n      extentCoordinates[3] = newCoordinates\n      extentCoordinates[2][1] = newCoordinates[1]\n      extentCoordinates[0][0] = newCoordinates[0]\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  } else {\n    if (segment1[0] === segment2[0]) {\n      extentCoordinates[index][0] = newCoordinates[0]\n      extentCoordinates[index + 1][0] = newCoordinates[0]\n    }\n  \n    if (segment1[1] === segment2[1]) {\n      extentCoordinates[index][1] = newCoordinates[1]\n      extentCoordinates[index + 1][1] = newCoordinates[1]\n    }\n  \n    if (index === 3 ) {\n      extentCoordinates[0] = extentCoordinates[4]\n    }\n    if (index === 0 ) {\n      extentCoordinates[4] = extentCoordinates[0]\n    }\n  }\n  \n  \n  return extentCoordinates\n}\n\n/**\n *\n * @param extent1\n * @param extent2\n * @param opt_extent\n * @returns {(*|*|*|*)[]}\n */\nExtentUtil.getIntersection = function(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : ExtentUtil.createEmpty()\n  if (ExtentUtil.intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0]\n    } else {\n      intersection[0] = extent2[0]\n    }\n    \n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1]\n    } else {\n      intersection[1] = extent2[1]\n    }\n    \n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2]\n    } else {\n      intersection[2] = extent2[2]\n    }\n    \n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3]\n    } else {\n      intersection[3] = extent2[3]\n    }\n  }\n  \n  return intersection\n}\n\n/**\n * 判断两个矩形是否相交\n *\n * @method intersects\n * @param extent1 {Geometry}\n * @param extent2 {Geometry}\n * @returns {Boolean}\n */\nExtentUtil.intersects = function(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n}\n\n/**\n * 判断矩形是否包含在另一个矩形中\n *\n * @method containsExtent\n * @param extent1\n * @param extent2\n * @returns {Boolean}\n */\nExtentUtil.containsExtent = function(extent1, extent2) {\n  return extent1[0] <= extent2[0] &&\n         extent2[2] <= extent1[2] &&\n         extent1[1] <= extent2[1] &&\n         extent2[3] <= extent1[3]\n}\n\n/**\n *\n * @param extent\n * @returns {boolean}\n */\nExtentUtil.isEmpty = function(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1]\n}\n\n/**\n *\n * @param center\n * @param resolution\n * @param rotation\n * @param size\n * @param opt_extent\n * @returns {*}\n */\nExtentUtil.getForViewAndSize = function(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2\n  const dy = resolution * size[1] / 2\n  const cosRotation = Math.cos(rotation)\n  const sinRotation = Math.sin(rotation)\n  const xCos = dx * cosRotation\n  const xSin = dx * sinRotation\n  const yCos = dy * cosRotation\n  const ySin = dy * sinRotation\n  const x = center[0]\n  const y = center[1]\n  const x0 = x - xCos + ySin\n  const x1 = x - xCos - ySin\n  const x2 = x + xCos - ySin\n  const x3 = x + xCos + ySin\n  const y0 = y - xSin - yCos\n  const y1 = y - xSin + yCos\n  const y2 = y + xSin + yCos\n  const y3 = y + xSin - yCos\n  \n  return ExtentUtil.createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent)\n}\n\nexport default {\n  ExtentUtil\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/extentutil.js","export const functions = {}\n\n/**\n * 默认条件函数执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.TURE = () => true\n\n/**\n * 默认条件函数不执行\n * @returns {boolean}\n * @constructor\n */\nfunctions.FALSE = () => false\n\nexport default {\n  functions\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/functions.js","/**\n * Created by zhangyong on 2017/3/17.\n */\n\nimport Geometry from '../geometry/geometry'\nimport FillStyle from './fillstyle'\nimport LineStyle from './linestyle'\nimport PointStyle from './pointstyle'\n\nexport const Style = {}\n\n/**\n * 设置缺省图形style\n *\n * Create a defaut style for feature layer\n * @returns {null|Array|[*]}\n */\nStyle.defaultFunction = function () {\n  if (!Style._default) {\n    const white = [255, 255, 255]\n    const blue = [0, 153, 255]\n    const width = 1.5\n  \n    Style._default = {}\n    \n    // 面样式 polygon style\n    Style._default[Geometry.POLYGON] = [\n      new FillStyle(white, new LineStyle(blue, 1, 1.25), 0.2)\n    ]\n    Style._default[Geometry.MULTI_POLYGON] = Style._default[Geometry.POLYGON]\n    Style._default[Geometry.PARALLELOGRAM] = Style._default[Geometry.POLYGON]\n    Style._default[Geometry.ROTATABLE_EXTENT] = Style._default[Geometry.POLYGON]\n    \n    // same as polygon style\n    Style._default[Geometry.EXTENT] = Style._default[Geometry.POLYGON]\n  \n    // 线样式 line style\n    Style._default[Geometry.LINE] = [\n      new LineStyle(blue, 1, width)// 内框\n    ]\n  \n    // 点样式 point style\n    Style._default[Geometry.POINT] = [new PointStyle(10,white,1,new LineStyle(blue,1,width))]\n    \n  }\n  \n  return Style._default\n}\n\n/**\n * Create a default style while drawing\n * @returns {{}}\n */\nStyle.createDefaultEditing = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 1.5\n  \n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white,// 填充\n    new LineStyle(blue,1,1)// 边框\n    ,0.2)\n  ]\n  \n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  styles[Geometry.PARALLELOGRAM] = styles[Geometry.POLYGON]\n  styles[Geometry.ROTATABLE_EXTENT] = styles[Geometry.POLYGON]\n    \n  // 线样式\n  styles[Geometry.LINE] = [\n    new LineStyle(white,1,width + 1,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND),// 外框\n    new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(10, white, 0.1, new LineStyle(blue, 1, 2))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n *\n * @returns {{}}\n */\nStyle.createDefaultSelecting = function () {\n  const styles = {}\n  const white = [255, 255, 255]\n  const blue = [0, 153, 255]\n  const width = 3\n  const outsideLine = new LineStyle(white,1,width + 2,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)// 外框\n  const insideLine = new LineStyle(blue,1,width,LineStyle.LineCap.ROUND,LineStyle.LineJion.ROUND)\n  // 面样式\n  styles[Geometry.POLYGON] = [\n    new FillStyle(white, outsideLine,0.5),\n\n    new FillStyle(white, insideLine,0)\n  ]\n  styles[Geometry.MULTI_POLYGON] = styles[Geometry.POLYGON]\n  styles[Geometry.EXTENT] = styles[Geometry.POLYGON]\n  \n  // 线样式\n  styles[Geometry.LINE] = [\n    outsideLine,// 外框\n    insideLine// 内框\n  ]\n  styles[Geometry.MULTI_LINE] = styles[Geometry.LINE]\n  \n  // 点样式\n  styles[Geometry.POINT] = [new PointStyle(12,blue,1,new LineStyle(blue,1,1))]\n  styles[Geometry.MULTI_POINT] = styles[Geometry.POINT]\n  \n  return styles\n}\n\n/**\n * Convert the passed obj into a style function.\n *\n * @param obj\n * @returns {*}\n */\nStyle.createFunction = function(obj) {\n  let styleFunction\n  \n  if (typeof obj === 'function') {\n    styleFunction = obj\n  } else {\n    let styles\n    \n    if (Array.isArray(obj)) {\n      styles = obj\n    } else {\n      styles = [obj]\n    }\n    \n    styleFunction = function(feature) {\n      return styles[0][feature.geometry.geometryType]\n    }\n  }\n  \n  return styleFunction\n}\n\n\nexport default {\n  Style\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/style.js","import BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n *\n * 定义多边形样式，多边形样式包括<b>填充样式</b>和<b>边框样式</b>，\n * 需要分别设置\n *\n * @class FillStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var fillStyle = new mk.FillStyle([255,255,255],\n *         new mk.LineStyle([0,0,255],1,1.25),0.5)\n *\n */\nexport default class FillStyle extends BaseStyle {\n\n  /**\n   * 构建一个面样式\n   * 面样式由填充样式和边框样式组成\n   *\n   * @constructor\n   * @param style 备有接口，以后扩充面的填充样式\n   * @param color 面的填充颜色\n   * @param alpha 免得填充透明度\n   * @param borderStyle LineStyle对象，指定面样式的边框对象属性\n   */\n  constructor (color = [255,255,255], borderStyle = null, alpha = 1, style = FillStyle.SOLID) {\n    super(color, style, alpha)\n\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 边框样式对象\n   *\n   * @property borderStyle\n   * @type {mk.LineStyle}\n   */\n  get borderStyle () { return this._borderStyle}\n  set borderStyle (value) { return this._borderStyle = value }\n  \n  /**\n   * 克隆面样式\n   *\n   * @method clone\n   * @returns {FillStyle}\n   */\n  clone () {\n    const newStyle = new FillStyle(this.color, this.borderStyle.clone(),\n      this.alpha, this.style)\n    \n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n    \n    return newStyle\n  }\n  \n}\n\n/**\n * 实体填充\n * @static\n * @final\n * @property SOLID\n * @type {string}\n */\nFillStyle.SOLID = 'solid'\n\n\n// WEBPACK FOOTER //\n// ./src/style/fillstyle.js","/**\n * Created by zhangyong on 2017/6/13.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n * 定义基础样式类，包括了一些基础的属性，如颜色、对象样式、透明度\n *\n * @class BaseStyle\n * @extends BaseObject\n * @module style\n */\nexport default class BaseStyle extends BaseObject {\n\n  /**\n   *\n   * @constructor\n   * @param color {Array}\n   * @param style {Object}\n   * @param alpha {Number}\n   */\n  constructor (color, style, alpha = 1) {\n    \n    super()\n    \n    /**\n     * The color to fill or stroke geometry\n     */\n    this.color = color\n    \n    /**\n     * Which style to style geometry\n     */\n    this.style = style\n    \n    /**\n     *\n     */\n    this.alpha = alpha\n    \n    /**\n     * The text displayed with geometry\n     * @type {null}\n     */\n    this.textStyle = null\n  }\n  \n  /**\n   * 颜色\n   *\n   * @property color\n   * @type {Array}\n   */\n  get color () { return this._color }\n  set color (value) { this._color = value }\n  \n  /**\n   * 样式对象\n   *\n   * @property style\n   * @type {mk.Style}\n   */\n  get style () { return this._style }\n  set style (value) { this._style = value }\n  \n  /**\n   * 透明度\n   *\n   * @property alpha\n   * @default 1\n   * @type {Number}\n   */\n  get alpha () { return this._alpha}\n  set alpha (value) { return this._alpha = value }\n  \n  /**\n   * 文本样式对象\n   *\n   * @property textStyle\n   */\n  get textStyle () { return this._textStyle }\n  set textStyle (value) { this._textStyle = value }\n  \n  /**\n   * 克隆一个样式对象\n   *\n   * @method clone\n   * @abstract\n   */\n  clone () {}\n  \n}\n  \n\n\n// WEBPACK FOOTER //\n// ./src/style/basestyle.js","/**\n * Created by zhangyong on 2017/6/12.\n */\n\nimport BaseObject from '../core/baseobject'\n\n/**\n *\n * 定义文本样式\n *\n * @class TextStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     new mk.TextStyle({\n *       textAlign: 'center',\n *       textBaseline: 'middle',\n *       font: 'Arial',\n *       text: '标注示例',\n *       fill: [255, 0, 0],\n *       stroke: new mk.LineStyle([255, 255, 255],1,3,\n *          mk.LineStyle.LineCap.ROUND,\n *          mk.LineStyle.LineJion.ROUND),\n *       offsetX: 0,\n *       offsetY: 0,\n *       rotation: 0\n *     });\n *\n */\nexport default class TextStyle extends BaseObject {\n  \n  /**\n   *\n   * @constructor\n   * @param optOptions\n   */\n  constructor (optOptions) {\n    super()\n  \n    const options = optOptions || {}\n  \n    /**\n     *\n     */\n    this.text = options.text || ''\n    \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.font = options.font || TextStyle.DEFAULT_FONT\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation = options.rotation || 0\n  \n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView = options.rotateWithView\n  \n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale = options.scale || TextStyle.DEFAULT_SCALE\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textAlign = options.textAlign || TextStyle.DEFAULT_TEXT_START\n  \n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textBaseline = options.textBaseline || TextStyle.DEFAULT_BASE_LINE\n  \n    /**\n     * @private\n     * @type {ol.style.Fill}\n     */\n    this.fill = options.fill !== undefined ? options.fill : TextStyle.DEFAULT_FILL_COLOR\n  \n    /**\n     * @private\n     * @type {ol.style.Stroke}\n     */\n    this.stroke = options.stroke !== undefined ? options.stroke : TextStyle.DEFAULT_STROKE\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetX = options.offsetX !== undefined ? options.offsetX : 0\n  \n    /**\n     * @property offsetY\n     * @type {number}\n     */\n    this.offsetY = options.offsetY !== undefined ? options.offsetY : 0\n    \n  }\n  \n  /**\n   * 要显示的文本\n   *\n   * @property text\n   * @type {Stirng}\n   */\n  get text () { return this._text }\n  set text (value) { this._text = value }\n  \n  /**\n   * 显示的字体\n   *\n   * @property font\n   * @type {Stirng}\n   */\n  get font () { return this._font }\n  set font (value) { this._font = value }\n  \n  /**\n   * 旋转的角度\n   *\n   * @property rotation\n   * @type {Stirng}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value) { this._rotation = value }\n  \n  /**\n   * 旋转视图\n   *\n   * @property rotateWithView\n   * @type {Stirng}\n   */\n  get rotateWithView () { return this._rotateWithView }\n  set rotateWithView (value) { this._rotateWithView = value }\n  \n  /**\n   * 缩放比例\n   *\n   * @property scale\n   * @type {Stirng}\n   */\n  get scale () { return this._scale }\n  set scale (value) { this._scale = value }\n  \n  /**\n   * 字体\n   *\n   * @property textAlign\n   * @type {Stirng}\n   */\n  get textAlign () { return this._textAlign }\n  set textAlign (value) { this._textAlign = value }\n  \n  /**\n   * 字体线\n   *\n   * @property textBaseline\n   * @type {Stirng}\n   */\n  get textBaseline () { return this._textBaseline }\n  set textBaseline (value) { this._textBaseline = value }\n  \n  /**\n   * 字体颜色\n   *\n   * @property fill\n   * @type {Stirng}\n   */\n  get fill () { return this._fill }\n  set fill (value) { this._fill = value }\n  \n  /**\n   * 字体线的样式\n   *\n   * property stroke\n   * @type {Stirng}\n   */\n  get stroke () { return this._stroke }\n  set stroke (value) { this._stroke = value }\n  \n  /**\n   * 字体x轴偏移\n   *\n   * @property offsetX\n   * @type {Stirng}\n   */\n  get offsetX () { return this._offsetX }\n  set offsetX (value) { this._offsetX = value }\n  \n  /**\n   * 字体y轴偏移\n   *\n   * @property offsetY\n   * @type {Stirng}\n   */\n  get offsetY () { return this._offsetY }\n  set offsetY (value) { this._offsetY = value }\n  \n  /**\n   * 克隆字体样式\n   *\n   * @method clone\n   * @returns {TextStyle}\n   */\n  clone () {\n    return new TextStyle({\n      font: this.font,\n      rotation: this.rotation,\n      rotateWithView: this.rotateWithView,\n      scale: this.scale,\n      text: this.text,\n      textAlign: this.textAlign,\n      textBaseline: this.textBaseline,\n      fill: this.fill ? this.fill.clone : undefined,\n      stroke: this.stroke ? this.stroke.clone : undefined,\n      offsetX: this.offsetX,\n      offsetY: this.offsetY\n    })\n  }\n}\n\n/**\n *\n * 默认字体边框样式\n * @type {String} DEFAULT_STROKE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_STROKE = {\n  color: [255, 255, 255],\n  width: 2,\n  lineCap: 'round',\n  lineJion: 'round'\n}\n\n/**\n *\n * 默认字体颜色\n * @type {String} DEFAULT_FILL_COLOR\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FILL_COLOR = [0, 0, 255]\n\n/**\n * 默认字体样式\n * @type {String} DEFAULT_FONT\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_FONT = 'normal 12px Arial'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_TEXT_ALIGN\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_TEXT_ALIGN = 'center'\n\n/**\n * 字体显示从左边开始计算\n */\nTextStyle.DEFAULT_TEXT_START = 'start'\n\n\n/**\n * 默认字体显示位置\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_BASE_LINE = 'bottom'\n\n/**\n * 默认字体缩放初始值\n * @type {String} DEFAULT_BASE_LINE\n * @static\n * @final\n *\n */\nTextStyle.DEFAULT_SCALE = 10\n\n\n// WEBPACK FOOTER //\n// ./src/style/textstyle.js","import BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个线图形的样式\n *\n * @class LineStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *     var lineStye = new mk.LineStyle([0, 0, 255],1,3,\n *        mk.LineStyle.LineCap.ROUND,\n *        mk.LineStyle.LineJion.ROUND)\n */\nexport default class LineStyle extends BaseStyle {\n  \n  /**\n   * @constructor\n   * @param color\n   * @param alpha\n   * @param width\n   * @param style\n   * @param lineCap\n   * @param lineJion\n   * @param miterLimit\n   */\n  constructor (color = [255,255,255], alpha = 1, width = 1,\n        style = LineStyle.SOLID,lineCap = LineStyle.LineCap.BUTT,\n        lineJion = LineStyle.LineJion.MITER,miterLimit = 10) {\n    super(color, style, alpha)\n\n    this.width = width\n    this.lineCap = lineCap\n    this.lineJion = lineJion\n    this.miterLimit = miterLimit\n    this.textStyle = new TextStyle()\n  }\n  \n  /**\n   * 线宽\n   *\n   * @property width\n   * @type {Number}\n   */\n  get width () { return this._width }\n  set width (value) { this._width = value }\n  \n  /**\n   * 线的末端样式\n   *\n   * @property lineCap\n   * @type {Number}\n   */\n  set lineCap (value) { this._lineCap = value }\n  get lineCap () { return this._lineCap }\n  \n  /**\n   * 交叉线时的样式\n   *\n   * @property lineJion\n   * @type {Number}\n   */\n  set lineJion (value) { this._lineJion = value }\n  get lineJion () { return this._lineJion }\n  \n  /**\n   * 斜角缝限制\n   *\n   * @property miterLimit\n   * @type {Number}\n   */\n  set miterLimit (value) { this._miterLimit = value }\n  get miterLimit () { return this._miterLimit }\n\n  /**\n   * 克隆线样式\n   *\n   * @method clone\n   * @returns {LineStyle}\n   */\n  clone () {\n    const newStyle = new LineStyle(this.color, this.alpha, this.width,\n      this.style, this.lineCap, this.lineJion, this.miterLimit)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n\n}\n\n/**\n * 定义线的样式\n * @type {string}\n */\nLineStyle.SOLID = 'solid'\n\n/**\n * TODO 由郭靖来处理，参考 PointStyle\n * @type {string}\n */\nLineStyle.DASH = 'dash'\n\nLineStyle.DOT = 'dot'\n\nLineStyle.DASHDOT = 'dashdot'\n\nLineStyle.DASHDOTDOT = 'dashdotdot'\n\nLineStyle.NULL = 'none'\n\nLineStyle.LineCap = {\n  BUTT: 'butt',\n  ROUND: 'round',\n  SQUARE: 'square'\n}\n\n// visit http://www.w3school.com.cn/tags/canvas_linejoin.asp for more infomation\nLineStyle.LineJion = {\n  MITER: 'miter',// 默认，创建尖角\n  BEVEL: 'bevel',\n  ROUND: 'round'\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/linestyle.js","import BaseStyle from './basestyle'\nimport TextStyle from './textstyle'\n\n/**\n * 定义一个点图形的样式\n *\n * @class PointStyle\n * @extends BaseStyle\n * @module style\n * @constructor\n * @example\n *\n *  // 定义一个点，包括外边框的样式\n *\n *  var pointStyle = new mk.PointStyle(10,[255, 255, 255],1,new mk.LineStyle([0, 0, 255],1,1))\n *\n */\nexport default class PointStyle extends BaseStyle {\n\n  /**\n   * 构建一个点样式对象\n   *\n   * @constructor\n   * @param style 点样式，{circle|square|cross|x|triangle}其中的一种\n   * @param size 点的大小，默认15\n   * @param color\n   * @param alpha\n   * @param xoffset\n   * @param yoffset\n   * @param angle\n   */\n  constructor (size = 15, color = [255,0,0], alpha = 1,borderStyle = null,\n               xoffset = 0, yoffset = 0, angle = 0, style = PointStyle.CIRCLE) {\n    super(color, style, alpha)\n\n    this._size = size\n    this._xoffset = xoffset\n    this._yoffset = yoffset\n    this._angle = angle\n    this._borderStyle = borderStyle\n    this.textStyle = new TextStyle()\n  }\n\n  /**\n   * 克隆点的样式\n   *\n   * @method clone\n   * @returns {PointStyle}\n   */\n  clone () {\n    const newStyle = new PointStyle(this.size, this.color, this.alpha,\n       this.borderStyle.clone(), this.xoffset, this.yoffset, this.angle, this.style)\n\n    if (this.textStyle) {\n      newStyle.textStyle = this.textStyle\n    }\n\n    return newStyle\n  }\n  \n  /**\n   * 大小\n   *\n   * @property size\n   * @type {Number}\n   */\n  get size(){ return this._size }\n  set size(value){ this._size = value}\n  \n  /**\n   * X 轴偏移量\n   *\n   * @property xoffset\n   * @type {Number}\n   */\n  get xoffset(){ return this._xoffset }\n  set xoffset(value){ this._xoffset = value}\n  \n  /**\n   * Y 轴偏移量\n   *\n   * @property yoffset\n   * @type {Number}\n   */\n  get yoffset(){ return this._yoffset }\n  set yoffset(value){ this._yoffset = value}\n  \n  /**\n   * 样式显示的角度\n   *\n   * @property angle\n   * @type {Number}\n   */\n  get angle(){ return this._angle }\n  set angle(value){ this._angle = value}\n  \n  /**\n   * 边框样式\n   *\n   * @property borderStyle\n   * @type {LineStyle}\n   */\n  get borderStyle(){ return this._borderStyle }\n  set borderStyle(value){ this._borderStyle = value}\n  \n}\n\n/**\n * 圆形样式\n *\n * @static\n * @final\n * @property CIRCLE\n * @type {String}\n */\nPointStyle.CIRCLE = 'circle'\n\n/**\n * 方形样式\n *\n * @static\n * @final\n * @property SQUARE\n * @type {String}\n */\nPointStyle.SQUARE = 'square'\n\n/**\n * 十字样式\n *\n * @static\n * @final\n * @property CROSS\n * @type {string}\n */\nPointStyle.CROSS = 'cross'\n\n/**\n * X样式\n *\n * @static\n * @final\n * @property X\n * @type {string}\n */\nPointStyle.X = 'x'\n\n/**\n * 三角形样式\n *\n * @static\n * @final\n * @property TRIANGLE\n * @type {string}\n */\nPointStyle.TRIANGLE = 'triangle'\n\n\n\n// WEBPACK FOOTER //\n// ./src/style/pointstyle.js","import Obj from '../utils/obj'\r\n\r\n/**\r\n * 根据事件标识和监听对象获取该对象上的事件监听函数列表\r\n *\r\n * @method getListeners\r\n * @param target\r\n * @param type\r\n * @returns {Undefined}\r\n */\r\nexport function getListeners (target, type) {\r\n  const listenerMap = target.lm\r\n  return listenerMap ? listenerMap[type] : undefined\r\n}\r\n\r\n/**\r\n * 根据事件标示和事件对象，移除全部事件监听\r\n *\r\n * @param target\r\n * @param type\r\n */\r\nconst removeListeners = function (target, type) {\r\n  const listeners = getListeners(target, type)\r\n  if (listeners) {\r\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\r\n      target.removeEventListener(type, listeners[i].boundListener)\r\n      Obj.clear(listeners[i])\r\n    }\r\n    listeners.length = 0\r\n    let listenerMap = target.lm\r\n    if (listenerMap) {\r\n      Reflect.deleteProperty(listenerMap, type)\r\n      if (Object.keys(listenerMap).length === 0) {\r\n        // Reflect.deleteProperty(target, lm)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 移除该事件标识下全部事件监听\r\n *\r\n * @method unlistenByKey\r\n * @param key {String} 事件标示\r\n */\r\nexport function unlistenByKey (key) {\r\n  if (key && key.target) {\r\n    key.target.removeEventListener(key.type, key.boundListener)\r\n    const listeners = getListeners(key.target, key.type)\r\n    if (listeners) {\r\n      let i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key)\r\n      if (i !== -1) {\r\n        listeners.splice(i, 1)\r\n      }\r\n      if (listeners.length === 0) {\r\n        removeListeners(key.target, key.type)\r\n      }\r\n    }\r\n    \r\n    Obj.clear(key)\r\n  }\r\n}\r\n\r\n/**\r\n * @param listenerObj\r\n * @returns {boundListener}\r\n */\r\nconst bindListener = function (listenerObj) {\r\n  let boundListener = function (evt) {\r\n    const listener = listenerObj.listener\r\n    const bindTo = listenerObj.bindTo || listenerObj.target\r\n    if (listenerObj.callOnce) {\r\n      unlistenByKey(listenerObj)\r\n    }\r\n    return listener.call(bindTo, evt)\r\n  }\r\n\r\n  listenerObj.boundListener = boundListener\r\n  return boundListener\r\n}\r\n\r\n/**\r\n *\r\n * @param listeners\r\n * @param listener\r\n * @param optThis\r\n * @param optSetDeleteIndex\r\n * @returns {*}\r\n */\r\nconst findListener = function (listeners, listener, optThis, optSetDeleteIndex) {\r\n  let listenerObj\r\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\r\n    listenerObj = listeners[i]\r\n    if (listenerObj.listener === listener &&\r\n      listenerObj.bindTo === optThis) {\r\n      if (optSetDeleteIndex) {\r\n        listenerObj.deleteIndex = i\r\n      }\r\n      return listenerObj\r\n    }\r\n  }\r\n  return undefined\r\n}\r\n\r\n/**\r\n *\r\n * @param target\r\n * @returns {{}|*}\r\n */\r\nconst getListenerMap = function (target) {\r\n  let listenerMap = target.lm\r\n  if (!listenerMap) {\r\n    listenerMap = target.lm = {}\r\n  }\r\n  return listenerMap\r\n}\r\n\r\n/**\r\n * 监听事件\r\n *\r\n * @method listen\r\n * @param target {Object} 监听对象\r\n * @param type {String} 事件标识\r\n * @param listener {Array} 事件响应函数列表\r\n * @param optThis {This} 可选\r\n * @param optOnce\r\n * @returns {Array}\r\n */\r\nexport function listen (target, type, listener, optThis, optOnce) {\r\n  const listenerMap = getListenerMap(target)\r\n  let listeners = listenerMap[type]\r\n  if (!listeners) {\r\n    listeners = listenerMap[type] = []\r\n  }\r\n  \r\n  let listenerObj = findListener(listeners, listener, optThis, false)\r\n\r\n  if (listenerObj) {\r\n    if (!optOnce) {\r\n      listenerObj.callOnce = false // Turn one-off listener into a permanent one.\r\n    }\r\n  } else {\r\n    listenerObj = {\r\n      bindTo: optThis,\r\n      callOnce: !!optOnce,\r\n      listener,\r\n      target,\r\n      type\r\n    }\r\n    \r\n    target.addEventListener(type, bindListener(listenerObj))\r\n    listeners.push(listenerObj)\r\n  }\r\n\r\n  return listenerObj\r\n}\r\n\r\n/**\r\n * 对事件只是监听一次\r\n *\r\n * @method listenOnce\r\n * @param target\r\n * @param type\r\n * @param listener\r\n * @param opt_this\r\n * @returns {*}\r\n */\r\nexport function listenOnce (target, type, listener, opt_this) {\r\n  return listen(target, type, listener, opt_this, true)\r\n}\r\n\r\n\r\n/**\r\n * 定义关于事件的注册、注销、派发、监听的通用工具模块\r\n *\r\n * @module core\r\n * @class EventManager\r\n */\r\nexport default {\r\n  getListeners,\r\n  listen,\r\n  listenOnce,\r\n  unlistenByKey,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/eventmanager.js","import Geometry from './geometry'\nimport {ExtentUtil} from './support/extentutil'\n\n/**\n * 矩形类和数据结构\n *\n * @class Extent\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var rect = new mk.Extent(10, 10, 500, 500)\n */\nexport default class Extent extends Geometry {\n\n  /**\n   * 构造函数，构建一个extent对象\n   *\n   * @param xmin {Number}\n   * @param ymin {Number}\n   * @param xmax {Number}\n   * @param ymax {Number}\n   *\n   */\n  constructor (xmin = 0, ymin = 0, xmax = 0, ymax = 0) {\n    super()\n\n    this._xmin = xmin\n    this._ymin = ymin\n    this._xmax = xmax\n    this._ymax = ymax\n  \n    this._rings = []\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n\n    this.moveable = true\n  }\n\n  /**\n   * 获取Geometry的类型\n   *\n   * @property geometryType\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.EXTENT }\n\n  /**\n   * 计算x轴的中心坐标\n   *\n   * @property centerX\n   * @type {Number}\n   */\n  get centerX () { return (this.xmax + this.xmin) / 2 }\n\n  /**\n   * 计算Y轴的中心坐标\n   *\n   * @property centerY\n   * @type {Number}\n   */\n  get centerY () { return (this.ymax + this.ymin) / 2 }\n\n  /**\n   * 计算最小外接矩形的宽\n   *\n   * @property width\n   * @returns {Number}\n   */\n  get width () { return Math.abs(this.xmax - this.xmin) }\n\n  /**\n   * 计算最小外接矩形的高\n   *\n   * @property height\n   * @returns {Number}\n   */\n  get height () { return Math.abs(this.ymax - this.ymin) }\n\n  /**\n   * 获取最小外接矩形本对象\n   *\n   * @property extent\n   * @returns {Object} extent\n   */\n  get extent () { return this }\n  \n  /**\n   * X 轴最小值\n   *\n   * @property xmin\n   * @type {Number}\n   */\n  get xmin () { return this._xmin }\n  set xmin (value) {\n    this._xmin = value\n    this.changed()\n  }\n  \n  /**\n   * Y 轴最小值\n   *\n   * @property ymin\n   * @type {Number}\n   */\n  get ymin () { return this._ymin }\n  set ymin (value) {\n    this._ymin = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property xmax\n   * @type {Number}\n   */\n  get xmax () { return this._xmax }\n  set xmax (value) {\n    this._xmax = value\n    this.changed()\n  }\n  \n  /**\n   * X 轴最大值\n   *\n   * @property ymax\n   * @type {Number}\n   */\n  get ymax () { return this._ymax }\n  set ymax (value) {\n    this._ymax = value\n    this.changed()\n  }\n  \n  \n  /**\n   * 判断点是否在矩形内\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   */\n  containsXY (x, y) {\n    return ExtentUtil.containsPoint(this, [x, y])\n  }\n  \n  /**\n   * getFlatInteriorPoint\n   * @returns {[*,*]}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n      // this._flatInteriorPoint = [this.centerX, this.centerY]\n      this._flatInteriorPoint = [this.xmin, this.ymin]\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 移动矩形通过x，y值\n   *\n   * @method move\n   * @param x {Number}\n   * @param y {Number}\n   */\n  move (x = 0, y = 0, opts) {\n    let beyond\n    if (opts) {\n      if (opts.beyond) {\n        beyond = opts.beyond\n      }\n    }\n    \n    let minPoint = [this.xmin,this.ymin]\n    const width = this.width\n    const height = this.height\n\n    const newMinPoint = new Array(2)\n    \n    newMinPoint[0] = minPoint[0] + x\n    newMinPoint[1] = minPoint[1] + y\n    \n    if (beyond) {\n      if (minPoint[0] < beyond.xmin) {\n        minPoint[0] = beyond.xmin\n        newMinPoint[0] = minPoint[0]\n      }\n      \n      if (minPoint[0] + width + x >= beyond.xmax) {\n        newMinPoint[0] = minPoint[0]\n      }\n  \n      if (minPoint[1] < beyond.ymin) {\n        minPoint[1] = beyond.ymin\n        newMinPoint[1] = minPoint[1]\n      }\n  \n      if (minPoint[1] + height + y >= beyond.ymax) {\n        newMinPoint[1] = minPoint[1]\n      }\n    }\n  \n    const newCoordiante = [\n      newMinPoint,\n      [newMinPoint[0] + width, newMinPoint[1]],\n      [newMinPoint[0] + width, newMinPoint[1] + height],\n      [newMinPoint[0], newMinPoint[1] + height],\n      newMinPoint]\n    \n    this.setCoordinates(newCoordiante)\n  }\n  \n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @method rings\n   * @returns {Array}\n   */\n  get rings () {\n    if (this._rings.length === 0) {\n      if (this.xmin !== 0 && this.ymin !== 0 && this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(this.xmin, this.ymin, this.xmax, this.ymax)\n      }\n    }\n    \n    return this._rings\n  }\n\n  set rings (value) {\n    this._rings = value\n    let extentArr = ExtentUtil.boundingSimpleExtent(value)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  }\n  \n  /**\n   * 获取图形的坐标数据\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    if (this._rings.length === 0) {\n      // if (this.xmin !== 0 && this.ymin !== 0 && \n      //     this.xmax !== 0 && this.ymax !== 0) {\n        this._rings = ExtentUtil.minMaxToRing(\n          this.xmin, this.ymin, this.xmax, this.ymax)\n      // }\n    }\n  \n    return this._rings\n  }\n\n  /**\n   * 根据得到的坐标点，计算出表单显示的位置\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition1 (offsetX = 0, offsetY = 0) {\n    return [( this.xmin + this.xmax ) / 2 - offsetX, this.ymin - offsetY]\n  }\n\n  /**\n   * 根据得到的坐标点，计算出表单显示的位置\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition(offsetX = 0, offsetY = 0) {\n    return [this.xmin - offsetX, this.ymin - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.rings = coordinates\n  \n    let extentArr = ExtentUtil.boundingSimpleExtent(coordinates)\n    this.xmin = extentArr[0]\n    this.ymin = extentArr[1]\n    this.xmax = extentArr[2]\n    this.ymax = extentArr[3]\n  \n    this.changed()\n  }\n  \n  /**\n   * 获取点位于图形坐标点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord {Array}\n   * @returns {Number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆矩形框\n   *\n   * @method clone\n   * @returns {Extent}\n   */\n  clone () {\n    return new Extent(this.xmin, this.ymin, this.xmax, this.ymax)\n  }\n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/extent.js","import Geometry from './geometry'\nimport Extent from './extent'\nimport {ExtentUtil} from './support/extentutil'\nimport {squaredDistance} from './support/geometryutil'\n\n\n/**\n * 定义点类和数据结构\n *\n * @class Point\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *    var point = new mk.Point(100, 100)\n */\nexport default class Point extends Geometry {\n\n  /**\n   * 根据x和y构建一个点对象\n   * @param x 默认值为0\n   * @param y 默认值为0\n   * @constructor\n   */\n  constructor (xValue, yValue) {\n    super()\n\n    this.x = xValue\n    this.y = yValue\n\n    this.moveable = true\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @protected\n   */\n  get geometryType () { return Geometry.POINT }\n\n  /**\n   * 获取点的最小外接矩形\n   *\n   * @note 点是没有最小外接矩形\n   * @returns {null}\n   */\n  get extent () {\n    if (!this._extent) {\n      const extentObj = ExtentUtil.createScaleExtent(this, 8)\n      this._extent = new Extent(extentObj[0], extentObj[1], extentObj[2], extentObj[3])\n    }\n    \n    return this._extent\n  }\n\n  /**\n   * 获取 X 坐标值\n   *\n   * @property x\n   * @type x {number}\n   */\n  get x () { return this._x }\n  set x (value) { \n    this._x = value\n    this._extent = null\n  }\n  \n  /**\n   * 获取 Y 坐标值\n   *\n   * @property y\n   * @type {number}\n   */\n  get y () { return this._y }\n  set y (value) { \n    this._y = value\n    this._extent = null\n  }\n\n  /**\n   * 根据x,y的偏移量得到点\n   *\n   * @method offset\n   * @param nx x轴偏移量\n   * @param ny y轴偏移量\n   * @returns {mk.Point} 返回偏移以后的点对象\n   */\n  offset (nx, ny) {\n    return new Point(this.x + nx, this.y + ny)\n  }\n  \n  /**\n   * containsXY\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const pointA = this\n\n    const distance = squaredDistance(pointA.x, pointA.y, x, y)\n    if (Math.sqrt(distance / 2) <= tolerance) {\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * 更新x,y坐标值\n   *\n   * @method update\n   * @param nx x新值\n   * @param ny y新值\n   */\n  update (nx, ny) {\n    this.x = nx\n    this.y = ny\n    \n    this._extent = null\n  }\n  \n  /**\n   *\n   *\n   * getFlatInteriorPoint\n   * @returns {[]}\n   */\n  getFlatInteriorPoint () {\n    return this.getCoordinates()\n  }\n  \n  /**\n   * 获取点的坐标\n   *\n   * @method getCoordinates\n   * @returns {Array}\n   */\n  getCoordinates () {\n    return [this.x, this.y]\n  }\n\n  /**\n   * 点的位置就是坐标点的位置减去偏移量的位置\n   *\n   * @method getFormShowPosition\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @return {[]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 10) {\n    return [this.x - offsetX, this.y - offsetY]\n  }\n\n  /**\n   * 设置点的坐标\n   *\n   * @method setCoordinates\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this.update(coordinates[0], coordinates[1])\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @returns {number}\n   */\n  getCoordinateIndex () {\n    return 0\n  }\n  \n  /**\n   * 判断两个图形对象是否相等\n   *\n   * 判断标准：该图形的所有顶点值是否一致\n   *\n   * @method equal\n   * @param geometry\n   * @return {Boolean}\n   */\n  equal (geom) {\n    let equals = false\n    if (geom !== null) {\n      equals = ((this.x === geom.x && this.y === geom.x) ||\n      (Number.isNaN(this.x) && Number.isNaN(this.y) && \n       Number.isNaN(geom.x) && Number.isNaN(geom.y)))\n    }\n    return equals\n  }\n\n  /**\n  * 整体移动多边形，\n  */\n  move(dx = 0, dy = 0, opts = {}) {\n    if (dx == 0 && dy == 0) {\n      return\n    }\n\n    const beyond = opts.beyond || null\n    const coordinates = this.getCoordinates()\n\n    // 越界检查\n    const isBeyond = (point) => {\n      if (beyond == null) {\n        return false\n      }\n\n      let x = point[0] + dx\n      let y = point[1] + dy\n\n      if (beyond.xmin <= x && beyond.xmax >= x &&\n        beyond.ymin <= y && beyond.ymax >= y) {\n        return false\n      }\n\n      return true\n    }\n\n    // 检查是否有一个点超出了边界，如果有，则停止move\n    const existBeyondPoint = isBeyond(coordinates)\n    if (existBeyondPoint) {\n      return\n    }\n\n    const newCoord = new Array(2)\n    newCoord[0] = coordinates[0] + dx\n    newCoord[1] = coordinates[1] + dy\n\n    this.setCoordinates(newCoord)\n  }\n  \n  /**\n   * 克隆点\n   *\n   * @method clone\n   * @returns {Point}\n   */\n  clone () {\n    return new Point(this.x, this.y)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/point.js","import Geometry from './geometry'\nimport Extent from './extent'\n\nimport {squaredSegmentDistance, distance} from './support/geometryutil'\nimport {lineString} from './support/interpolate'\n\n/**\n * 定义线类和数据结构\n *\n * @class Line\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var line = new mk.Line()\n *\n *  line.setCoordinates([100, 100], [200, 200], [400, 500])\n */\nexport default class Line extends Geometry {\n  \n  /**\n   * Create a line geometry\n   * @constructor\n   * @param path\n   */\n  constructor (path) {\n    super()\n  \n    /**\n     * 记录内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._path = []\n    \n    this.addPath(path)\n  }\n\n  get geometryType () { return Geometry.LINE }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   *\n   * @returns {Object} 返回对象的最小外接矩形\n   *\n   */\n  get extent () {\n    const me = this\n    if (me._extent === null) {\n      let xmin = Number.POSITIVE_INFINITY\n      let ymin = Number.POSITIVE_INFINITY\n      let xmax = Number.NEGATIVE_INFINITY\n      let ymax = Number.NEGATIVE_INFINITY\n\n      const coors = me.getCoordinates()\n      for (let p of coors) {\n        xmin = Math.min(xmin, p[0])\n        ymin = Math.min(ymin, p[1])\n        xmax = Math.max(xmax, p[0])\n        ymax = Math.max(ymax, p[1])\n      }\n\n      me._extent = new Extent(xmin, ymin, xmax, ymax)\n    }\n\n    return me._extent\n  }\n  \n  /**\n   * 线段读写器\n   *\n   * @property path\n   * @returns\n   */\n  get path () { return this._path }\n  set path (value) {\n    this._path = value\n    this._extent = null\n  }\n  \n  /**\n   * 添加线段\n   *\n   * @method addPath\n   * @deprecated\n   * @param coordinates {Array}\n   */\n  addPath (coordinates) {\n    this.path.push(coordinates)\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 多段线的长度\n   *\n   * @property length\n   * @type {Number}\n   */\n  get length () {\n    const coordinates = this.getCoordinates()\n    let len = 0\n    for (let i = 0, ii = coordinates.length; i < ii - 1 ; i++) {\n      const fp = coordinates[i]\n      const np = coordinates[i + 1]\n      len += distance(fp, np)\n    }\n    \n    return len\n  }\n  \n  /**\n   * 遍历每一条边\n   *\n   * @method forEachSegment\n   * @param callback {callback}\n   * @param opt\n   */\n  forEachSegment (callback, opt) {\n    this.path.forEach(callback, opt)\n  }\n  \n  /**\n   * @param x\n   * @param y\n   * @param opt\n   * @returns {boolean}\n   */\n  containsXY (x, y, opt = {}) {\n    const tolerance = opt.tolerance ? opt.tolerance : 2\n    const path = this.path\n    const squaredSegmentDistanceFn = squaredSegmentDistance\n  \n    let find = false\n    for (let i = 0, ii = path.length - 1; i < ii; i++) {\n      let nowP = path[i]\n      let nextP = path[i + 1]\n      let distance = squaredSegmentDistanceFn(x, y, nowP[0], nowP[1], nextP[0], nextP[1])\n      distance = Math.sqrt(distance)\n      if (distance <= tolerance) {\n        find = true\n        break\n      }\n    }\n  \n    return find\n  }\n  \n  /**\n   * 计算线的平面内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      const interiorPoint = null\n      const fraction = 0.5\n      const flatCoordinates = []\n      const coordinates = this.getCoordinates()\n  \n      coordinates.forEach( point => {\n        flatCoordinates.push(point[0], point[1])\n      })\n  \n      this._flatInteriorPoint = lineString( flatCoordinates, 0, flatCoordinates.length, this.stride,\n        fraction, interiorPoint)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return this._flatInteriorPoint\n  }\n  \n  getCoordinates () { return this.path }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()\n    if (coordinates.length === 0) {\n      return null\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 1]\n    \n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置坐标数据\n   *\n   * @method setCoordinates\n   * @param coords {Array}\n   */\n  setCoordinates (coords) {\n    this.path = coords\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 根据坐标点，计算改点的下标\n   *\n   * @method getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    return this.getCoordinates().findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  /**\n   * 克隆线段\n   *\n   * @method clone\n   * @returns {Line} new line\n   */\n  clone () {\n    const newCoordinates = []\n    this.getCoordinates().forEach( coords => {\n      newCoordinates.push([coords[0], coords[1]])\n    })\n  \n    const newLine = new Line()\n    newLine.setCoordinates(newCoordinates)\n    \n    return newLine\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/line.js","import {binarySearch, numberSafeCompareFunction} from '../../utils/array'\nimport {linearRingsContainsXY} from '../support/geometryutil'\nimport {lerp} from '../../utils/math'\nimport {ExtentUtil} from './extentutil'\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @param fraction\n * @param opt_dest\n * @returns {*}\n */\nexport function lineString (flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN\n  let pointY = NaN\n  const n = (end - offset) / stride\n  \n  if (n === 1) {\n    pointX = flatCoordinates[offset]\n    pointY = flatCoordinates[offset + 1]\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n      fraction * flatCoordinates[offset + stride]\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n      fraction * flatCoordinates[offset + stride + 1]\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset]\n    let y1 = flatCoordinates[offset + 1]\n    let length = 0\n    const cumulativeLengths = [0]\n    let i\n    for (i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i]\n      const y2 = flatCoordinates[i + 1]\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n      cumulativeLengths.push(length)\n      x1 = x2\n      y1 = y2\n    }\n    \n    const target = fraction * length\n    const index = binarySearch(cumulativeLengths, target)\n    \n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n        (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2])\n      const o = offset + (-index - 2) * stride\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t)\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t)\n    } else {\n      pointX = flatCoordinates[offset + index * stride]\n      pointY = flatCoordinates[offset + index * stride + 1]\n    }\n  }\n  \n  if (opt_dest) {\n    opt_dest[0] = pointX\n    opt_dest[1] = pointY\n    return opt_dest\n  } else {\n    return [pointX, pointY]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param flatCenters\n * @param flatCentersOffset\n * @param opt_dest\n * @returns {*}\n */\nexport function linearRings(flatCoordinates, offset,\n       ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2\n  const y = flatCenters[flatCentersOffset + 1]\n  const intersections = []\n  // Calculate intersections with the horizontal line\n  const end = ends[0]\n  x1 = flatCoordinates[end - stride]\n  y1 = flatCoordinates[end - stride + 1]\n  \n  for (i = offset; i < end; i += stride) {\n    x2 = flatCoordinates[i]\n    y2 = flatCoordinates[i + 1]\n    if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n      x = (y - y1) / (y2 - y1) * (x2 - x1) + x1\n      intersections.push(x)\n    }\n    x1 = x2\n    y1 = y2\n  }\n  \n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN\n  let maxSegmentLength = -Infinity\n  intersections.sort(numberSafeCompareFunction)\n  x1 = intersections[0]\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i]\n    const segmentLength = Math.abs(x2 - x1)\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2\n      if (linearRingsContainsXY(\n          flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x\n        maxSegmentLength = segmentLength\n      }\n    }\n    x1 = x2\n  }\n  \n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset]\n  }\n  \n  if (opt_dest) {\n    opt_dest.push(pointX, y)\n    return opt_dest\n  } else {\n    return [pointX, y]\n  }\n}\n\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param flatCenters\n * @returns {Array}\n */\nexport function linearRingss (flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = []\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    interiorPoints = linearRings(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints)\n    offset = ends[ends.length - 1]\n  }\n  \n  return interiorPoints\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @returns {Array}\n */\nexport function centerLinearRingss (flatCoordinates, offset, endss, stride) {\n  const flatCenters = []\n  let i, ii\n  let extent = ExtentUtil.createEmpty()\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i]\n    extent = ExtentUtil.createOrUpdateFromFlatCoordinates(\n      flatCoordinates, offset, ends[0], stride)\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2)\n    offset = ends[ends.length - 1]\n  }\n  return flatCenters\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/interpolate.js","/**\n *\n * @param arr\n * @param target\n * @param direction\n * @returns {number}\n */\nexport function linearFindNearest (arr, target, direction) {\n  const n = arr.length\n  if (arr[0] <= target) {\n    return 0\n  } else if (target <= arr[n - 1]) {\n    return n - 1\n  } else {\n    let i\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1\n          } else {\n            return i\n          }\n        }\n      }\n    }\n    return n - 1\n  }\n}\n\n/**\n *\n * @param arr\n * @param compareFnc\n */\nexport function stableSort (arr, compareFnc) {\n  const length = arr.length\n  let tmp = Array(arr.length)\n  let i\n  \n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]}\n  }\n  \n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index\n  })\n  \n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value\n  }\n}\n\n/**\n *\n * @param haystack\n * @param needle\n * @param opt_comparator\n * @returns {number}\n */\nexport function binarySearch (haystack, needle, opt_comparator) {\n  let mid, cmp\n  const comparator = opt_comparator || numberSafeCompareFunction\n  let low = 0\n  let high = haystack.length\n  let found = false\n  \n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1)\n    cmp = +comparator(haystack[mid], needle)\n    \n    if (cmp < 0.0) { /* Too low. */\n      low  = mid + 1\n      \n    } else { /* Key found or too high */\n      high = mid\n      found = !cmp\n    }\n  }\n  \n  /* Key not found. */\n  return found ? low : ~low\n}\n\n/**\n * Determine if two arrays get equal to each other\n * @param arr1\n * @param arr2\n * @returns {boolean}\n */\nexport function equals (arr1, arr2) {\n  const len1 = arr1.length\n  if (len1 !== arr2.length) {\n    return false\n  }\n  \n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false\n    }\n  }\n  \n  return true\n}\n\n/**\n *\n * @param a\n * @param b\n * @returns {number}\n */\nexport function numberSafeCompareFunction (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/array.js","import Geometry from './geometry'\nimport Extent from './extent'\n\nimport {linearRings} from './support/interpolate'\nimport {linearRingsAreOriented,orientLinearRings} from './support/orient'\n\n/**\n * 面类和数据结构\n *\n * 多边形是<b>闭合数据结构</b>，所有首尾点必须相同。\n *\n * 多边形顶点存储是一个二维数组，数组中第一条闭合点串表示多边形\n * 的最外层，第二条及其以后表示多边形的内部洞环。\n *\n * @class Polygon\n * @extends Geometry\n * @module geometry\n * @constructor\n * @example\n *\n *  var polygon = new mk.Polygon([[100, 100], [120, 130],[50, 50],[100, 100]])\n *\n */\nexport default class Polygon extends Geometry {\n  \n  /**\n   * 创建一个Polygon实例\n   * @constructor\n   * @param rings\n   */\n  constructor (rings = []) {\n    super()\n\n    this._rings = []\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    /**\n     * 更新多边形的坐标\n     */\n    this.setCoordinates(rings)\n  }\n\n  /**\n   * 获取图形的最小外接矩形(MBR-Minimum Bounding Rectangle)\n   * 可用来对图形进行拖动、旋转、缩放\n   *\n   * @method extent\n   * @abstrct function\n   * @returns {Extent}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const coords = this.getCoordinates()\n      \n      // 计算最小外界矩形，只考虑外围环\n      if (coords.length > 0) {\n        let rings = coords[0]\n  \n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n  \n        for (let ring of rings) {\n          xmin = Math.min(xmin, ring[0])\n          ymin = Math.min(ymin, ring[1])\n          xmax = Math.max(xmax, ring[0])\n          ymax = Math.max(ymax, ring[1])\n        }\n  \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n\n    return this._extent\n  }\n\n  /**\n   * 获取对象的几何类型\n   *\n   * @method geometryType\n   * @abstrct function\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.POLYGON }\n\n  /**\n   * 设置多边形的边，如果设置了边，则需要重新计算\n   * 外接矩形\n   *\n   * @property rings\n   */\n  get rings () { return this._rings }\n  set rings (value) {\n    this._rings = value\n    this._extent = null\n  }\n  \n  /**\n   * 多边形添加线段\n   *\n   * @method addRing\n   * @param ring {Array}\n   *\n   */\n  addRing (ring) {\n    this.rings.push(ring)\n    this._extent = null\n  }\n  \n  /**\n   * 判断点是否在多边形上\n   *\n   * @method containsXY\n   * @param x {Number}\n   * @param y {Number}\n   * @returns {Boolean}\n   */\n  containsXY (x, y) {\n    const coords = this.getCoordinates()\n    const outRing = coords[0]\n    \n    let contains = false\n    if (this._inOneRing(x, y, outRing)) {\n      contains = true\n    }\n    \n    if (coords.length > 1 && contains) {\n      const coordsTemp = coords.slice(1)\n      \n      const inHole = coordsTemp.some( ring =>\n        this._inOneRing(x, y, ring)\n      )\n      \n      if (inHole) {\n        contains = false\n      }\n    }\n    \n    return contains\n  }\n  \n  /**\n   * 判断 x 和 y 的值是否在环内\n   *\n   * @param x {Number}\n   * @param y {Number}\n   * @param ring {Array}\n   * @returns {Boolean}\n   * @private\n   */\n  _inOneRing (x, y, ring) {\n    const px = x\n    const py = y\n    let flag = false\n  \n    for (let i = 0, l = ring.length, j = l - 1; i < l; j = i, i++) {\n      const sx = ring[i][0]\n      const sy = ring[i][1]\n      const tx = ring[j][0]\n      const ty = ring[j][1]\n    \n      // 点与多边形顶点重合\n      if ((sx === px && sy === py) || (tx === px && ty === py)) {\n        return true\n      }\n    \n      // 判断线段两端点是否在射线两侧\n      if ((sy < py && ty >= py) || (sy >= py && ty < py)) {\n        // 线段上与射线 Y 坐标相同的点的 X 坐标\n        let x = sx + (py - sy) * (tx - sx) / (ty - sy)\n      \n        // 点在多边形的边上\n        if (x === px) {\n          return true\n        }\n      \n        // 射线穿过多边形的边界\n        if (x > px) {\n          flag = !flag\n        }\n      }\n    }\n  \n    // 射线穿过多边形边界的次数为奇数时点在多边形内\n    return flag\n  }\n  \n  /**\n   * 计算多边形的内点\n   *\n   * @method getFlatInteriorPoint\n   * @returns {Array} 返回内点，格式 [x, y]\n   */\n  getFlatInteriorPoint () {\n    // 缓存限制\n    if (this._flatInteriorPointRevision !== this.revision ) {\n      const flatCenter = [this.extent.centerX, this.extent.centerY]\n      const coorLen = this.getCoordinates()[0].length\n      const ends = [coorLen * 2]\n\n      const orientedFlatCoordinates = this.getOrientedFlatCoordinates()\n      this._flatInteriorPoint = linearRings(\n        orientedFlatCoordinates, 0, ends, this.stride, flatCenter, 0)\n      \n      this._flatInteriorPointRevision = this.revision\n    }\n    \n    return  this._flatInteriorPoint\n  }\n  \n  /**\n   * 对多边形的边进行顺序化\n   * getOrientedFlatCoordinates\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates () {\n    let orientedFlatCoordinates\n    \n    const flatCoordinates = []\n    const coordinates = this.getCoordinates()[0]\n  \n    coordinates.forEach( point => {\n      flatCoordinates.push(point[0], point[1])\n    })\n  \n    const ends = [flatCoordinates.length]\n    \n    if (linearRingsAreOriented(flatCoordinates, 0, ends, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = flatCoordinates.slice()\n      orientedFlatCoordinates.length = orientLinearRings(orientedFlatCoordinates,\n        0, ends, this.stride)\n    }\n    \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 判断当前多边形是否有洞\n   *\n   * @method hasHoles\n   * @returns {boolean}\n   */\n  hasHoles () {\n    return this.getCoordinates().length > 1\n  }\n  \n  /**\n   * 获取多边形坐标\n   *\n   * @method getCoordinates\n   * @returns {[*,*]}\n   */\n  getCoordinates () {\n    return this.rings\n  }\n\n  /**\n   * 得到最后一个点的坐标，显示表单\n   *\n   * @param {Number} offsetX x的偏移量\n   * @param {Number} offsetY y的偏移量\n   * @returns {[*,*]}\n   */\n  getFormShowPosition (offsetX = 0, offsetY = 0) {\n    const coordinates = this.getCoordinates()[0]\n    if (coordinates.length === 0) {\n      return\n    }\n    \n    const lastPoint = coordinates[coordinates.length - 2]\n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 设置多边形的坐标\n   *\n   * @method setCoordinates\n   * @param coords\n   */\n  setCoordinates (coords) {\n    this.rings = coords\n    this._extent = null\n    this.stride = 2\n    this.changed()\n  }\n  \n  /**\n   * getCoordinateIndex\n   * @param coord\n   * @returns {*|number}\n   */\n  getCoordinateIndex (coord) {\n    const coords = this.getCoordinates()\n    for (let i = 0, len = coords.length; i < len; i++) {\n      const rings = coords[i]\n      for (let j = 0,jLen = rings.length; j < jLen; j++) {\n        const point = rings[j]\n        if (point[0] === coord[0] && point[1] === coord[1]) {\n          return {\n            ringIndex: i,\n            index: j\n          }\n        }\n      }\n    }\n    \n    return {\n      ringIndex: -1,\n      index: -1\n    }\n  }\n\n  /**\n   * 整体移动多边形，\n   */\n  move(dx = 0, dy = 0, opts = {}) {\n    if (dx == 0 && dy == 0) {\n      return\n    }\n\n    const beyond = opts.beyond || null\n    const coordinates = this.getCoordinates()\n\n    // @TODO 需要增加对内环的处理\n    let outRings = coordinates[0]\n    outRings = [...outRings]\n\n    // 越界检查\n    const idBeyond = (point) => {\n      if (beyond == null) {\n        return false\n      }\n\n      let x = point[0] + dx\n      let y = point[1] + dy\n\n      if (beyond.xmin <= x && beyond.xmax >= x &&\n          beyond.ymin <= y && beyond.ymax >= y) {\n        return false\n      }\n\n      return true\n    }\n\n    // 检查是否有一个点超出了边界，如果有，则停止move\n    const existBeyondPoint = outRings.find(coor => idBeyond(coor))\n    if (existBeyondPoint) {\n      return\n    }\n\n    for (let i = 0, len = outRings.length; i < len; i++) {\n      let coor = outRings[i]\n      coor[0] = coor[0] + dx\n      coor[1] = coor[1] + dy\n    }\n\n    this.setCoordinates([outRings])\n  }\n  \n  /**\n   * 克隆多边形\n   *\n   * @method clone\n   * @returns {Polygon}\n   */\n  clone () {\n    const coords = this.getCoordinates()\n    \n    const newCoordinates = []\n    let outRings = []\n    coords.forEach( ring => {\n      ring.forEach(points => {\n        outRings.push([points[0], points[1]])\n      })\n  \n      newCoordinates.push(outRings)\n      outRings = []\n    })\n    \n    const newPolygon = new Polygon()\n    newPolygon.setCoordinates(newCoordinates)\n    \n    return newPolygon\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/polygon.js","/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRingss (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right)\n  }\n  \n  return offset\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {*}\n */\nexport function orientLinearRings (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i]\n    const isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    const reverse = i === 0 ?\n    (right && isClockwise) || (!right && !isClockwise) :\n    (right && !isClockwise) || (!right && isClockwise)\n    \n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride)\n      // 反转\n      // flatCoordinates = flatCoordinates.reverse()\n    }\n    offset = end\n  }\n  \n  return offset\n}\n\nfunction reverseCoordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n\n/**\n *\n * @param flatCoordinates\n * @param offset\n * @param endss\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingssAreOriented (flatCoordinates, offset, endss, stride, opt_right) {\n  let i, ii\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingsAreOriented(\n        flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * 判断线串的方向\n * @param flatCoordinates\n * @param offset\n * @param ends\n * @param stride\n * @param opt_right\n * @returns {boolean}\n */\nexport function linearRingsAreOriented (flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false\n  let i, ii\n  \n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    let end = ends[i]\n    // 判断坐标串是否是顺时针\n    let isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride)\n    \n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false\n      }\n    }\n    \n    offset = end\n  }\n  \n  return true\n}\n\n/**\n * 判断坐标串是否是顺时针方向\n * @param flatCoordinates\n * @param offset\n * @param end\n * @param stride\n * @returns {boolean}\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0\n  let x1 = flatCoordinates[end - stride]\n  let y1 = flatCoordinates[end - stride + 1]\n  \n  for (; offset < end; offset += stride) {\n    let x2 = flatCoordinates[offset]\n    let y2 = flatCoordinates[offset + 1]\n    edge += (x2 - x1) * (y2 + y1)\n    x1 = x2\n    y1 = y2\n  }\n  \n  return edge > 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/support/orient.js","import Geometry from './geometry'\nimport Polygon from './polygon'\nimport Extent from './extent'\n\nimport {centerLinearRingss, linearRingss} from './support/interpolate'\nimport {linearRingssAreOriented,orientLinearRingss} from './support/orient'\n\n\n/**\n * 定义复合多边形对象和数据结构\n *\n *\n * @class MutilPolygon\n * @module geometry\n * @constructor\n *\n */\nexport default class MutilPolygon extends Geometry {\n  \n  constructor (coordinates) {\n    super()\n    \n    this._polygons = []\n  \n    this.stride = 2\n  \n    /**\n     * 记录当前多边形内点更新的次数\n     * @type {number}\n     * @private\n     */\n    this._flatInteriorPointRevision = -1\n  \n    /**\n     * 缓存当前多边形内点\n     * @type {null}\n     * @private\n     */\n    this._flatInteriorPoint = null\n  \n    this.setCoordinates(coordinates)\n  }\n  \n  /**\n   *\n   * @returns {String}\n   */\n  get geometryType () { return Geometry.MULTI_POLYGON }\n  \n  /**\n   * 计算复合多边形的最小外界矩形\n   * 注意：这里所求出来的是多个多边形的最小外界矩形，既一个能包裹所有\n   * 多边形的矩形\n   *\n   * @returns {Extent|null}\n   */\n  get extent () {\n    if (this._extent === null) {\n      const allPolygonCoords = this.getCoordinates()\n    \n      // 计算最小外界矩形，只考虑外围环\n      if (allPolygonCoords.length > 0) {\n        let xmin = Number.POSITIVE_INFINITY\n        let ymin = Number.POSITIVE_INFINITY\n        let xmax = Number.NEGATIVE_INFINITY\n        let ymax = Number.NEGATIVE_INFINITY\n        \n        allPolygonCoords.forEach( polyCoods => {\n          let rings = polyCoods[0]\n          for (let ring of rings) {\n            xmin = Math.min(xmin, ring[0])\n            ymin = Math.min(ymin, ring[1])\n            xmax = Math.max(xmax, ring[0])\n            ymax = Math.max(ymax, ring[1])\n          }\n        })\n      \n        this._extent = new Extent(xmin, ymin, xmax, ymax)\n      }\n    }\n  \n    return this._extent\n  }\n  \n  /**\n   * 获得复合多边形的坐标\n   * @returns {Array|*}\n   */\n  getCoordinates () {\n    return this._polygons\n  }\n  \n  /**\n   * 设置复合多边形的坐标\n   * @param coordinates\n   */\n  setCoordinates (coordinates) {\n    this._polygons = coordinates\n    this._extent = null\n    this.changed()\n  }\n  \n  /**\n   * 获得一个多边形对象\n   * @method getPolygon\n   * @param index 多边形的下标\n   * @returns {mk.Polygon} 返回一个新的多边形对象\n   */\n  getPolygon (index) {\n    if (index < 0 && this._polygons.length < index ) {\n      return null\n    }\n    \n    const coords = this._polygons[index]\n    let outRing = []\n    let innerRing = []\n    coords.forEach( rings => {\n      rings.forEach( points => {\n        innerRing.push([points[0], points[1]])\n      })\n      \n      outRing.push(innerRing)\n      innerRing = []\n    })\n    \n    const polygon = new Polygon(outRing)\n    return polygon\n  }\n\n  getFormShowPosition(offsetX = 0, offsetY = 0) {\n    const polygon = this.getPolygon(0)\n    const coordinates = polygon.getCoordinates()[0]\n    if (coordinates.length === 0) {\n      return\n    }\n\n    const lastPoint = coordinates[coordinates.length - 2]\n    return [lastPoint[0] - offsetX, lastPoint[1] - offsetY]\n  }\n  \n  /**\n   * 判断集合多边形是否包括指定 x 和 y\n   * @param x\n   * @param y\n   * @returns {boolean}\n   */\n  containsXY (x, y) {\n    const polygons = this._polygons\n    for (let i = 0, len = polygons.length; i < len; i ++ ) {\n      const onePolygon = this.getPolygon(i)\n      if (onePolygon.containsXY(x, y)) {\n        return true\n      }\n    }\n    \n    return false\n  }\n  \n  /**\n   * 获取标签显示的内点\n   * 注意：复合多边形，标签显示的位置，只显示在第一个图形上\n   * @returns {*}\n   */\n  getFlatInteriorPoint () {\n    if (this._flatInteriorPointRevision !== this.revision) {\n      this._flatInteriorPointRevision = this.revision\n  \n      const polygons = this._polygons\n      let flatCoordinates = []\n      let endss = []\n  \n      const orderArray = []\n  \n      polygons.forEach( polygon => {\n        const outRings = polygon[0]\n        orderArray.push(outRings)\n      })\n  \n      orderArray.sort( (arr1, arr2) => arr1.length - arr2.length )\n  \n      let lastLen = 0\n      orderArray.forEach( arr => {\n        const currLen = arr.length * 2 + lastLen\n        endss.push([currLen])\n        lastLen = currLen\n    \n        arr.forEach( points => {\n          flatCoordinates.push(points[0], points[1])\n        })\n      })\n  \n      const flatCenters = centerLinearRingss(flatCoordinates, 0, endss, this.stride)\n      this._flatInteriorPoint = linearRingss(\n        this.getOrientedFlatCoordinates(flatCoordinates, endss), 0, endss, this.stride,\n        flatCenters)\n    }\n    \n  \n    return this._flatInteriorPoint\n  }\n  \n  /**\n   * 计算复合多边形顺时针坐标\n   * @param flatCoordinates\n   * @param endss\n   * @returns {*}\n   */\n  getOrientedFlatCoordinates (flatCoordinates, endss) {\n    let orientedFlatCoordinates\n    \n    if (linearRingssAreOriented(flatCoordinates, 0, endss, this.stride)) {\n      orientedFlatCoordinates = flatCoordinates\n    } else {\n      orientedFlatCoordinates = [...flatCoordinates]\n      orientedFlatCoordinates.length = orientLinearRingss(orientedFlatCoordinates,\n        0, endss, this.stride)\n    }\n    \n    return orientedFlatCoordinates\n  }\n  \n  /**\n   * 根据坐标值计算复合多边形的点下标\n   *\n   * @method getCoordinateIndex\n   * @param coord 坐标值，[x, y]结构\n   * @returns {\n   *    {\n   *      polygonIndex: number 位于第几个多边形上 ,\n   *      ringIndex: number 位于多边形第几个环上,\n   *      index: number 位于环上第几个顶点上\n   *     }\n   *   }\n   */\n  getCoordinateIndex (coord) {\n    const polygonCoods = this.getCoordinates()\n    \n    for ( let ii = 0, iiLen = polygonCoods.length ; ii < iiLen; ii ++) {\n      const coords = polygonCoods[ii]\n  \n      for (let i = 0, len = coords.length; i < len; i++) {\n        const rings = coords[i]\n        for (let j = 0,jLen = rings.length; j < jLen; j++) {\n          const point = rings[j]\n          if (point[0] === coord[0] && point[1] === coord[1]) {\n            return {\n              polygonIndex : ii,\n              ringIndex: i,\n              index: j\n            }\n          }\n        }\n      }\n    }\n  \n    return {\n      polygonIndex : -1,\n      ringIndex: -1,\n      index: -1\n    }\n  }\n  \n  /**\n   * 克隆一个 Mutilpolygon\n   * @returns {MutilPolygon}\n   */\n  clone () {\n    const allCoords = []\n    \n    this._polygons.forEach( coords => {\n      let outRing = []\n      let innerRing = []\n      coords.forEach( rings => {\n        rings.forEach( points => {\n          innerRing.push([points[0], points[1]])\n        })\n    \n        outRing.push(innerRing)\n      })\n  \n      allCoords.push(outRing)\n      outRing = []\n    })\n    \n    const newMutilPolygon = new MutilPolygon(allCoords)\n    return newMutilPolygon\n  }\n\n  /**\n   * 将一个复合多边形，转换成多边形集合\n   */\n  convertToPolygons() {\n    const polygons = []\n    this._polygons.forEach((p, index) => {\n      polygons.push(this.getPolygon(index))\n    })\n\n    return polygons\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/mutilpolygon.js","import Geometry from './geometry'\nimport Polygon from './polygon'\nimport {distance} from '../geometry/support/geometryutil'\n\nimport {getPointInExtendedLineByDistanceFromAB} from '../geometry/support/geometryutil'\n\nexport default class Parallelogram extends Polygon {\n  \n  constructor (coordinates) {\n    super(coordinates)\n  }\n  \n  get geometryType () {\n    return Geometry.PARALLELOGRAM\n  }\n  \n  getCoordinateIndex (coord) {\n    return this.getCoordinates()[0].findIndex( points =>\n      points[0] === coord[0] && points[1] === coord[1]\n    )\n  }\n  \n  clone () {\n    return new Parallelogram(this.getCoordinates())\n  }\n  \n  /**\n   *\n   * @param coordinates\n   * @returns {Array}\n   */\n  static getTheLastPoint (coordinates) {\n    const firstPoint = coordinates[0]\n    const secondPoint = coordinates[1]\n    const thirdPoint = coordinates[2]\n    \n    const dx = thirdPoint[0] - secondPoint[0]\n    const dy = thirdPoint[1] - secondPoint[1]\n    \n    return [firstPoint[0] + dx, firstPoint[1] + dy]\n  }\n  \n  \n  /**\n   * 用于计算和更新平行四边形的顶点\n   *\n   * @param p 平行四边形对象\n   * @param vertex 新移动的点\n   * @param oldVertex 上次移动的点\n   * @param dragSegment 数据对象\n   * @returns {*} 返回新的点集合（3维数组）\n   */\n  static updateCoordinatesForModification(p, vertex, oldVertex, dragSegment) {\n    let dis = 0\n    if (oldVertex) {\n      dis = distance (oldVertex, vertex)\n    }\n    \n    const oldRingsCoordinates = p.getCoordinates()\n    if (dis === 0) {\n      return oldRingsCoordinates\n    }\n    \n    const oldCoordinates = oldRingsCoordinates[0]\n    const segement = dragSegment[0]\n    const edgeIndex = segement.index\n  \n    let firstCoord\n    let nowCood\n    let otherCood\n    \n    if (edgeIndex === 0 || edgeIndex === 4) {\n      firstCoord = oldCoordinates[3]\n      nowCood = oldCoordinates[0]\n      otherCood = oldCoordinates[1]\n    } else {\n      firstCoord = oldCoordinates[edgeIndex - 1]\n      nowCood = oldCoordinates[edgeIndex]\n      otherCood = oldCoordinates[edgeIndex + 1]\n    }\n    \n    // 计算延长线上的一点\n    const newCood1 = getPointInExtendedLineByDistanceFromAB(firstCoord[0],\n      firstCoord[1], nowCood[0], nowCood[1], dis)\n    \n    // 计算向量\n    const tempXX = nowCood[0] - firstCoord[0]\n    const tempYY = nowCood[1] - firstCoord[1]\n    const tempX2 = vertex[0] - oldVertex[0]\n    const tempY2 = vertex[1] - oldVertex[1]\n    \n    // 使用向量的点积，来计算两个向量的方向是否一致\n    // 如果 <0 则表示异向\n    const direction = ( tempX2 * tempXX ) + (tempY2 * tempYY)\n    \n    const dx = newCood1[0] - nowCood[0]\n    const dy = newCood1[1] - nowCood[1]\n    let newCood2\n    \n    // 不同方向\n    if (direction < 0) {\n      newCood1[0] = nowCood[0] - dx\n      newCood1[1] = nowCood[1] - dy\n  \n      newCood2 = [otherCood[0] - dx, otherCood[1] - dy]\n    } else {\n      newCood2 = [otherCood[0] + dx, otherCood[1] + dy]\n    }\n    \n    \n    oldCoordinates[edgeIndex] = newCood1\n    oldCoordinates[edgeIndex + 1] = newCood2\n    \n    if (edgeIndex === 0) {\n      oldCoordinates[4] = oldCoordinates[0]\n    } else if (edgeIndex === 4 || edgeIndex === 3) {\n      oldCoordinates[0] = oldCoordinates[4]\n    }\n    \n    return [oldCoordinates]\n  }\n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/parallelogram.js","import Geometry from './geometry'\nimport Polygon from './polygon'\nimport { \n  getProjectivePoint,\n  getPointInExtendedLineByDistanceFromAB,\n  distance\n} from '../geometry/support/geometryutil'\nimport {ExtentUtil} from './support/extentutil'\nimport Extent from './extent';\nimport Log from '../utils/log';\n\nexport default class RotatableExtent extends Polygon {\n\n  constructor(coordinates) {\n    super(coordinates)\n\n    this.rotable = true\n    this._anchorSide = null\n    this._width = 0\n    this._height = 0\n  }\n\n  get geometryType() { return Geometry.ROTATABLE_EXTENT }\n\n  get width() { return this._width }\n\n  get height() { return this._height }\n\n  setCoordinates(coords) {\n    super.setCoordinates(coords)\n\n    if(coords.length === 0) {\n      return\n    }\n    \n    const coordinates = coords[0]\n\n    if (coordinates.length < 3) {\n      return\n    }\n\n    const [p1, p2, p3] = coordinates\n    const d1 = distance(p1, p2)\n    const d2 = distance(p2, p3)\n\n    if (Number.isNaN(d1) || Number.isNaN(d2)) {\n      return\n    }\n\n    if (d1 > d2) {\n      this._height = d2\n      this._width = d1\n    } else {\n      this._height = d1\n      this._width = d2\n    }\n  }\n\n  /**\n   * 旋转计算\n   * @param {Number} angle \n   * @param {Array} anchor \n   */\n  rotate(angle, anchor) {\n    // 旋转锚点\n    if (this._anchor) {\n      const [x, y] = this._anchor\n      this._anchor = super.rotateXY(x, y, anchor, angle)\n    }\n\n    // 坐标旋转\n    super.rotate(angle, anchor)\n  }\n\n  /**\n   * 找到锚点的依靠边，改方法初始化的时候一次计算\n   */\n  _findAnchorEdge() {\n    let coordinates = this.getCoordinates()\n    coordinates = coordinates[0]\n\n    // 取前三个点\n    const [p1, p2, p3] = coordinates\n\n    const d1 = distance(p1, p2)\n    const d2 = distance(p2, p3)\n\n    let [idx1, idx2] = [0, 0]\n\n    // 确定最长边\n    if (d1 > d2) {\n      idx1 = 0\n      idx2 = 1\n    } else {\n      idx1 = 1\n      idx2 = 2\n    }\n\n    const [idx3, idx4] = [idx1 + 2, idx2 + 2]\n\n    const [c1, c2, c3, c4] = [\n      coordinates[idx1], coordinates[idx2],\n      coordinates[idx3], coordinates[idx4]\n    ]\n\n    // 确定最上边\n    const center1 = [(c1[0] + c2[0]) / 2, (c1[1] + c2[1]) / 2]\n    const center2 = [(c3[0] + c4[0]) / 2, (c3[1] + c4[1]) / 2]\n\n    let [uponEdge, belowEdge] = [null, null]\n\n    // 计算上边\n    if (center1[1] > center2[1]) {\n      uponEdge = [idx1, idx2]\n      belowEdge = [idx3, idx4]\n    } else {\n      uponEdge = [idx3, idx4]\n      belowEdge = [idx1, idx2]\n    }\n\n    return { uponEdge, belowEdge }\n  }\n\n  /**\n   * 计算旋转锚点的位置\n   */\n  getAnchorForRotating(map) {\n    if (this._anchorSide === null) {\n      this._anchorSide = this._findAnchorEdge()\n    }\n\n    const { uponEdge, belowEdge } = this._anchorSide\n\n    let coordinates = this.getCoordinates()\n    coordinates = coordinates[0]\n\n    const [c1, c2, c3, c4] = [\n      coordinates[uponEdge[0]], coordinates[uponEdge[1]], \n      coordinates[belowEdge[0]], coordinates[belowEdge[1]]\n    ]\n\n    // 取两条长边的中心点\n    const center1 = [(c1[0] + c2[0]) / 2, (c1[1] + c2[1]) / 2]\n    const center2 = [(c3[0] + c4[0]) / 2, (c3[1] + c4[1]) / 2]\n\n    // 计算上边\n    let xa = center1[0]\n    let ya = center1[1]\n\n    let xb = center2[0]\n    let yb = center2[1]\n\n    const resolution = map.view.resolution\n\n    // 计算AB延长距离的点\n    const anchor = getPointInExtendedLineByDistanceFromAB(\n      xa, ya, xb, yb, 25 * resolution)\n\n    this._anchor = anchor\n    return this._anchor\n  }\n\n  clone() {\n    return new RotatableExtent(this.getCoordinates())\n  }\n\n  /**\n   * 根据已知边，计算斜矩形的另外两个顶点\n   * @param coordinates\n   * @returns {Array}\n   */\n  static getTheLastTwoPoint(coordinates) {\n    let [pointA, pointB, pointC] = coordinates\n    let [pointD, pointE] = [null, null]\n\n    // 斜率为0的计算方法\n    if (pointA[1] === pointB[1]) {\n      pointD = [pointB[0], pointC[1]]\n      pointE = [pointA[0], pointC[1]]\n\n      return [pointD, pointE]\n    }\n\n    if (pointA[0] === pointB[0]) {\n      pointD = [pointC[0], pointB[1]]\n      pointE = [pointC[0], pointA[1]]\n\n      return [pointD, pointE]\n    }\n\n    const kAB = (pointA[1] - pointB[1]) / (pointA[0] - pointB[0])\n    const k = -1 / kAB\n\n    // 计算投影点\n    pointD = getProjectivePoint(pointB, k, pointC)\n    const dBD = distance(pointD, pointB)\n\n    const [x2, y2] = pointA\n    let [x1, y1] = [0, 0]\n\n    // 根据距离方程和斜率方程解出点公式\n    const dx = Math.sqrt(dBD * dBD / (k * k + 1))\n    const dy = k * Math.sqrt(dBD * dBD / (k * k + 1))\n\n    x1 = x2 - dx\n    y1 = y2 - dy\n\n    const dk = (pointD[1] - y1) / (pointD[0] - x1)\n\n    // 同向判断\n    if (dk.toFixed(2) != kAB.toFixed(2)) {\n      x1 = x2 + dx\n      y1 = y2 + dy\n    }\n\n    pointE = [x1, y1]\n\n    return [pointD, pointE]\n  }\n\n  static handleRect(oldCoordinates, dragSegment, vertex) {\n    const [p1, p2, p3, p4] = oldCoordinates\n    if (p1[0] === p4[0] &&\n        p2[0] === p3[0] &&\n        p1[1] === p2[1] && \n        p3[1] === p4[1]) {\n\n      console.log('旋转矩形')\n\n\n      let xmin = Number.POSITIVE_INFINITY\n      let ymin = Number.POSITIVE_INFINITY\n      let xmax = Number.NEGATIVE_INFINITY\n      let ymax = Number.NEGATIVE_INFINITY\n    \n      oldCoordinates.forEach(ring => {\n        xmin = Math.min(xmin, ring[0])\n        ymin = Math.min(ymin, ring[1])\n        xmax = Math.max(xmax, ring[0])\n        ymax = Math.max(ymax, ring[1])\n      })\n\n      const coords = [\n        [xmin, ymin], \n        [xmax, ymin],\n        [xmax, ymax],\n        [xmin, ymax],\n        [xmin, ymin]\n      ]\n\n      const newCoordinates = ExtentUtil.updateExtent(\n        { \n          getCoordinates: function () { return coords}\n        }, vertex, dragSegment)\n      // Log.coordinates(newCoordinates)\n      return newCoordinates\n    }\n\n    return null\n  }\n\n  /**\n   * 用于计算和更新平行四边形的顶点\n   *\n   * @param p 平行四边形对象\n   * @param vertex 新移动的点\n   * @param oldVertex 上次移动的点\n   * @param dragSegment 数据对象\n   * @returns {*} 返回新的点集合（3维数组）\n   */\n  static updateCoordinatesForModification(p, vertex, oldVertex, dragSegment) {\n    let dis = 0\n    if (oldVertex) {\n      dis = distance(oldVertex, vertex)\n    }\n\n    const oldRingsCoordinates = p.getCoordinates()\n    if (dis === 0) {\n      return oldRingsCoordinates\n    }\n\n    const oldCoordinates = [...oldRingsCoordinates[0]]\n    const segement = dragSegment[0]\n    const edgeIndex = segement.index\n\n    // const rectCoordinates = RotatableExtent.handleRect(\n    //   oldCoordinates, dragSegment, vertex)\n\n    // if (rectCoordinates) {\n    //   return rectCoordinates\n    // }\n\n    let firstCoord = null\n    let nowCood = null\n    let otherCood = null\n\n    // 1、如果是顶点，则临近两点做调整\n    if (edgeIndex === 0 || edgeIndex === 4) {\n      firstCoord = oldCoordinates[3]\n      nowCood = oldCoordinates[0]\n      otherCood = oldCoordinates[1]\n    } else {\n      firstCoord = oldCoordinates[edgeIndex - 1]\n      nowCood = oldCoordinates[edgeIndex]\n      otherCood = oldCoordinates[edgeIndex + 1]\n    }\n\n    // 计算延长线上的一点\n    const newCood1 = getPointInExtendedLineByDistanceFromAB(firstCoord[0],\n      firstCoord[1], nowCood[0], nowCood[1], dis)\n\n    // 计算向量\n    const tempXX = nowCood[0] - firstCoord[0]\n    const tempYY = nowCood[1] - firstCoord[1]\n    const tempX2 = vertex[0] - oldVertex[0]\n    const tempY2 = vertex[1] - oldVertex[1]\n\n    // 使用向量的点积，来计算两个向量的方向是否一致\n    // 如果 <0 则表示异向\n    const direction = (tempX2 * tempXX) + (tempY2 * tempYY)\n\n    \n    const dx = newCood1[0] - nowCood[0]\n    const dy = newCood1[1] - nowCood[1]\n    let newCood2\n    \n    // 不同方向\n    if (direction < 0) {\n      newCood1[0] = nowCood[0] - dx\n      newCood1[1] = nowCood[1] - dy\n\n      newCood2 = [otherCood[0] - dx, otherCood[1] - dy]\n    } else {\n      newCood2 = [otherCood[0] + dx, otherCood[1] + dy]\n    }\n\n    oldCoordinates[edgeIndex] = newCood1\n    oldCoordinates[edgeIndex + 1] = newCood2\n\n    if (edgeIndex === 0) {\n      oldCoordinates[4] = oldCoordinates[0].slice()\n    } else if (edgeIndex === 4 || edgeIndex === 3) {\n      oldCoordinates[0] = oldCoordinates[4].slice()\n    }\n\n    return [oldCoordinates]\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/rotatableextent.js","\nexport default class Log {\n\n\n  static coordinates(coordinates = [], message = '', ) {\n    if (Array.isArray(coordinates)) {\n      let str = message\n      coordinates.forEach(coord => {\n        str += `【${coord[0]}, ${coord[1]}】 `\n      })\n\n      console.log(str)\n    } else {\n      console.warn('不是Array类型')\n    }\n  }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/log.js","export const ImageState = {}\n\n/**\n * On IDLE\n * @type {number}\n */\nImageState.IDLE = 0\n\n/**\n * On loading\n * @type {number}\n */\nImageState.LOADING = 1\n\n/**\n * Already loaded\n * @type {number}\n */\nImageState.LOADED = 2\n\n/**\n * Error occurred\n * @type {number}\n */\nImageState.ERROR = 3\n\nexport default {\n  ImageState\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imagestate.js","import BaseEvent from '../../core/baseevent'\n\nexport default class ImageEvent extends BaseEvent {\n  constructor (type, image) {\n    super(type)\n    \n    this.image = image\n  }\n  \n}\n\n\nImageEvent.Type = {\n  \n  /**\n   * Triggered when an image starts loading.\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n  \n  /**\n   * Triggered when an image finishes loading.\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n  \n  /**\n   * Triggered if image loading results in an error.\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/imageevent.js","//  The BaseEvent is a base class, all event dinfined in library should inherit this.\n//\n// The sub event class can define it's own property ,\n//\n//  which can be passed to other event Listener via event dispatch.\n/**\n * 定义事件模型基类，自定义事件必须继承该类。\n *\n * 事件类及其继承者用于事件传递、数据传送和信息通告。\n *\n * @class BaseEvent\n * @constructor\n * @module core\n *\n */\nexport default class BaseEvent {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param type\n   */\n  constructor (type) {\n  \n    /**\n     * 是否停止事件的冒泡\n     *\n     * @type {Boolean}\n     * @property propagatinoStopped\n     */\n    this.propagatinoStopped = false\n  \n    /**\n     * 事件标示\n     *\n     * @example'mousedown' | 'mousemove' | 'click'\n     *\n     * @type {String}\n     * @property type\n     */\n    this.type = type\n  \n    /**\n     * 事件源\n     *\n     * @type {Object}\n     * @property target\n     */\n    this.target = null\n  }\n  \n}\n\n/**\n *\n * 用于阻止事件的冒泡\n *\n * @param evt {Object} evt DOM event model\n * @static\n * @method stopPropagation\n */\nBaseEvent.stopPropagation = evt => evt.stopPropagation()\n\n/**\n *\n * 用于阻止浏览器的默认行为\n *\n * @static\n * @method preventDefault\n * @param evt {Object} evt DOM event model\n */\nBaseEvent.preventDefault = evt => evt.preventDefault()\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseevent.js","import BaseImage from '../../core/baseimage'\nimport {ImageState} from './imagestate'\nimport Obj from '../../utils/obj'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {EventType} from '../../meek/eventtype'\n\nimport {listenOnce, unlistenByKey} from '../../core/eventmanager'\nimport {getUid} from '../../utils/counter'\n\nexport default class SingleImage extends BaseImage {\n  \n  constructor (extent, resolution, pixelRatio, attributions, src,\n               crossOrigin, imageLoadFunction) {\n    \n    super(extent, resolution, pixelRatio, ImageState.IDLE,\n      attributions)\n  \n    /**\n     * @private\n     * @type {string}\n     */\n    this._src = src\n  \n    /**\n     * @private\n     * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n     */\n    this.domImage = new Image()\n    if (crossOrigin !== null) {\n      this.getDomImage().crossOrigin = crossOrigin\n    }\n  \n    /**\n     * @private\n     * @type {Object.<number, (HTMLCanvasElement|Image|HTMLVideoElement)>}\n     */\n    this._imageByContext = {}\n  \n    /**\n     * @private\n     * @type {Array.<EventsKey>}\n     */\n    this._imageListenerKeys = null\n  \n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE\n  \n    /**\n     * @private\n     * @type {ImageLoadFunctionType}\n     */\n    this._imageLoadFunction = imageLoadFunction\n  }\n  \n  /**\n   * @inheritDoc\n   * @api\n   */\n  getDomImage (opt_context) {\n    if (opt_context !== undefined) {\n      let image\n      let key = getUid(opt_context)\n      \n      if (key in this._imageByContext) {\n        return this._imageByContext[key]\n      } else if (Obj.isEmpty(this._imageByContext)) {\n        image = this._domImage\n      } else {\n        image = this._domImage.cloneNode(false)\n      }\n      \n      this._imageByContext[key] = image\n      return image\n    } else {\n      return this._domImage\n    }\n  }\n  \n  \n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  _handleImageError () {\n    this.state = ImageState.ERROR\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  _handleImageLoad () {\n    if (this.resolution === undefined) {\n      this.resolution = ExtentUtil.getHeight(this.extent) / this.getDomImage().height\n    }\n    \n    this.state = ImageState.LOADED\n    this._unlistenImage()\n    this.changed()\n  }\n  \n  \n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load () {\n    if (this.state === ImageState.IDLE || this.state === ImageState.ERROR) {\n      this.state = ImageState.LOADING\n      this.changed()\n      this._imageListenerKeys = [\n        listenOnce(this.getDomImage(), EventType.ERROR,\n          this._handleImageError, this),\n        listenOnce(this.getDomImage(), EventType.LOAD,\n          this._handleImageLoad, this)\n      ]\n      \n      this._imageLoadFunction(this, this._src)\n    }\n  }\n  \n  \n  /**\n   * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n   */\n  set domImage (value) {\n    this._domImage = value\n  }\n  \n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  _unlistenImage () {\n    if(this._imageListenerKeys) {\n      this._imageListenerKeys.forEach(unlistenByKey)\n    }\n    \n    this._imageListenerKeys = null\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/image/singleimage.js","import BaseObject from '../core/baseobject'\n\n/**\n * The base class to represent a generic layer image,it has some basic properties.\n * such as extent,resolution,state<br/>\n *\n * 基础图片图层类，定义了一些用于加载图片的必要信息\n *\n * @class BaseImage\n * @extends BaseObject\n * @module core\n * @constructor\n */\nexport default class BaseImage extends BaseObject {\n  \n  /**\n   * Create a BaseImage\n   * @param extent the extent of layer\n   * @param resolution the resolution of layer\n   * @param pixelRatio the pixel ratio\n   * @param state the image loading status\n   * @param attributions\n   */\n  constructor (extent, resolution, pixelRatio,\n               state, attributions) {\n  \n    super()\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._attributions = attributions\n  \n    /**\n     * @type {Object}\n     * @private\n     */\n    this._extent = extent\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._pixelRatio = pixelRatio\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._resolution = resolution\n  \n    /**\n     * @type {Number}\n     * @private\n     */\n    this._state = state\n  }\n  \n  /**\n   * return the attributions of layer <br/>\n   * 返回图层的属性\n   * @property attributions\n   * @type Object\n   */\n  get attributions () {\n    return this._attributions\n  }\n  \n  /**\n   * return the extent of layer<br/>\n   * 返回图层的视图范围\n   * @property extent\n   * @type Object\n   */\n  get extent () {\n    return this._extent\n  }\n  \n  /**\n   * return the DOM image<br/>\n   * 返回DOM对象\n   * @param optContext options\n   * @method getDomImage\n   * @abstract\n   */\n  getDomImage (optContext) { return optContext }\n  \n  /**\n   * return the pixel ratio<br/>\n   * 返回像素因数\n   * @property pixelRatio\n   * @type Number\n   */\n  get pixelRatio () {\n    return this._pixelRatio\n  }\n  \n  /**\n   * return the resolution of layer<br/>\n   * 返回图层的分辨率\n   * @property resolution\n   * @type Number\n   */\n  get resolution () {\n    return this._resolution\n  }\n  set resolution (value) {\n    if (this._resolution !== value) {\n      this._resolution = value\n    }\n  }\n  \n  /**\n   * return the state of layer loading <br/>\n   * 获取图片下载状态\n   * @property state\n   * @type Number\n   */\n  get state () { return this._state }\n  set state (value) {\n    if (this.state !== value){\n      this._state = value\n    }\n  }\n  \n  /**\n   * Load not yet loaded URI. <br/>\n   * 抽象方法，下载图片\n   * @abstract\n   * @method load\n   */\n  load () {}\n  \n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/baseimage.js","\nimport BaseLayer from './baselayer'\nimport {Style} from '../style/style'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport FeatureEvent from '../meek/featureevent'\nimport {EventType} from '../meek/eventtype'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport Geometry from '../geometry/geometry'\n\n/**\n * FeatureLayer\n *\n * class FeatureLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class FeatureLayer extends BaseLayer {\n\n  constructor (options = {}) {\n    super(options)\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._style = null\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._styleFunction = null\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._featureChangeKeys = new Map()\n  \n    /**\n     *\n     */\n    this.style = options.style\n    \n    // add features if passed by options\n    if (options.features) {\n      this.addFeatures(options.features)\n    }\n  \n    /**\n     * zIndex\n     *\n     * @property zIndex\n     * @type {Number}\n     */\n    this.zIndex = options.zIndex || 2\n  \n    /**\n     * The rendering buffer will be used for building an extent that\n     * limit geometries rendering\n     * @type {number}\n     * @private\n     */\n    this._renderBuffer = options.renderBufferValue !== undefined ?\n      options.renderBufferValue : 100\n  \n  }\n  \n  /**\n   * 清除所有features\n   *\n   * @method clear\n   */\n  clear () {\n    if (this._features.length !== 0) {\n      this._features = []\n      \n      // remove the event listener from feature\n      const unlistenByKeyFn = unlistenByKey\n      \n      this._featureChangeKeys.forEach((value) => {\n        unlistenByKeyFn(value)\n      })\n      \n      this._featureChangeKeys.clear()\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.CLEAR))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n\n  /**\n   * 获取features\n   *\n   * @returns {Array}\n   */\n  get features () { return this._features }\n  \n  /**\n   * 通过id查找feature\n   *\n   * @param id\n   * @returns {Boolean}\n   */\n  findFeature (id) {\n    const features = this.features\n    return features.find( f => f.id === id )\n  }\n  \n  /**\n   * 向layer中添加features\n   *\n   * @method addFeatures\n   * @param {Object} features\n   * @returns {Boolean}\n   */\n  addFeatures (features) {\n    if (!Array.isArray(features)) {\n      return false\n    }\n    \n    this._addFeaturesInner(features)\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 判断feature是否存在\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  hasFeature (feature) {\n    if (feature === null || feature === undefined) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const features = this.features\n    const findIndex = features.findIndex(f => f.id === featureId )\n    \n    return findIndex > -1\n  }\n  \n  /**\n   * 添加feature到layer的集合中，并派发feature事件\n   *\n   * addFeaturesInner\n   * @param features\n   * @private\n   */\n  _addFeaturesInner (features) {\n    features.forEach(feature => {\n      if (!this.hasFeature(feature)) {\n        this.features.push(feature)\n        \n        this._setupChangeEvents(feature.id, feature)\n        this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.ADD_FEATURE, feature))\n      }\n    })\n  }\n  \n  /**\n   * 添加feature到layer的集合中\n   *\n   * @method addFeature\n   * @param feature\n   * @returns {Boolean}\n   */\n  addFeature (feature) {\n    if (!feature) {\n      return false\n    }\n    \n    this._addFeaturesInner([feature])\n    this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n    this.changed()\n  }\n  \n  /**\n   * 获取当前鼠标点的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param frameState\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance {Number}\n   * @returns {*}\n   */\n  forEachFeatureAtPiexl (frameState,piexl,callback,tolerance) {\n    // frameState 携带 view 信息\n  \n    // 1、计算当前屏幕内的feature\n    const features = this._getCurrentExtentFeatures()\n\n    // extentFeatures = extentFeatures.filter(feature => feature.display)\n    \n    // calculate features that their extent has intersected with a given point\n    let extentFeatures = this._getIntersectedFeatures(piexl,features)\n\n    \n  \n    const piexlX = piexl[0]\n    const piexlY = piexl[1]\n    const options = {\n      tolerance: tolerance * frameState.viewState.resolution\n    }\n    \n    const result = extentFeatures.filter( (feature) =>\n      feature.geometry.containsXY(piexlX, piexlY, options)\n    )\n    \n    return result\n  }\n  \n  /**\n   *\n   * @param point\n   * @param features\n   * @private\n   */\n  _getIntersectedFeatures (point, features) {\n    return features.filter( (feature) =>\n      feature.geometry.pointInExtent(point)\n    )\n  }\n  \n  /**\n   *\n   * @returns {*}\n   * @private\n   */\n  _getCurrentExtentFeatures () {\n    return this.features.filter(feature => feature.display)\n  }\n  \n  /**\n   * 从集合中移除feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   */\n  removeFeature (feature) {\n    const features = this.features\n    if (features.length === 0) {\n      return false\n    }\n    \n    const featureId = feature.id\n    const index = features.findIndex( f =>\n      f.id === featureId\n    )\n    \n    \n    if (index > -1) {\n      features.splice(index, 1)\n      \n      this._featureChangeKeys.delete(featureId)\n      \n      this.dispatchEvent(new FeatureEvent(FeatureEvent.EventType.REMOVE_FEATURE, feature))\n      this.dispatchEvent(FeatureEvent.EventType.FEATURE_COLLECTION_CHANGED)\n      this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param featureKey\n   * @param feature\n   * @private\n   */\n  _setupChangeEvents (featureKey, feature) {\n    this._featureChangeKeys.set(featureKey, listen(feature,\n      EventType.CHANGE, this._handleFeatureChange, this))\n  }\n  \n  /**\n   *\n   * @private\n   */\n  _handleFeatureChange () {\n    this.changed()\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @param value\n   */\n  set style (value) {\n    this._style = \n      value !== undefined ? \n      value : \n      Style.defaultFunction()\n      \n    this._styleFunction = \n      value === null ? \n      undefined :\n      Style.createFunction(this._style)\n  }\n  \n  get style () {\n    if(this._style === null){\n      this._style = Style.defaultFunction()\n    }\n    \n    return this._style\n  }\n  \n  /**\n   * renderBuffer读写器\n   *\n   */\n  get renderBuffer() { return this._renderBuffer }\n  set renderBuffer (renderBufferValue) {\n    if (this._renderBuffer !== renderBufferValue) {\n      this._renderBuffer = renderBufferValue\n    }\n  }\n  \n  /**\n   * 加载当前屏幕的 features\n   *\n   * 默认会把点、线放在队列尾部\n   *\n   * @method loadFeature\n   * @param extent {Geometry}\n   * @returns {feature}\n   */\n  loadFeature (extent) {\n    const features = this.features\n    const intersects = ExtentUtil.intersects\n    const createOrUpdate = ExtentUtil.createOrUpdate\n    const newFeatures = []\n    const pointFeatures = []\n    const lineFeatures = []\n    \n    features.forEach(feature => {\n      // 判断图形是否显示\n      if (feature.display) {\n        const geometry = feature.geometry\n        const geometryExtent = geometry.extent\n        const extentArr = createOrUpdate(geometryExtent.xmin,\n          geometryExtent.ymin, geometryExtent.xmax, geometryExtent.ymax)\n\n        if (intersects(extentArr, extent)) {\n          const geometryType = geometry.geometryType\n          if (geometryType === Geometry.POINT ||\n              geometryType === Geometry.MULTI_POINT ) {\n            pointFeatures.push(feature)\n          } else if (geometryType === Geometry.LINE ||\n            geometryType === Geometry.MULTI_LINE) {\n            lineFeatures.push(feature)\n          } else {\n            newFeatures.push(feature)\n          }\n        }\n      }\n    })\n\n    return [].concat(newFeatures, lineFeatures, pointFeatures)\n  }\n\n  /**\n   * 获取样式\n   *\n   * @method styleFunction\n   * @returns {null|undefined|*}\n   */\n  get styleFunction () { return this._styleFunction }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/featurelayer.js","import BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\n/**\n * Layer基础类\n *\n * @class BaseLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class BaseLayer extends BaseObject {\n\n  constructor (options) {\n    super()\n\n    const baseOptions = Object.assign({},options)\n    \n    this.name = baseOptions.name || ''\n    this.visible = true\n    this.datasource = []\n    this.opacity = baseOptions.opacity !== undefined ? options.opacity : 1\n    this.dataExtent = null\n    this.maxResolution = 0\n    this.minResolution = 0\n    this.zIndex = baseOptions.zIndex || 0\n\n    this._mapRenderKey = null\n    \n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} mk.map\n   */\n  get map () { return this._map }\n  set map (value) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (value) {\n      this._map = value\n      this._mapRenderKey = listen(this, EventType.CHANGE, value.render, value)\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置图层是否显示(将会触发的重绘事件)\n   *\n   * @property visible\n   * @param value\n   */\n  get visible () { return this._visible }\n  set visible (value) {\n    if (this._visible !== value) {\n      this._visible = value\n      this.changed()\n    }\n  }\n\n  /**\n   * 设置图层的透明度(将会触发map的重绘事件)\n   *\n   * @property opacity\n   * @param value\n   */\n  get opacity () { return this._opacity }\n  set opacity (value) { this._opacity = value }\n\n  /**\n   * 设置图层的最小分辨率\n   *\n   * @property minResolution\n   * @returns {*}\n   */\n  get minResolution () { return this._minResolution }\n  set minResolution (value) { this._minResolution = value }\n\n  /**\n   * 设置图层的最大分辨率\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get maxResolution () { return this._maxResolution }\n  set maxResolution (value) { this._maxResolution = value }\n\n  /**\n   * dataExtent读取器\n   *\n   * @property dataExtent\n   * @returns {*}\n   */\n  get dataExtent () {}\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * datasouce 读取器\n   *\n   * @property datasouce\n   * @returns {*}\n   */\n  get datasouce () { return this._datasource }\n  set datasource (value) {\n    this._datasource = value\n  }\n\n  /**\n   * zIndex读取器\n   *\n   * @property maxResolution\n   * @returns {*}\n   */\n  get zIndex () { return this._zIndex }\n  set zIndex (value) {\n    if (this._zIndex !== value) {\n      this._zIndex = value\n    }\n  }\n\n  /**\n   * 加载Feature\n   *\n   * @method loadFeature\n   * @returns {Object} features\n   */\n  loadFeature () {\n    return this.features\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/baselayer.js","import BaseEvent from '../core/baseevent'\n\n/**\n * FeatureEvent类\n *\n * @class FeatureEvent\n * @extends baseevent\n * @module meek\n */\nexport default class FeatureEvent extends BaseEvent {\n  \n  constructor (type, feature) {\n    super(type)\n    \n    this.feature = feature\n  }\n  \n}\n\n\n/**\n * Feature event definition\n * @type {{ADD_FEATURE: string, REMOVE_FEATURE: string, CLEAR: string}}\n */\nFeatureEvent.EventType = {\n  \n  /**\n   * Triggered when a feature is added.\n   */\n  ADD_FEATURE: 'addfeature',\n  \n  /**\n   * Triggered when a feature is removed.\n   */\n  REMOVE_FEATURE: 'removefeature',\n  \n  /**\n   * Triggered when all features are removed.\n   */\n  CLEAR: 'clear',\n\n/**\n   * Triggered when a feature visible has been changed.\n   */\n  FEATURE_VISIBLE_CHANGED: 'featurevisiblechanged',\n  \n  /**\n   * Triggered when the feature collection has been changed.\n   */\n  FEATURE_COLLECTION_CHANGED: 'featurecollectionchanged'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/featureevent.js","import BaseLayer from './baselayer'\nimport SingleImage from '../lyr/image/singleimage'\n\nimport {listen} from '../core/eventmanager'\nimport {createCanvasContext2D} from '../utils/domutil'\nimport ImageEvent from '../lyr/image/imageevent'\n\nimport {EventType} from '../meek/eventtype'\nimport {ImageState} from '../lyr/image/imagestate'\nimport {ExtentUtil} from '../geometry/support/extentutil'\n\n/**\n * SingleImageLayer\n *\n * @class SingleImageLayer\n * @extends BaseObject\n * @module layer\n * @constructor\n */\nexport default class SingleImageLayer extends BaseLayer {\n  \n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super(options)\n  \n    const imageExtent = options.imageExtent\n    this.dataExtent = imageExtent\n  \n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null\n  \n    const imageLoadFunction =\n      options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : this.defaultImageLoadFunction\n    \n    this.attributions = options.attributions\n  \n    /**\n     * @private\n     */\n    this._singleImage = new SingleImage(imageExtent, undefined, 1, this.attributions,\n      options.url, crossOrigin, imageLoadFunction)\n    \n    /**\n     * @private\n     * @type {ol.Size}\n     */\n    this._imageSize = options.imageSize ? options.imageSize : null\n  \n    /**\n     * Listen the change event for SingleImage\n     */\n    listen(this.singleImage, EventType.CHANGE, this.handleImageChange, this)\n  \n    /**\n     *\n     * @type {number}\n     */\n    this.zIndex = 0\n  }\n  \n  /**\n   * 设置图片链接\n   *\n   * @method imageSrc\n   * @param url {String}\n   *\n   */\n  set imageSrc (url) {\n    this._singleImage._src = url\n    this._singleImage.domImage = new Image()\n    this._singleImage.state = ImageState.IDLE\n  }\n\n  /**\n   * 获取singleImage\n   *\n   * @property singleImage\n   * @returns {SingleImage}\n   */\n  get singleImage () { return this._singleImage }\n\n  /**\n   * 属性读写器\n   *\n   * @property attributions\n   * @param value\n   */\n  set attributions(value){\n    this._attributes = value\n  }\n  \n  get attributions(){\n    return this._attributes || null\n  }\n  \n  /**\n   *\n   * @param image\n   * @param src\n   */\n  defaultImageLoadFunction (image, src) {\n    image.getDomImage().src = src\n  }\n  \n  /**\n   * 获取图片的Dom\n   * @inheritDoc\n   */\n  getImageInternal (extent) {\n    if (ExtentUtil.intersects(extent, this.singleImage.extent)) {\n      return this.singleImage\n    }\n    \n    return null\n  }\n  \n  /**\n   * Handle the image change event\n   * @param evt\n   */\n  handleImageChange (evt) {\n    if (this.singleImage.state === ImageState.LOADED) {\n      const imageExtent = this.singleImage.extent\n      const image = this.singleImage.getDomImage()\n      let imageWidth, imageHeight\n      if (this._imageSize) {\n        imageWidth = this._imageSize[0]\n        imageHeight = this._imageSize[1]\n      } else {\n        imageWidth = image.width\n        imageHeight = image.height\n      }\n      \n      const resolution = ExtentUtil.getHeight(imageExtent) / imageHeight\n      const targetWidth = Math.ceil(ExtentUtil.getWidth(imageExtent) / resolution)\n      \n      if (targetWidth !== imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight)\n        const canvas = context.canvas\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height)\n        // Pre-load image\n        this.singleImage.domImage = canvas\n      }\n    }\n  \n    this._dispatchImageEvent(evt)\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _dispatchImageEvent (event) {\n    const image = event.target\n    switch (image.state) {\n    case ImageState.LOADING:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADSTART,\n          image))\n      break\n    case ImageState.LOADED:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADEND,\n          image))\n      break\n    case ImageState.ERROR:\n      this.dispatchEvent(\n        new ImageEvent(ImageEvent.Type.IMAGELOADERROR,\n          image))\n      break\n    default:\n      // pass\n    }\n  }\n  \n  \n  \n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lyr/singleimagelayer.js","/**\n *\n * @param optWidth\n * @param optHeight\n * @returns {CanvasRenderingContext2D|WebGLRenderingContext}\n */\nexport function createCanvasContext2D (optWidth, optHeight) {\n  let canvas = document.createElement('CANVAS')\n  if (optWidth) {\n    canvas.width = optWidth\n  }\n  \n  if (optHeight) {\n    canvas.height = optHeight\n  }\n  \n  return canvas.getContext('2d')\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerWidth (element) {\n  let width = element.offsetWidth\n  const style = getComputedStyle(element)\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10)\n  \n  return width\n}\n\n/**\n *\n * @param element\n * @returns {number}\n */\nexport function outerHeight (element) {\n  let height = element.offsetHeight\n  const style = getComputedStyle(element)\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10)\n  \n  return height\n}\n\n\nexport function removeNode (node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null\n}\n\n/**\n *\n * @param node\n */\nexport function removeChildren (node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild)\n  }\n}\n\nexport default {\n  createCanvasContext2D,\n  outerWidth,\n  outerHeight,\n  removeChildren,\n  removeNode\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/domutil.js","import Component from './component'\nimport FeaureLayer from '../lyr/featurelayer'\nimport Feature from '../meek/feature'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Line from '../geometry/line'\nimport Polygon from '../geometry/polygon'\nimport MultiPolygon from '../geometry/mutilpolygon'\nimport Extent from '../geometry/extent'\nimport BrowserEvent from '../meek/browserevent'\nimport DrawEvent from './drawevent'\nimport Parallelogram from '../geometry/parallelogram'\nimport RotatableExtent from '../geometry/rotatableextent'\n\nimport { ExtentUtil } from '../geometry/support/extentutil'\nimport { \n  simplify, \n  squaredDistanceToSegment,\n  squaredDistance,\n  distance,\n  closestOnSegment\n} from '../geometry/support/geometryutil'\n\nimport { listen, unlistenByKey } from '../core/eventmanager'\nimport { Style } from '../style/style'\nimport { functions } from '../utils/functions'\nimport {\n  getCollisionFeaturesByPoint\n} from '../utils/feature'\n\nimport {Coordinate} from '../utils/coordinate'\nimport Log from '../utils/log'\n\n/**\n * 图形绘制工具基础类\n *\n * @class Draw\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化绘图工具\n *      var drawTool = new mk.Draw({\n *        type: 'point',\n *        drawLayer: new mk.FeatureLayer()\n *      })\n *\n */\nexport default class Draw extends Component {\n  \n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleMouseEvent: this.handleMouseEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n    \n    /**\n     * mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n    \n    /**\n     * 绘制作用图层;\n     * 需要给绘制工具一个绘制的图层\n     *\n     * @property drawLayer\n     * @type {null}\n     * @private\n     */\n    this._drawLayer = options.drawLayer ? options.drawLayer : null\n  \n    /**\n     * 鼠标按下时的坐标点\n     *\n     * @property downPointPx\n     * @type {null}\n     * @private\n     */\n    this._downPointPx = null\n    \n    /**\n     * 图形绘制结束条件\n     *\n     * @property finishCoordinate\n     * @type {null}\n     * @private\n     */\n    this._finishCoordinate = null\n  \n    /**\n     * 当前的绘图模式(点、线、多边形、矩形)\n     *\n     * @property drawMode\n     * @type {*}\n     */\n    this.drawMode = Draw.getDrawMode(options.type)\n  \n    /**\n     * 绘制多边形、线段时的临时坐标数据\n     *\n     * @property sketchCoords\n     * @type\n     * @private\n     */\n    this._sketchCoords = null\n  \n    /**\n     * 绘制多边的临时线段\n     *\n     * @property sketchLine\n     * @type {null}\n     * @private\n     */\n    this._sketchLine = null\n  \n    /**\n     * 绘制完成时的结束条件\n     *\n     * @property finishCondition\n     * @type {null}\n     * @private\n     *\n     */\n    this._finishCondition = options.finishCondition ?\n        options.finishCondition : functions.TURE\n\n    /**\n     * 是否有绘制完毕的执行条件配置，用于控制绘制完毕的键盘事件\n     */\n    this._hasFinishConditionOptions = options.finishCondition ? \n        true : false\n        \n    /**\n     * 撤销条件\n     *\n     * @property undoCondition\n     * @type {Function}\n     * @private\n     */\n    this._undoCondition = options.undoCondition !== undefined ?\n        options.undoCondition : functions.TURE\n\n    /**\n     * 是否有绘制完毕的执行条件配置，用于控制绘制完毕的键盘事件\n     */\n    this._hasUndoConditionOptions = options.undoCondition ?\n      true : false\n  \n    /**\n     * 设置默认回退的顶点数，默认1\n     * @TODO 需要完善\n     * @type {number}\n     * @private\n     */\n    this._undoStep = options.freehandUndoStep ?\n      options.freehandUndoStep : 2\n      \n    // add keyboard events\n    if (options.undoCondition || options.finishCondition) {\n      listen(document, 'keyup',\n        this._handleKeyboardEvent, this)\n    }\n  \n    /**\n     * 初始化草稿图层，用于临时显示绘制的图形\n     *\n     * @property sketchLayer\n     * @type {Object} featurelayer\n     * @private\n     */\n    this._sketchLayer = new FeaureLayer(\n      { name: 'sketch layer for draw component' })\n\n    /**\n     * 获取默认绘制渲染样式\n     *\n     * @property sketchLayer\n     * @private\n     * @type {Function}\n     */\n    this._sketchLayer.style = this.getDefaultStyleFunction()\n    \n    /**\n     * 临时点\n     *\n     * @property sketchPoint\n     * @type {null}\n     * @private\n     */\n    this._sketchPoint = null\n  \n    /**\n     * 绘制时，是否允许鼠标参考点\n     * @type {boolean}\n     * @private\n     */\n    this._enableSketchPoint = options.enableSketchPoint ?\n      options.enableSketchPoint : false\n  \n    /**\n     * 临时Feature\n     *\n     * @property sketchFeature\n     * @type {null}\n     * @private\n     */\n    this._sketchFeature = null\n  \n    /**\n     * 通过geometry的类型去构建一个geometry\n     *\n     * @property eometryFunction\n     * @type {null}\n     * @private\n     */\n    // The function that can build a geometry by the passed geometry type.\n    this._geometryFunction = null\n  \n    /**\n     * 临时的线段坐标数据\n     *\n     * @property sketchLineCoords\n     * @type {null}\n     * @private\n     */\n    this._sketchLineCoords = null\n  \n    /**\n     * freehand drawing\n     * @type {Boolean}\n     * @private\n     */\n    this._freehand = options.freehand ? options.freehand : false\n    \n    /**\n     * 公差像素距离\n     *\n     * @property snapTolerance\n     * @type {Number}\n     * @private\n     */\n    this._snapTolerance = options.snapTolerance ?\n        options.snapTolerance : 2\n\n    // 绘制捕捉配置\n    const snapOptions = options.snapOptions ? \n       options.snapOptions: {}\n\n    this._snapToOthers = \n      snapOptions.snapToOthers ? \n      snapOptions.snapToOthers: \n      false\n      \n    this._snapToOthersTolerance = \n      snapOptions.tolerance ? \n      snapOptions.tolerance : \n      8\n  \n    /**\n     * 绘制线段时的最多点限制，默认没有限制\n     *\n     * @property maxLinePoints\n     * @type {Number}\n     * @private\n     */\n    this._maxLinePoints = options.maxLinePoints ?\n        options.maxLinePoints : Infinity\n\n    /**\n     * 绘制多边形时的顶点限制，默认没有限制\n     *\n     * @property maxPolygonPoints\n     * @type {Number}\n     * @private\n     */\n    this._maxPolygonPoints = options.maxPolygonPoints ?\n      options.maxPolygonPoints : Infinity\n  \n    /**\n     * 绘制线段的最少点为2，多边形为3\n     *\n     * @property minPoints\n     * @type {Number}\n     * @private\n     */\n    this._minPoints = options.minPoints ?\n      options.minPoints :\n      (this.drawMode === Draw.DrawMode.POLYGON ? 3 : 2)\n  \n  \n    /**\n     *\n     * @type {condition}\n     * @private\n     */\n    this._condition = options.condition ?\n      options.condition : functions.TURE\n    \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._shouldHandle = false\n  \n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._squaredClickTolerance = options.clickUpTolerance ?\n      options.clickUpTolerance * options.clickUpTolerance : 36\n        \n      \n  }\n\n  _finishCheck() {\n    // 判断多边形的顶点是否小于4个（正常多边形3个顶点，首尾相接多一个顶点），\n    // 小于4个不是多边形，return\n    let pcoordinates\n    const mode = this.drawMode\n    switch(mode) {\n      case Draw.DrawMode.POLYGON:\n        if (this._sketchFeature === null) {\n          return false\n        }\n\n        pcoordinates = this._sketchFeature.geometry.getCoordinates()\n        if (pcoordinates[0].length < 4) {\n          return false\n        }\n        break\n      // 判断线的顶点是否小于2个，小于2个不是线段，return\n      case Draw.DrawMode.LINE:\n        if (this._sketchFeature === null) {\n          return false\n        }\n\n        pcoordinates = this._sketchFeature.geometry.getCoordinates()\n        if (pcoordinates.length <= 2) {\n          return false\n        }\n        break\n      case Draw.DrawMode.ROTATABLE_EXTENT:\n        if (this._sketchFeature === null) {\n          return false\n        }\n\n        pcoordinates = this._sketchFeature.geometry.getCoordinates()[0]\n        if (pcoordinates.length <= 3) {\n          return false\n        }\n        break\n      default:\n        break\n    }\n\n    return true\n  }\n  \n  /**\n   * 处理绘制结束事件\n   *\n   * handleKeyboardEvent\n   * @type {Function}\n   * @param event {event}\n   * @private\n   */\n  _handleKeyboardEvent (event) {\n    // If finish drawing\n    if (this._hasFinishConditionOptions && this._finishCondition(event)) {\n      if (this._finishCheck()) {\n        this._finishDrawing()\n      }\n    }\n    \n    // If undo drawing\n    if (this._hasUndoConditionOptions) {\n      if (this._undoCondition(event)) {\n        this.undoDrawing()\n      }\n    }\n  }\n  \n  /**\n   * 获取图形创建、修改的工厂方法\n   *\n   * @property geometryFunction\n   * @type {Function}\n   * @retruns geometryFunction {Function}\n   */\n  get geometryFunction () {\n    if(!this._geometryFunction){\n      this._geometryFunction = this._initGeometryFunction()\n    }\n    \n    return this._geometryFunction\n  }\n  \n  /**\n   * drawMode读写器，\n   * 设置当前绘图的模式，重新赋值将会启动新图形类型的绘制\n   *\n   * @type {Function}\n   * @property drawMode\n   * @type {mk.Draw.DrawMode}\n   */\n  get drawMode () { return this._drawMode }\n  set drawMode (value){\n    const isIn = this._existInDrawMode(value)\n    \n    this.active = isIn ? true : false\n    this._drawMode = isIn ? value : Draw.DrawMode.UNDEFINED\n    \n    this._sketchLineCoords = null\n    this._abortDrawing()\n  \n    this._minPoints = this._drawMode === Draw.DrawMode.POLYGON ? 3 : 2\n  }\n\n  /**\n   * 判断传入的绘制类型是否在绘制列表中\n   *\n   * @method existInDrawMode\n   * @param value {String}\n   * @returns {Boolean}\n   * @private\n   */\n  _existInDrawMode (value){\n    if ((typeof value === 'string') && (value.constructor === String)) {\n      const drawMode = Draw.DrawMode\n      const modeValue = value.toUpperCase()\n  \n      if (modeValue === Draw.DrawMode.UNDEFINED.toUpperCase()) {\n        return false\n      }\n      \n      for (let val in drawMode) {\n        if (modeValue === drawMode[val].toUpperCase()) {\n          return true\n        }\n      }\n    }\n    \n    return false\n  }\n\n  /**\n   * 图形生产工厂方法\n   *\n   * @method geometryFactory\n   * @returns {Object} 返回一个geometry对象\n   * @private\n   */\n  _geometryFactory () {\n    let Constructor\n    let mode = this.drawMode\n  \n    switch(mode) {\n      case Draw.DrawMode.POINT:\n        Constructor = Point\n        break\n      case Draw.DrawMode.LINE:\n        Constructor = Line\n        break\n      case Draw.DrawMode.POLYGON:\n        Constructor = Polygon\n        break\n      case Draw.DrawMode.EXTENT:\n        Constructor = Extent\n        break\n      case Draw.DrawMode.PARALLELOGRAM:\n        Constructor = Parallelogram\n        break\n      case Draw.DrawMode.ROTATABLE_EXTENT:\n        Constructor = RotatableExtent\n        break\n    }\n\n    return Constructor\n  }\n  \n  /**\n   * 设置缺省 geometryfunction\n   *\n   * @method initGeometryFunction\n   * @returns {Function} Geometry\n   * @private\n   */\n  _initGeometryFunction () {\n    const geometryFunction = (coordinates, opt_geometry) => {\n      let mode = this.drawMode\n      let geometry = opt_geometry\n      \n      if (geometry) {\n        if (mode === Draw.DrawMode.POLYGON ||\n            mode === Draw.DrawMode.PARALLELOGRAM ||\n            mode === Draw.DrawMode.ROTATABLE_EXTENT ||\n            mode === Draw.DrawMode.LINE ) {\n          geometry.setCoordinates(coordinates)\n        } else if(mode === Draw.DrawMode.EXTENT) {\n          geometry.setCoordinates(ExtentUtil.boundingExtent(coordinates))\n        }\n      } else {\n        let Constructor = this._geometryFactory()\n        geometry = new Constructor(coordinates[0],coordinates[1])\n      }\n      \n      return geometry\n    }\n    \n    return geometryFunction\n  }\n  \n  /**\n   * 或者 freehand draw 的执行条件\n   *\n   * @param event\n   * @returns {boolean|*}\n   * @private\n   */\n  _freehandEnable () {\n    const drawMode = this.drawMode\n    return (drawMode === Draw.DrawMode.POLYGON ||\n            drawMode === Draw.DrawMode.LINE ) && \n            this._freehand\n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param event {event}\n   * @returns {*|Boolean}\n   */\n  handleMouseEvent (event) {\n    // 排除右键\n    const buttons = event.originalEvent.buttons\n    if (buttons === 2) {\n      return false\n    }\n    \n    // 越界限制\n    event.coordinate = this.coordinateBeyond(event.coordinate)\n  \n    const freehand = this._freehandEnable()\n    // this._freehand = this._freehandEnable()\n    // let pass = !this._freehand\n    let pass = true\n    const eventType = event.type\n    if (freehand &&\n        eventType === BrowserEvent.MOUSE_DRAG &&\n        this._sketchFeature !== null) {\n      this._addToDrawing(event)\n      // pass = false\n    } else if (eventType === BrowserEvent.MOUSE_MOVE) {\n      pass = this._handleMove(event)\n    } else if (eventType === BrowserEvent.DBLCLICK) {\n      pass = false\n    }\n    \n    return super.handleMouseEvent(event) && pass\n  }\n  \n  /**\n   * 处理移动事件\n   *\n   * handleMove\n   * @param {BrowserEvent} event A move event.\n   * @return {boolean} Pass the event to other compoments.\n   * @private\n   */\n  _handleMove (event) {\n    if (this._downPointPx &&\n      ((!this._freehand && this._shouldHandle) ||\n      (this._freehand && !this._shouldHandle))) {\n      const downPx = this._downPointPx\n      const clickPx = event.pixel\n      const dx = downPx[0] - clickPx[0]\n      const dy = downPx[1] - clickPx[1]\n      const squaredDistance = dx * dx + dy * dy\n      this._shouldHandle = this._freehand ?\n        squaredDistance > this._squaredClickTolerance :\n        squaredDistance <= this._squaredClickTolerance\n    }\n    \n    if (this._finishCoordinate) {\n      this._modifyDrawing(event)\n      // this._autoPan(event)\n    } else {\n      this._updateSketchPoint(event)\n    }\n    \n    return true\n  }\n  \n  /**\n   * 鼠标按下时，获取当前坐标点\n   *\n   * handleDownEvent\n   * @param event {BrowserEvent} event A up event.\n   * @returns {Boolean}\n   * @private\n   */\n  _handleDownEvent (event) {\n    this._shouldHandle = !this._freehand\n    \n    if (this._freehand) {\n      this._downPointPx = event.pixel\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n      }\n      \n      return false\n    } else if (this._condition(event)) {\n      this._downPointPx = event.pixel\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * 处理鼠标弹起事件\n   *\n   * handleUpEvent\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _handleUpEvent (event) {\n    if (this.drawMode === Draw.DrawMode.UNDEFINED) {\n      return\n    }\n    \n    let pass = true\n    const mode = this.drawMode\n    \n    this._handleMove(event)\n    \n    if (this._shouldHandle) {\n      if (!this._finishCoordinate) {\n        this._startDrawing(event)\n    \n        // 点绘制在up的时候结束\n        if (this.drawMode === Draw.DrawMode.POINT) {\n          this._finishDrawing()\n        }\n      } else if (mode === Draw.DrawMode.CIRCLE ) {\n        //\n        //\n      } else if (mode === Draw.DrawMode.EXTENT) {\n        this._finishDrawing()\n      } else if (this._atFinish(event)) {\n        if (this._finishCondition(event)) {\n          this._finishDrawing()\n        }\n      } else {\n        this._addToDrawing(event)\n      }\n    } else if (this._freehand && !this._finishCondition) {\n      this._finishCoordinate = null\n      this._abortDrawing()\n    }\n    \n    return pass\n  }\n  \n  /**\n   * 启动绘制，生成feature\n   *\n   * @method startDrawing\n   * @param event {Event}\n   * @private\n   */\n  _startDrawing (event) {\n    const startPoint = event.coordinate\n    this._finishCoordinate = startPoint\n    \n    const _drawMode = this.drawMode\n\n    switch(this.drawMode) {\n      case Draw.DrawMode.POINT:\n        this._sketchCoords = startPoint.slice() // 缓存up的点\n        break\n      case Draw.DrawMode.POLYGON:\n      case Draw.DrawMode.PARALLELOGRAM:\n      case Draw.DrawMode.ROTATABLE_EXTENT:\n        this._sketchCoords = [[startPoint.slice(), startPoint.slice()]]\n        this._sketchLineCoords = this._sketchCoords[0]// temp line\n        break\n      default:\n        this._sketchCoords = [startPoint.slice(), startPoint.slice()]\n\n        // 缓存up的点，最后一个值，用于move的替换\n        if (_drawMode === Draw.DrawMode.EXTENT) {\n          this._sketchLineCoords = this._sketchCoords\n        }\n    }\n  \n    if (this._sketchLineCoords) {\n      this._sketchLine = new Feature(new Line(this._sketchLineCoords))\n    }\n    \n    // Build a geometry uesed sketchCorrdds\n    const geometry = this.geometryFunction(this._sketchCoords)\n    \n    this._sketchFeature = new Feature()\n    this._sketchFeature.geometry = geometry\n    \n    // Redraw the sketch features\n    this._updateSketchFeatures()\n    \n    // 派发绘制开始事件\n    // Trigger the draw-strat event\n    const evt = new DrawEvent(\n      DrawEvent.EventType.DRAW_START, this._sketchFeature)\n    this.dispatchEvent(evt)\n  }\n  \n  /**\n   * Modify the drawing\n   *\n   * @param event {Event}\n   * @private\n   */\n  _modifyDrawing (event) {\n    let coordinate = event.coordinate\n\n    // snap点检测，如果有则使用snap点\n    const closeToVertex = this._calculateCloseToVertexOfOhters(event.pixel)\n    if (closeToVertex != null) {\n      coordinate = closeToVertex\n    }\n\n    const geometry = this._sketchFeature.geometry\n    let coordinates = null\n    let lastSecondPoint = null\n    let last = []\n    const mode = this.drawMode\n\n    switch(mode) {\n      case Draw.DrawMode.POINT:\n        last = this._sketchCoords\n        last[0] = coordinate[0]\n        last[1] = coordinate[1]\n        break\n      case Draw.DrawMode.POLYGON:\n        coordinates = this._sketchCoords[0]\n        last = coordinates[coordinates.length - 1]\n        if (this._atFinish(event)) {\n          coordinate = this._finishCoordinate.slice()\n        }\n\n        // 在鼠标移动的时候，将最后一个点替换成当前的鼠标点\n        last[0] = coordinate[0]\n        last[1] = coordinate[1]\n        break\n      case Draw.DrawMode.PARALLELOGRAM:\n        coordinates = this._sketchCoords[0]\n        last = coordinates[coordinates.length - 1]\n\n        // 需要清理，第三个点应该为鼠标点\n        if (coordinates.length > 3) {\n          coordinates = coordinates.slice(0, 2)\n          coordinates.push(coordinate)\n        } else {\n          last[0] = coordinate[0]\n          last[1] = coordinate[1]\n        }\n\n        lastSecondPoint = coordinates[coordinates.length - 2]\n\n        // 平行四边形，如果有3个点，则直接生成平行四边形\n        if (lastSecondPoint[0] !== last[0] &&\n            lastSecondPoint[1] !== last[1] && \n            coordinates.length === 3) {\n          const lstPoint = Parallelogram.getTheLastPoint(coordinates)\n          coordinates.push(lstPoint, coordinates[0])\n          this._sketchCoords = [coordinates]\n\n          // 辅助效果线\n          this._sketchLineCoords = coordinates\n        }\n        break\n      case Draw.DrawMode.ROTATABLE_EXTENT:\n        coordinates = this._sketchCoords[0]\n        const coordinateLen = coordinates.length\n        last = coordinates[coordinateLen - 1]\n\n        // 需要清理，第三个点应该为鼠标点\n        if (coordinateLen > 3) {\n          coordinates = coordinates.slice(0, 2)\n          coordinates.push(coordinate)\n        } else {\n          last[0] = coordinate[0]\n          last[1] = coordinate[1]\n        }\n\n        if (coordinates.length >= 3) {\n          const lstTwoPoint = RotatableExtent.getTheLastTwoPoint(coordinates)\n          \n          // 越界检查\n          const firstPoint = lstTwoPoint[0]\n          if (!super.checkIfCoordinateWithInMapView(firstPoint))  {\n            return\n          }\n\n          const secondPoint = lstTwoPoint[1]\n          if (!super.checkIfCoordinateWithInMapView(secondPoint)) {\n            return\n          }\n\n          coordinates = [\n            coordinates[0].slice(), \n            coordinates[1].slice(), \n            ...lstTwoPoint, \n            coordinates[0].slice()\n          ]\n\n          this._sketchCoords = [coordinates]\n          this._sketchLineCoords = coordinates // 辅助效果线\n        }\n        break\n      default:\n        coordinates = this._sketchCoords // 获取up的点\n        // 替换为当前MOve的点，形成一条path\n        last = coordinates[coordinates.length - 1]\n\n        last[0] = coordinate[0]\n        last[1] = coordinate[1]\n    }\n    \n    if (this._freehand) {\n      const tempLastRing = this._sketchCoords[0]\n      if (tempLastRing.length > 2) {\n        const lastPoint = tempLastRing[tempLastRing.length - 1]\n        const lastPoint2 = tempLastRing[tempLastRing.length - 2]\n  \n        if (lastPoint[0] === lastPoint2[0] && \n            lastPoint[1] === lastPoint2[1]) {\n          tempLastRing.pop()\n        }\n      }\n    }\n    \n    // 给 geometry 赋值\n    this.geometryFunction(this._sketchCoords, geometry)\n    \n    // 更新点坐标\n    if (this._sketchPoint) {\n      const sketchPointGeom = this._sketchPoint.geometry\n      sketchPointGeom.update(coordinate[0],coordinate[1])\n    }\n    \n    let sketchLineGeom\n    if (mode === Draw.DrawMode.EXTENT) {\n      if (!this._sketchLine) {\n        this._sketchLine = new Feature(new Line(null))\n      }\n      \n      const rings = geometry.getCoordinates()\n      sketchLineGeom = this._sketchLine.geometry\n      sketchLineGeom.path = rings\n    } else if (this._sketchLineCoords) {\n      sketchLineGeom =  (this._sketchLine.geometry)\n      sketchLineGeom.path = this._sketchLineCoords\n    }\n    \n    this._updateSketchFeatures()\n    this.dispatchEvent(\n      new DrawEvent(DrawEvent.EventType.DRAWING, this._sketchFeature))\n  }\n  \n  /**\n   * Add a new coordinate to the drawing\n   *\n   * @param event\n   * @private\n   */\n  _addToDrawing (event) {\n    const coordinate = event.coordinate\n    const geometry = this._sketchFeature.geometry\n    let coordinates,done\n    const mode = this.drawMode\n\n    switch(mode) {\n      case Draw.DrawMode.LINE:\n        this._finishCoordinate = coordinate.slice()\n        coordinates = this._sketchCoords\n\n        if (coordinates.length > this._maxLinePoints) {\n          if (this._freehand) {\n            coordinates.pop()\n          } else {\n            done = true\n          }\n        }\n\n        if (this._freehand) {\n          if (coordinates.length > 1) {\n            const lastPoint = coordinates[coordinates.length - 1]\n            if (lastPoint[0] === coordinate[0] &&\n              lastPoint[1] === coordinate[1]) {\n              coordinates.pop()\n            }\n          }\n        }\n\n        coordinates.push(coordinate.slice())\n        this.geometryFunction(coordinates, geometry)\n        break\n      case Draw.DrawMode.POLYGON:\n        coordinates = this._sketchCoords[0]\n\n        if (coordinates.length > this._maxPolygonPoints) {\n          if (this._freehand) {\n            coordinates.pop()\n          } else {\n            done = true\n          }\n        }\n\n        coordinates.push(coordinate.slice())\n\n        if (done) {\n          this._finishCoordinate = coordinates[0]\n        }\n\n        this.geometryFunction(this._sketchCoords, geometry)\n        break\n      case Draw.DrawMode.PARALLELOGRAM:\n      case Draw.DrawMode.ROTATABLE_EXTENT:\n        coordinates = this._sketchCoords[0]\n\n        // 当前坐标数组添加新点数组\n        coordinates.push(coordinate.slice())\n        done = coordinates.length > this._maxPolygonPoints\n\n        if (done) {\n          this._finishCoordinate = coordinates[0]\n        }\n\n        this.geometryFunction(this._sketchCoords, geometry)\n        break\n      default:\n        break\n    }\n    \n    \n    this._updateSketchFeatures()\n    \n    if (done) {\n      this._finishDrawing()\n    }\n  }\n  \n  \n  /**\n   * 终止绘制，不会添加临时feature\n   *\n   * @method abortDrawing\n   * @returns {Feature|null|_Feature2.default}\n   * @private\n   */\n  _abortDrawing () {\n    this._finishCoordinate = null\n    const sketchFeature = this._sketchFeature\n    if (sketchFeature) {\n      this._sketchFeature = null\n      this._sketchPoint = null\n      this._sketchLine = null\n      this._sketchLayer.clear()\n    }\n    \n    return sketchFeature\n  }\n\n  finishDrawing () {\n    if (this._finishCheck()) {\n      this._finishDrawing()\n    }\n  }\n  \n  /**\n   * 绘制完成，形成正式feature\n   *\n   * @method finishDrawing\n   * @private\n   */\n  _finishDrawing () {\n    if (this._sketchFeature === null){\n      this.dispatchEvent(new DrawEvent(DrawEvent.EventType.DRAW_END))\n      return\n    }\n\n    const sketchFeature = this._abortDrawing()// 中止绘制，\n    const coordinates = this._sketchCoords\n    const geometry = (sketchFeature.geometry)\n    \n    const drawMode = this.drawMode\n  \n    if (drawMode === Draw.DrawMode.LINE) {\n      // remove the redundant last point\n      coordinates.pop()\n      this.geometryFunction(coordinates, geometry)\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      // When we finish drawing a polygon on the last point,\n      // the last coordinate is duplicated as for LineString\n      // we force the replacement by the first point\n      coordinates[0].pop()\n      coordinates[0].push(coordinates[0][0])\n      this.geometryFunction(coordinates, geometry)\n    }\n    \n    // 处理复合图形\n    if (drawMode === Geometry.MULTI_POINT) {\n      // sketchFeature.geometry = new MultiPoint([coordinates]))\n    } else if (drawMode === Geometry.MULTI_LINE) {\n      // sketchFeature.geometry = new MultiLineString([coordinates])\n    } else if (drawMode === Geometry.MULTI_POLYGON) {\n      sketchFeature.geometry = new MultiPolygon([coordinates])\n    }\n  \n    if (this._freehand) {\n      simplify(sketchFeature.geometry)\n    }\n    \n    // 最终放到shource中，形成正式feature\n    if (this._drawLayer) {\n      sketchFeature.style = undefined\n      this._drawLayer.addFeatures([sketchFeature])\n    }\n  \n    // First dispatch event to allow full set up of feature\n    this.dispatchEvent(\n      new DrawEvent(DrawEvent.EventType.DRAW_END, sketchFeature))\n  }\n  \n  /**\n   * Determine if an event is within the snapping tolerance of the start coord.\n   *\n   * @param event\n   * @returns {Boolean}\n   * @private\n   */\n  _atFinish (event) {\n    let at = false\n    if (this._sketchFeature) {\n      \n      if (this._freehand && this._finishCondition) {\n        return false\n      }\n      \n      let potentiallyDone = false\n      let potentiallyFinishCoordinates = [this._finishCoordinate]\n      \n      const drawMode = this.drawMode\n      switch(drawMode) {\n        case Draw.DrawMode.LINE:\n          potentiallyDone = this._sketchCoords.length > this._minPoints\n          break\n        case Draw.DrawMode.POLYGON:\n          potentiallyDone = this._sketchCoords[0].length > this._minPoints\n          potentiallyFinishCoordinates = [\n            this._sketchCoords[0][0],\n            this._sketchCoords[0][this._sketchCoords[0].length - 2]\n          ]\n          break\n        case Draw.DrawMode.PARALLELOGRAM:\n        case Draw.DrawMode.ROTATABLE_EXTENT:\n          at = this._sketchCoords[0].length === 5 ? true : false\n          break\n      }\n\n      if (potentiallyDone) {\n        const map = this.map\n        for (let  i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n          const finishCoordinate = potentiallyFinishCoordinates[i]\n          const finishPixel = map.getPixelFromCoordinate(finishCoordinate)\n          const pixel = event.pixel\n          const dx = pixel[0] - finishPixel[0]\n          const dy = pixel[1] - finishPixel[1]\n          const freehand = this._freehand\n          const snapTolerance = freehand ? 1 : this._snapTolerance\n          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance\n          if (at) {\n            this._finishCoordinate = finishCoordinate\n            break\n          }\n        }\n      }\n    }\n    \n    return at\n  }\n  \n  /**\n   * Create or update the sketch point\n   *\n   * updateSketchPoint\n   * @param event {BrowserEvent} event\n   * @private\n   */\n  _updateSketchPoint (event) {\n    let coordinates = event.coordinate\n\n    if (!this._enableSketchPoint) {\n      return\n    }\n    \n    if (this._sketchPoint === null) {\n      const geom = new Point(coordinates[0], coordinates[1])\n      this._sketchPoint = new Feature(geom)\n      this._updateSketchFeatures()\n    } else {\n      const sketchPointgeom = this._sketchPoint.geometry\n      sketchPointgeom.setCoordinates(coordinates)\n    }\n  }\n  \n  _autoPan (event) {\n    const pixel = event.pixel\n    const size = this.map.size\n    const x = pixel[0]\n    const y = pixel[1]\n    \n    if (x <= 2 || y <= 2) {\n      return\n    }\n    \n    if (x >= size[0] - 5 || y >= size[1] - 5) {\n      return\n    }\n  }\n  \n  /**\n   * Redraw the sketch featrues.\n   * updateSketchFeatures\n   * @private\n   */\n  _updateSketchFeatures () {\n    const features = []\n\n    if (this._sketchFeature){\n      features.push(this._sketchFeature)\n    }\n    \n    if (this._sketchLine) {\n      features.push(this._sketchLine)\n    }\n    \n    if (this._sketchPoint) {\n      features.push(this._sketchPoint)\n    }\n    \n    // 出发map的render\n    this._sketchLayer.clear()\n    this._sketchLayer.addFeatures(features)\n  }\n  \n  /**\n   * 执行撤销\n   *\n   * @method undoDrawing\n   * @private\n   */\n  undoDrawing () {\n    const drawMode = this.drawMode\n    let undoStep = 1\n    let polygonDeleteStep = 2\n    if (this._freehand) {\n      undoStep = this._undoStep\n      polygonDeleteStep = 3\n    }\n    \n    if (drawMode === Draw.DrawMode.LINE ) {\n      if (this._sketchFeature) {\n        const coordinates = this._sketchFeature.geometry.getCoordinates()\n        if (coordinates.length + undoStep > 2) {\n          coordinates.splice(coordinates.length - 2, undoStep)\n          if (coordinates.length === 1) {\n            this._abortDrawing()\n            this._finishDrawing()\n          } else {\n            this._sketchFeature.changed()\n          }\n        } else {\n          this._abortDrawing()\n          this._finishDrawing()\n        }\n      }\n    } else if (drawMode === Draw.DrawMode.POLYGON) {\n      if (this._sketchFeature) {\n        const pcoordinates = this._sketchFeature.geometry.getCoordinates()[0]\n        \n        if (pcoordinates.length + undoStep > polygonDeleteStep ) {\n          pcoordinates.splice(pcoordinates.length - polygonDeleteStep, undoStep)\n          if (pcoordinates.length === 1) {\n            this._abortDrawing()\n            this._finishDrawing()\n          } else {\n            this._sketchFeature.changed()\n          }\n        } else {\n          this._abortDrawing()\n          this._finishDrawing()\n        }\n      }\n    }\n  }\n\n  /**\n   * 计算鼠标点离最近图形上的一点\n   */\n  _calculateCloseToVertexOfOhters(pixel) {\n    if (!this.snapToOthers) {\n      return null\n    }\n\n    const features = this.drawLayer.features\n\n    let closeToVertex = null\n    const map = this.map\n\n    const pixelCoordinate = map.getCoordinateFromPixel(pixel)\n\n    // 获取碰撞阈值内的feature列表\n    const nodes = getCollisionFeaturesByPoint(\n      features, pixelCoordinate, this.snapToOthersTolerance)\n\n    if (nodes.length === 0) {\n      return null\n    }\n\n    const sortByDistance = (s1, s2) => {\n      const d1 = squaredDistanceToSegment(pixelCoordinate, s1.segment)\n      const d2 = squaredDistanceToSegment(pixelCoordinate, s2.segment)\n      return d1 - d2\n    }\n\n    // 取最近的\n    nodes.sort(sortByDistance)\n    const node = nodes[0]\n\n    const geometry = node.geometry\n    // const geometryType = geometry.geometryType\n    const closestSegment = node.segment\n\n    // 计算鼠标点在线段上的投影点，即是最近点\n    const vertex = closestOnSegment(pixelCoordinate, node.segment)\n    const vertexPixel = map.getPixelFromCoordinate(vertex)\n\n    // 判断当前是否选中了边\n    let dist = distance(pixel, vertexPixel)\n    if (dist <= this.snapToOthersTolerance) {\n      closeToVertex = vertex\n\n      // 顶点优先被选择\n      const pixel1 = map.getPixelFromCoordinate(closestSegment[0])\n      const pixel2 = map.getPixelFromCoordinate(closestSegment[1])\n\n      const squaredDist1 = squaredDistance(\n        vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1])\n      const squaredDist2 = squaredDistance(\n        vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1])\n\n      dist = Math.sqrt(Math.min(squaredDist1, squaredDist2))\n\n      // 计算最靠近的顶点\n      this._snappedToVertex = dist <= this._pixelTolerance\n      if (this._snappedToVertex) {\n        closeToVertex =\n          squaredDist1 > squaredDist2 ?\n            closestSegment[1] : closestSegment[0]\n      }\n    }\n\n    return closeToVertex\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param mapValue {Object} mk.map\n   */\n  get map (){ return this._map }\n  set map (mapValue) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (mapValue) {\n      this._map = mapValue\n      mapValue.addLayer(this._sketchLayer)\n    }\n    \n    this._updateState()\n  }\n\n  /**\n   * 更新绘制状态\n   *\n   * @method updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      this._abortDrawing()\n    }\n  \n    this._sketchLayer.map = map\n  }\n  \n  /**\n   * 获取默认绘制样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return (feature) => styles[feature.geometry.geometryType]\n  }\n  \n  /**\n   *\n   * @returns {boolean}\n   */\n  shouldStopEvent () {\n    if (this._freehand) {\n      return true\n    }\n    \n    return false\n  }\n\n  /**\n   * 获取当前的Layer\n   *\n   * @method drawLayer\n   * @return {null}\n   */\n  get drawLayer () { return this._drawLayer }\n  set drawLayer (layer) {\n    this._drawLayer = layer\n  }\n  \n  /**\n   * 设置当前自由、绘制模式\n   * @property freehand\n   * @type {Boolean}\n   */\n  get freehand () { return this._freehand }\n  set freehand (value) {\n    this._freehand = value\n  }\n\n  /**\n   * active读写器, 读取设置当前active非自由\n   *\n   * @type {Function}\n   * @property active\n   * @type {Boolean}\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n    if (this._active === false) {\n      if (this._sketchLayer) {\n        this._sketchLayer.clear()\n      }\n      \n      this._sketchPoint = null\n    }\n  }\n\n  get snapToOthers() { return this._snapToOthers }\n  set snapToOthers (value) {\n    if (this._snapToOthers != value) {\n      this._snapToOthers = value\n    }\n  }\n\n  get snapToOthersTolerance() { return this._snapToOthersTolerance }\n  set snapToOthersTolerance(value) {\n    if (this._snapToOthersTolerance != value) {\n      this._snapToOthersTolerance = value\n    }\n  }\n\n}\n\n/**\n * 获取当前绘制模式的静态方法\n *\n * @method getDrawMode\n * @param type {String}\n * @returns {Object}\n */\nDraw.getDrawMode = function(type) {\n  let drawMode = Draw.DrawMode.UNDEFINED\n  \n  switch (type){\n  case Geometry.POINT:\n  case Geometry.MULTI_POINT:\n    drawMode = Draw.DrawMode.POINT\n    break\n  case Geometry.LINE:\n  case Geometry.MULTI_LINE:\n    drawMode = Draw.DrawMode.LINE\n    break\n  case Geometry.POLYGON:\n  case Geometry.MULTI_POLYGON:\n    drawMode = Draw.DrawMode.POLYGON\n    break\n  case Geometry.EXTENT:\n    drawMode = Draw.DrawMode.EXTENT\n    break\n  case Geometry.PARALLELOGRAM:\n    drawMode = Draw.DrawMode.PARALLELOGRAM\n    break\n  case Geometry.ROTATABLE_EXTENT:\n    drawMode = Draw.DrawMode.ROTATABLE_EXTENT\n    break\n  default:\n    drawMode = Draw.DrawMode.UNDEFINED\n    break\n  }\n  \n  return drawMode\n}\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n *\n * 绘制模式：点、线、面、矩形(circle暂时不支持)\n * @enum {string}\n */\nDraw.DrawMode = {\n  POINT: 'Point',\n  LINE: 'Line',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle',\n  EXTENT: 'Extent',\n  PARALLELOGRAM :'Parallelogram',\n  ROTATABLE_EXTENT: 'rotatable_extent',\n  UNDEFINED: 'undefined'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/draw.js","\nimport BaseObject from '../core/baseobject'\nimport BrowserEvent from '../meek/browserevent'\nimport Obj from '../utils/obj'\n\n/**\n *\n * 定义组件基础类\n *\n * @class Component\n * @extends BaseObject\n * @module component\n *\n */\n\n// Abstract base class,represent a base componnet whcih should be inhrited\nexport default class Component extends BaseObject {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   */\n  constructor () {\n    super()\n  \n    /**\n     * 当前组件开关，默认为ture，设置为false时，则关闭当前组件的功能\n     *\n     * @property active\n     * @type {Boolean}\n     */\n    this.active = true\n  \n    /**\n     * @property mapRenderKey\n     * @type {null}\n     * @private\n     */\n    this._mapRenderKey = null\n  \n    /**\n     * @property targetPointers\n     * @type {null}\n     */\n    this.targetPointers = null\n  \n    /**\n     * @property trackedPointers\n     * @type {{}}\n     * @private\n     */\n    this._trackedPointers = {}\n  \n    /**\n     * handlingDownUpSequence\n     * @type {boolean}\n     */\n    this.handlingDownUpSequence = false\n\n  }\n  \n  /**\n   * applyHandleEventOption\n   * @param options\n   */\n  applyHandleEventOption (options) {\n\n    /**\n     *\n     */\n    this.handleMouseEvent = options.handleMouseEvent ?\n      options.handleMouseEvent : this.handleMouseEvent\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDownEvent = options.handleDownEvent ?\n      options.handleDownEvent : function () { return false }\n  \n    /**\n     *\n     * @private\n     */\n    this._handleDragEvent = options.handleDragEvent ?\n      options.handleDragEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleMoveEvent = options.handleMoveEvent ?\n      options.handleMoveEvent : function () {}\n  \n    /**\n     * @private\n     */\n    this._handleUpEvent = options.handleUpEvent ?\n      options.handleUpEvent : function () { return false }\n    \n  }\n  \n  /**\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    let stopEvent = false\n    this._updateTrackedPointers(browserEvent)\n\n    if (this.handlingDownUpSequence) {\n\n      if (browserEvent.type === BrowserEvent.MOUSE_DRAG) {\n        this._handleDragEvent(browserEvent)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_UP) {\n\n        const handledUp = this._handleUpEvent(browserEvent)\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0\n      }\n    } else {\n      if (browserEvent.type === BrowserEvent.MOUSE_DOWN) {\n\n        const handled = this._handleDownEvent(browserEvent)\n        this.handlingDownUpSequence = handled\n        stopEvent = this.shouldStopEvent(handled)\n\n      } else if (browserEvent.type === BrowserEvent.MOUSE_MOVE) {\n        this._handleMoveEvent(browserEvent)\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n  /**\n   *\n   * 根据浏览器鼠标操作事件的类型返回true或false\n   *\n   * isPointerDraggingEvent\n   * @param browserEvent {browserEvent}\n   *\n   * @returns {Boolean}\n   * @private\n   */\n  _isPointerDraggingEvent (browserEvent) {\n    const type = browserEvent.type\n    return (\n      type === BrowserEvent.MOUSE_DOWN ||\n      type === BrowserEvent.MOUSE_DRAG ||\n      type === BrowserEvent.MOUSE_UP)\n  }\n  \n  /**\n   *\n   * 处理浏览器鼠标操作事件\n   *\n   * updateTrackedPointers\n   *\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _updateTrackedPointers (browserEvent) {\n    if (this._isPointerDraggingEvent(browserEvent)) {\n      const event = browserEvent\n\n      if (browserEvent.type == BrowserEvent.MOUSE_UP) {\n        delete this._trackedPointers[event.pointerId]\n      } else if (browserEvent.type == BrowserEvent.MOUSE_DOWN) {\n        this._trackedPointers[event.pointerId] = event\n      } else if (event.pointerId in this._trackedPointers) {\n        this._trackedPointers[event.pointerId] = event\n      }\n      this.targetPointers = Obj.getValues(this._trackedPointers)\n    }\n  }\n  \n  /**\n   *\n   * @param view\n   * @param delta\n   * @param opt_duration\n   */\n  pan (view, delta) {\n    const currentCenter = view.center\n    if (currentCenter) {\n      view.center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]\n    }\n  }\n  \n  /**\n   *\n   * 根据Delta值进行视图缩放，Delta等于1时固定放大，等于-1时固定缩小\n   *\n   * @method zoomByDelta\n   *\n   * @param view {Object}\n   * @param delta {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   *\n   */\n  zoomByDelta (view, delta, opt_anchor, opt_duration) {\n    const currentResolution = view.resolution\n    const resolution = view.constrainResolution(currentResolution, delta, 0)\n    \n    if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n      const currentCenter = view.center\n      let center = view.calculateCenterZoom(resolution, opt_anchor)\n      center = view.constrainCenter(center)\n      \n      opt_anchor = [\n        (resolution * currentCenter[0] - currentResolution * center[0]) /\n        (resolution - currentResolution),\n        (resolution * currentCenter[1] - currentResolution * center[1]) /\n        (resolution - currentResolution)\n      ]\n    }\n    \n    this.zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration)\n  }\n  \n  /**\n   *\n   * 根据resolution进行缩放\n   *\n   * @method zoomWithoutConstraints\n   *\n   * @param view {Object}\n   * @param resolution {Number}\n   * @param opt_anchor {Number}\n   * @param opt_duration {Number}\n   */\n  zoomWithoutConstraints (view, resolution, opt_anchor, opt_duration) {\n    if (resolution) {\n      const currentResolution = view.resolution\n      const currentCenter = view.center\n      \n      if (currentResolution !== undefined && currentCenter &&\n          resolution !== currentResolution && opt_duration) {\n        view.resolution = resolution\n\n      } else {\n        if (opt_anchor) {\n          const center = view.calculateCenterZoom(resolution, opt_anchor)\n          view.center = center\n        }\n        view.resolution = resolution\n      }\n    }\n  }\n  \n  /**\n   * 获取当前标注视图的坐标范围(标注的图片的像素)\n   *\n   * @method getViewDataExtent\n   *\n   * @returns {*|null}\n   */\n  getViewDataExtent () {\n    if (!this._dataExtent) {\n      this._dataExtent = this.map.view.dataExtent\n    }\n    \n    return this._dataExtent\n  }\n  \n  /**\n   *\n   * 坐标自检测，如果有小于0的坐标，修正为0，如果有大于最大值的坐标，修正为最大值\n   *\n   * @method coordinateBeyond\n   * @param coordinate {Array} 坐标点{x,y}\n   * @returns {Array} new Coordinate\n   */\n  coordinateBeyond (coordinate) {\n    // 如果允许坐标可超出图片的边界\n    if (this.map.allowCoordinatesBeyondImage) {\n      return coordinate\n    }\n    \n    if (coordinate === undefined) {\n      return coordinate\n    }\n    \n    let newCoordinate = new Array(2)\n    \n    let x,y\n    \n    try{\n      x = coordinate[0]\n      y = coordinate[1]\n    } catch (e) {\n      // console.log(coordinate)\n    }\n  \n    newCoordinate[0] = x\n    newCoordinate[1] = y\n  \n    if (x <= 0) {\n      newCoordinate[0] = 0\n    }\n    \n    if (y <= 0) {\n      newCoordinate[1] = 0\n    }\n    \n    const extent = this.getViewDataExtent()\n    \n    if (extent) {\n      if (x >= extent[2]) {\n        newCoordinate[0] = extent[2]\n      }\n      \n      if (y >= extent[3]) {\n        newCoordinate[1] = extent[3]\n      }\n    }\n    \n    return newCoordinate\n  }\n\n  checkIfCoordinateWithInMapView(coordinate) {\n    if (coordinate === null || coordinate === undefined) {\n      return false\n    }\n\n    if (!Array.isArray(coordinate)) {\n      return false\n    }\n\n    const [x, y] = coordinate\n    if (x < 0 || y < 0) {\n      return false\n    }\n    \n    const extent = this.getViewDataExtent()\n    if (x > extent[2] || y > extent[3]) {\n      return false\n    }\n\n    return true\n  }\n  \n  /**\n   * shouldStopEvent\n   * @param handled\n   * @returns {*}\n   *\n   */\n  shouldStopEvent (handled) {\n    return handled\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @type {mk.map}\n   */\n  get map () { return this._map }\n  set map (value) { this._map = value }\n\n  /**\n   * active读写器, 读取设置active\n   *\n   * @type {Function}\n   * @property active\n   */\n  get active () { return this._active }\n  set active (value) {\n    this._active = value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/component.js","import BaseObject from '../core/baseobject'\n\n/**\n * BrowserEvent\n *\n * @class BrowserEvent\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class BrowserEvent extends BaseObject {\n\n  /**\n   * @constructor\n   * @param map\n   * @param oriEvent\n   * @param eventTyle\n   */\n  constructor (map, oriEvent, eventTyle) {\n    super()\n\n    /**\n     * 标示事件类型\n     */\n    this.type = eventTyle\n\n    /**\n     *\n     */\n    this.map = map\n\n    /**\n     * 记录事件源对象\n     */\n    this.originalEvent = oriEvent\n\n    /**\n     * 将浏览器坐标转换成canvas屏幕坐标\n     * The pixel of the original browser event.\n     * @type {ol.Pixel}\n     * @api stable\n     */\n    this.pixel = map.getEventPixel(oriEvent)\n  \n  \n    /**\n     * 将canvas左边转换成地图坐标\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel)\n\n    /**\n     * @type {number}\n     */\n    this.pointerId = 0\n  }\n\n  /**\n   * 取消事件的默认动作\n   *\n   * @method preventDefault\n   */\n  preventDefault () {\n    this.originalEvent.preventDefault()\n  }\n  \n  /**\n   * 阻止当前事件在DOM树上冒泡\n   *\n   * @method stopPropagation\n   */\n  stopPropagation () {\n    this.originalEvent.stopPropagation()\n  }\n  \n}\n// The single click is different form double click,which\n// consider as two click heppen during 250ms.\n/**\n * 鼠标在一段时间内单击标识\n *\n * @property SINGLE_CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.SINGLE_CLICK = 'singleclick'\n\n/**\n *\n * 鼠标单击事件标识\n *\n * @property CLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.CLICK = 'click'\n\n/**\n *\n * 鼠标双击事件标识\n *\n * @property DBLCLICK\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.DBLCLICK = 'dblclick'\n\n/**\n * 鼠标拖拽事件标识\n *\n * @property MOUSE_DRAG\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DRAG = 'mousedrag'\n\n/**\n * 鼠标按下事件标识\n *\n * @property MOUSE_DOWN\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_DOWN = 'mousedown'\n\n/**\n * 鼠标移动事件标识\n *\n * @property MOUSE_MOVE\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_MOVE = 'mousemove'\n\n/**\n * 鼠标抬起事件标识\n *\n * @property MOUSE_UP\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_UP = 'mouseup'\n\n/**\n * 鼠标移入事件标识\n *\n * @property MOUSE_OVER\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OVER = 'mouseover'\n\n/**\n * 鼠标移开事件标识\n *\n * @property MOUSE_OUT\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_OUT = 'mouseout'\n\n/**\n * 滚轮事件标识\n *\n * @property WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.WHEEL = 'wheel'\n\n/**\n * 鼠标滚轮事件标识\n *\n * @property MOUSE_WHEEL\n * @static\n * @final\n * @type {String}\n */\nBrowserEvent.MOUSE_WHEEL = 'mousewheel'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYDOWN = 'keydown'\n\n/**\n *\n * @type {string}\n */\nBrowserEvent.KEYPRESS = 'keypress'\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browserevent.js","import BaseObject from '../core/baseobject'\nimport Obj from '../utils/obj'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport Geometry from '../geometry/geometry'\nimport FeatureEvent from './featureevent'\nimport LineStyle from '../style/linestyle'\n\n/**\n * The feature class is intent to represent geographic features,\n * with a geometry ,a style and other attrubutes properties.\n * Feature provides a function named style that can be seted a style you want,\n * otherwise will use the style of feature layer.\n *\n * @class Feature\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Feature extends BaseObject {\n\n  constructor(geometry, attributes = {}, displayText, style) {\n    super()\n\n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._styleFunction = undefined\n\n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._geometryChangeKey = null\n\n\n    /**\n     *\n     */\n    this.geometry = geometry\n\n    /**\n     * 设置feature属性\n     */\n    this.initArribute(attributes)\n\n\n    /**\n     * 设置feature样式\n     *\n     */\n    this.style = style\n\n    /**\n     * 设置feature文本\n     *\n     */\n    this.displayText = displayText\n\n    /**\n     * 设置feature是否显示\n     *\n     * @type {Boolean}\n     * @private\n     */\n    this.display = true\n\n    /**\n     * 设置feature的标签是否显示\n     * @type {Boolean}\n     * @private\n     */\n    this.textDisplay = true\n\n    /**\n     * 设置feature的样式是否高亮\n     * @type {Boolean}\n     * @private\n     */\n    this.styleHighLight = false\n\n  }\n\n  /**\n   *\n   * @private\n   */\n  _handleGeometryChanged() {\n    this.changed()\n  }\n\n  /**\n   * 设置feature属性\n   *\n   * @method initArribute\n   * @param attributes\n   */\n  initArribute(attributes) {\n    if (attributes instanceof Map) {\n      this._attributesMap = attributes\n      return\n    }\n    \n    if (!(attributes instanceof Object)) {\n      attributes = {}\n    }\n    \n    this._attributesMap = Obj.objectToMap(attributes)\n  }\n\n  /**\n   * 获取feature属性\n   *\n   * @method get\n   * @param property\n   * @return {*}\n   */\n  get(property) {\n    if (this._attributesMap.has(property)) {\n      return this._attributesMap.get(property)\n    }\n\n    return undefined\n  }\n\n  /**\n   * 设置属性的值\n   *\n   * @method set\n   * @param property\n   * @param value\n   * @return {Map.<K, V>}\n   */\n  set(property, value) {\n    return this._attributesMap.set(property, value)\n  }\n\n  /**\n   * 删除属性\n   *\n   * @method delete\n   * @param property\n   * @return {boolean}\n   */\n  delete(property) {\n    return this._attributesMap.delete(property)\n  }\n\n  /**\n   * 遍历属性\n   *\n   * @method forEachAttribute\n   * @param callback\n   */\n  forEachAttribute(callback) {\n    this._attributesMap.forEach(callback)\n  }\n\n  /**\n   * 判断属性是否存在\n   *\n   * @method has\n   * @param property\n   * @return {Boolean}\n   */\n  has(property) {\n    return this._attributesMap.has(property)\n  }\n\n  /**\n   * Geometry 读写器\n   *\n   * @property geometry\n   * @return {*}\n   */\n  get geometry() {\n    return this._geometry\n  }\n\n  set geometry(value) {\n    if (value) {\n      this._geometry = value\n\n      if (this._geometryChangeKey) {\n        unlistenByKey(this._geometryChangeKey)\n      }\n\n      this._geometryChangeKey = listen(value,\n        EventType.CHANGE, this._handleGeometryChanged, this)\n    }\n  }\n\n  /**\n   * 缺省样式读写器\n   *\n   * @property styleFunction\n   * @return {*}\n   */\n  get styleFunction() {\n    return this._styleFunction\n  }\n\n  set styleFunction(value) {\n    this._styleFunction = value\n  }\n\n  /**\n   * 样式读写器\n   *\n   * @property style\n   * @return {*}\n   */\n  get style() {\n    return this._style\n  }\n\n  set style(value) {\n    this._style = value\n  }\n\n  /**\n   * feature标题读写器\n   *\n   * @property text\n   * @return {*}\n   */\n  get displayText() {\n    return this._displayText\n  }\n\n  set displayText(value) {\n    this._displayText = value\n    this.changed()\n  }\n\n  /**\n   * 样式高亮读写器\n   *\n   * @property styleHighLight\n   * @returns {*}\n   */\n  get styleHighLight() {\n    return this._styleHighLight\n  }\n\n  set styleHighLight(value) {\n    if (this._styleHighLight === value) {\n      return\n    }\n    \n    this._styleHighLight = value\n  \n    if (this.style === undefined) {\n      return\n    }\n    \n    const white = [255, 255, 255]\n    const newStyles = []\n    \n    for (let i = 0,len = this.style.length; i < len; i++) {\n      const s = this.style[i]\n      newStyles.push(s.clone())\n    }\n\n    // @TODO \n    /**\n     * 1._originStyle缺省字段的旧样式缓存方式，带来了很多的负面影响，\n     * 代码耦合依赖较强\n     * \n     * 2.样式定义方式应该脱离图形类型，分为stroke和fill样式，这点可\n     * 借鉴openlayer方式，需要重新定义样式数据结构\n     * \n     */\n    if (this._styleHighLight) {\n      this.set('_originStyle', this.style)\n      let firstStyle = null\n      let cloneStyle = null\n      \n      const geometryType = this.geometry.geometryType\n      switch(geometryType) {\n        case Geometry.LINE:\n          firstStyle = newStyles[0]\n          firstStyle.width = firstStyle.width + 1\n\n          cloneStyle = firstStyle.clone()\n          cloneStyle.width = cloneStyle.width + 1\n          cloneStyle.color = white\n\n          newStyles.unshift(cloneStyle)\n          break\n        case Geometry.EXTENT:\n        case Geometry.POLYGON:\n        case Geometry.MULTI_POLYGON:\n        case Geometry.PARALLELOGRAM:\n        case Geometry.ROTATABLE_EXTENT:\n          firstStyle = newStyles[0]\n          firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n\n          cloneStyle = firstStyle.clone()\n          cloneStyle.alpha = 0\n          cloneStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n          cloneStyle.borderStyle.color = white\n          cloneStyle.borderStyle.lineCap = LineStyle.LineCap.ROUND\n          cloneStyle.borderStyle.lineJion = LineStyle.LineJion.ROUND\n\n          newStyles.unshift(cloneStyle)\n          break\n        case Geometry.POINT:\n          firstStyle = newStyles[0]\n          firstStyle.size = firstStyle.size + 3\n          firstStyle.borderStyle.width = firstStyle.borderStyle.width + 1\n          break\n      }\n\n      const textStyle = newStyles[0].textStyle.clone()\n      // textStyle.font = 'bold 12px Arial'\n      const oriFont = textStyle.font\n      const boldFont = `bold ${oriFont.split(' ')[1]} Arial`\n      textStyle.font = boldFont\n      \n      newStyles[0].textStyle = textStyle\n\n      this.style = newStyles\n    } else {\n      if (this.get('_originStyle')) {\n        this.style = this.get('_originStyle')\n        this.delete('_originStyle')\n      }\n    }\n    \n    this.changed()\n  }\n\n\n  /**\n   * 设置图层的透明度\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method display\n   * @param value\n   */\n  get display() {\n    return this._display\n  }\n\n  set display(value) {\n    if (this._display !== value) {\n      this._display = value\n      // 需要触动绘制事件派发\n      this.changed()\n\n      // 可视化发生改变，引起事件派发\n      this.dispatchEvent(\n        new FeatureEvent(FeatureEvent.EventType.FEATURE_VISIBLE_CHANGED, this))\n    }\n  }\n\n  /**\n   * 设置标签是否显示\n   *\n   * 将会触发map的重绘事件\n   *\n   * @method textDisplay\n   * @param value\n   */\n  get textDisplay () { return this._textDisplay }\n  set textDisplay (value) {\n    if (this._textDisplay !== value) {\n      this._textDisplay = value\n      // 需要触动绘制事件派发\n      this.changed()\n    }\n  }\n\n  /**\n   * 克隆map属性\n   *\n   * @method cloneAttributesMap\n   * @returns {Map}\n   */\n  cloneAttributesMap () {\n    const newMap = new Map()\n    if (this._attributesMap.size !== 0) {\n      const entries = this._attributesMap.entries()\n      for (let [key, value] of entries) {\n        if (key != '_originStyle') {\n          newMap.set(key, Obj.deepClone(value))\n        }\n      }\n    }\n\n    return newMap\n  }\n\n  /**\n   * features 克隆方法\n   *\n   * @method clone\n   * @returns {Feature}\n   */\n  clone () {\n    let renderStyleArr\n    if (this.style) {\n      let style\n      if (Array.isArray(this.style)) {\n        // 不复制高亮的图形样式\n        if (this.style.length > 1) {\n          style = this.style[1].clone()\n        } else {\n          style = this.style[0].clone()\n        }\n      } else {\n        style = this.style.clone()\n      }\n\n      renderStyleArr = [style]\n    }\n\n    const newFeature = new Feature(this.geometry.clone(),\n      this.cloneAttributesMap(), this.displayText, renderStyleArr)\n\n    return newFeature\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/feature.js","import BaseEvent from '../core/baseevent'\n\n/**\n * The DrawEvent will emitted while geometrys on drawing end.\n *\n * 绘制结束时，DrawEvent将会被派发\n *\n *\n * @class drawevent\n * @extends BaseObject\n * @module component\n *\n *\n */\nexport default class DrawEvent extends BaseEvent {\n  \n  /**\n   * @constructor\n   * @param type\n   * @param feature\n   */\n  constructor (type, feature) {\n  \n    super(type)\n  \n    /**\n     * The feature being drawn\n     */\n    this.feature = feature\n  }\n  \n}\n\n/**\n * 定义绘制工具的事件类型\n *\n * @type {{DRAW_START: string, DRAW_END: string}}\n */\nDrawEvent.EventType = {\n  /**\n   * Triggered upon feature draw start\n   */\n  DRAW_START: 'drawstart',\n\n  /**\n   * Triggered upon feature on drawing\n   * @type {String}\n   */\n  DRAWING: 'drawing',\n  \n  /**\n   * Triggered upon feature draw end\n   */\n  DRAW_END: 'drawend'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawevent.js","\nimport { ExtentUtil } from '../geometry/support/extentutil'\nimport Geometry from '../geometry/geometry'\n\n/**\n   * get collision features by given point\n   * TODO 将来需要优化计算视图范围内的图形\n   *\n   * getCollisionFeaturesByPoint\n   * @param geometry {Array}\n   * @param pixelCoordinate {Array}\n   * @param tolarance {Number}\n   * @returns {Array}\n   * @private\n   */\nexport function getCollisionFeaturesByPoint(features, pixelCoordinate, tolarance) {\n  let result = []\n  const _ExtentUtil = ExtentUtil\n\n  // 可视图形\n  features = features.filter(f => f.display)\n\n  // loop the passed features\n  features.forEach(feature => {\n    const geometry = feature.geometry\n\n    // build an extent from the passed geometry with tolarance\n    const gometryExtent = geometry.extent\n    const bufferExtent = _ExtentUtil.buffer([\n      gometryExtent.xmin, gometryExtent.ymin,\n      gometryExtent.xmax, gometryExtent.ymax],\n      tolarance\n    )\n\n    // Exclude the moved point\n    if (_ExtentUtil.containsPoint(bufferExtent, pixelCoordinate)) {\n      // Calculte if the moved point has insected a geometry\n      const geometryType = geometry.geometryType\n      switch (geometryType) {\n        case Geometry.POINT:\n          const points = geometry.getCoordinates()\n          const dist = distance(points, pixelCoordinate)\n          if (dist <= tolarance) {\n            result.push({\n              feature,\n              geometry,\n              segment: [points, points],\n              index: 0\n            })\n          }\n          break\n        case Geometry.POLYGON:\n        case Geometry.PARALLELOGRAM:\n        case Geometry.ROTATABLE_EXTENT:\n          let coords = geometry.getCoordinates()\n          coords.forEach((coordinates, ringIndex) => {\n            for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n              let points = coordinates[j]\n              let nextPoints = coordinates[j + 1]\n\n              let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(\n                points, nextPoints)\n              let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n\n              if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                const segment = [points, nextPoints]\n                result.push({\n                  feature,\n                  geometry,\n                  segment,\n                  index: j,\n                  ringIndex\n                })\n              }\n            }\n          })\n          break\n        case Geometry.MULTI_POLYGON:\n          let allCoords = geometry.getCoordinates()\n          allCoords.forEach((coords, polygonIndex) => {\n            coords.forEach((coordinates, ringIndex) => {\n              for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n                let points = coordinates[j]\n                let nextPoints = coordinates[j + 1]\n\n                let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(\n                  points, nextPoints)\n                let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n\n                if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n                  const segment = [points, nextPoints]\n                  result.push({\n                    feature,\n                    geometry,\n                    segment,\n                    polygonIndex,\n                    index: j,\n                    ringIndex\n                  })\n                }\n              }\n            })\n          })\n          break\n        case Geometry.EXTENT:\n        case Geometry.LINE:\n          let coordinates = geometry.getCoordinates()\n\n          for (let j = 0, jj = coordinates.length - 1; j < jj; j++) {\n            let points = coordinates[j]\n            let nextPoints = coordinates[j + 1]\n\n            let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(\n              points, nextPoints)\n            let pathBufferExtent = _ExtentUtil.buffer(pathExtent, tolarance)\n\n            if (ExtentUtil.containsPoint(pathBufferExtent, pixelCoordinate)) {\n              const segment = [points, nextPoints]\n              result.push({\n                feature,\n                geometry,\n                segment,\n                index: j\n              })\n            }\n          }\n          break\n        default:\n          break\n      }\n    }\n  })\n\n  return result\n}\n\nexport default {\n  getCollisionFeaturesByPoint\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/feature.js","import Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\nimport {Style} from '../style/style'\nimport SelectEvent from '../components/selectevent'\n\nlet hasMutilSelectedSymbol = Symbol('hasmutilselected')\n\n/**\n * 图形选择模式\n *\n * @class Select\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化选择工具\n *      selectTool = new mk.Select({\n *       selectMode: mk.BrowserEvent.CLICK,\n *       selectMultiMode: selectMultiMode\n *      });\n *\n *\n */\nexport default class Select extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n\n  constructor (options = {}) {\n    super()\n\n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值则可已选中图形\n     *\n     * @property hitTolerance\n     * @type {number}\n     * @private\n     */\n    this._hitTolerance = options.hitTolerance ? options.hitTolerance : 8\n\n    /**\n     * 选择图层是否配置了样式\n     *\n     * @type {boolean}\n     * @private\n       */\n    this._hasSelectedStyle = false\n\n    /**\n     * 多选模式，默认为false\n     *\n     * @property multiSelectMode\n     * @type {boolean}\n     * @private\n     */\n    this._multiSelectMode = false\n    \n    /**\n     * 初始化草稿图层，用于临时高亮显示选中的图形\n     *\n     * @property selectLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._selectLayer = new FeatureLayer()\n\n    if (options.style) {\n      this._selectLayer.style = options.style\n      this._hasSelectedStyle = true\n    } else {\n      this._hasSelectedStyle = false\n    }\n    /**\n     * 选中图形的feature集合\n     *\n     * @property selectFeatures\n     * @type {Array}\n     * @private\n     */\n    this._selectFeatures = []\n\n    /**\n     * 选中的模式，默认为单击选中\n     *\n     * @property selectMode\n     * @type {string}\n     */\n    this.selectMode = options.selectMode ? options.selectMode : BrowserEvent.CLICK\n\n    this._selectMultiMode = options.selectMultiMode ?\n      options.selectMultiMode : function () { return true }\n\n    /**\n     * listen Ctrl key envet\n     */\n    if (options.selectMultiMode) {\n      listen(document, 'keydown', this._handleCtrlKeyDwon, this)\n    }\n    if (options.selectMultiMode) {\n      listen(document, 'keyup', this._handleCtrlKeyUp, this)\n    }\n\n  }\n\n  _condition (event) {\n    return this.selectMode === event.type\n  }\n\n  _keyPress () {}\n\n  /**\n   * handle Ctrl key down event\n   *\n   * 处理Ctrt键按下事件\n   *\n   * handleCtrlKeyDwon\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyDwon (event) {\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = true\n    }\n  }\n\n  /**\n   * handle Ctrl key up event\n   *\n   * 处理Ctrl键弹起事件\n   *\n   * @param event\n   * @private\n   */\n  _handleCtrlKeyUp (event) {\n    // Ctrl button down\n    if (this._selectMultiMode(event)) {\n      this._multiSelectMode = false\n    }\n  }\n\n  /**\n   * Handler mouse event\n   *\n   * 处理鼠标事件\n   * handleMouseEvent\n   * @method\n   * @param browserEvent {browserEvent}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!this._condition(browserEvent)) {\n      return true\n    }\n\n    const map = browserEvent.map\n    const pixel = browserEvent.pixel\n    const hitTolerance = this._hitTolerance\n\n    if (!this._multiSelectMode) {\n      this.clear()\n    }\n\n    map.forEachFeatureAtPiexl(pixel, (features) => {\n      if(features.length > 0){\n        // 赋值并填充到selectFeatures中\n        this.selectFeatures = features\n      }\n    }, hitTolerance)\n\n    if (this.selectFeatures.length > 0 ) {\n      this._forEachStyle()\n      // this._watchFeatures()\n      this._selectLayer.addFeatures(this.selectFeatures)\n    }\n\n    // 派发要素的选择事件\n    this.dispatchEvent(\n      new SelectEvent(SelectEvent.EventType.SELECT, this.selectFeatures,browserEvent))\n  }\n  \n  /**\n   * 清空选择的集合\n   *\n   * @method clear\n   */\n  clear () {\n    this._selectLayer.clear()\n    \n    this.selectFeatures.forEach(feature => {\n      feature.styleHighLight = false\n      feature.delete(hasMutilSelectedSymbol)\n    })\n\n    this.selectFeatures = []\n  }\n  \n  /**\n   * 当前选中feature的集合的读写器\n   *\n   * @property selectFeatures\n   * @type {Array}\n   */\n  get selectFeatures () { return this._selectFeatures }\n  set selectFeatures (features) {\n    if (features.length === 0 ) {\n      this._selectFeatures = []\n    } else {\n      features.forEach( feature => {\n        // 去掉重复的\n        if (!this._isInSelectFeatures(feature)) {\n          this._selectFeatures.push(feature)\n        }\n      })\n    }\n  }\n  \n  /**\n   * 判断当前选中的集合中是否包含指定的feature\n   *\n   * @param feature\n   * @returns {Boolean}\n   * @private\n   */\n  _isInSelectFeatures (feature) {\n    const features = this.selectFeatures\n    const result = features.find( f => f.id === feature.id)\n    \n    return result === undefined ? false : true\n  }\n\n  /**\n   * Update the drawing state for aborting drawing if active is false\n   *\n   * updateState\n   * @private\n   */\n  _updateState () {\n    const map = this.map\n    const active = this.active\n    if (!map || !active){\n      // this._abortDrawing()\n    }\n    \n    map.addLayer(this._selectLayer)\n  }\n\n  _watchFeatures() {\n    // const features = this.selectFeatures\n  }\n  \n  /**\n   * 高亮显示选中图形\n   *\n   * @method forEachStyle\n   * @private\n   */\n  _forEachStyle () {\n    if (this._hasSelectedStyle) {\n      return\n    }\n\n    const features = this.selectFeatures\n    features.forEach ( feature => {\n      if (!feature.get(hasMutilSelectedSymbol)) {\n        feature.styleHighLight = true\n        feature.set(hasMutilSelectedSymbol, true)\n      }\n    })\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} mk.map\n   */\n  get map (){ return this._map }\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n    }\n\n    this._updateState()\n  }\n\n  /**\n   * 选择方式读写器\n   *\n   * @property selectMode\n   * @type {Object} mk.BrowserEvent.CLICK\n   * @return {*}\n   */\n  get selectMode () { return this._selectMode }\n  set selectMode (value) {\n    if (this._selectMode !== value) {\n      this._selectMode = value\n      this.clear()\n    }\n  }\n\n  /**\n   * 获取默认编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const styles = Style.createDefaultEditing()\n    return feature => styles[feature.geometry.geometryType]\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/select.js","/**\n * 选择结束时，SelectEvent将会被派发\n *\n * @class selectevent\n * @extends BaseObject\n * @module component\n *\n *\n */\n\nimport BaseEvent from '../core/baseevent'\n\nexport default class SelectEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    \n    super(type)\n    \n    /**\n     * The feature being selected\n     */\n    this.selectedFeatures = features\n  \n    /**\n     *\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n/**\n * The select event\n * @type {{SELECT: string}}\n */\nSelectEvent.EventType = {\n  /**\n   * Triggered upon features select\n   * @api stable\n   */\n  SELECT: 'select',\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/selectevent.js","import Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport Geometry from '../geometry/geometry'\nimport Point from '../geometry/point'\nimport Line from '../geometry/line'\nimport Parallelogram from '../geometry/parallelogram'\nimport RotatableExtent from '../geometry/rotatableextent'\nimport ModifyEvent from './modifyevent'\nimport Feature from '../meek/feature'\nimport FeatureEvent from '../meek/featureevent'\nimport FeatureLayer from '../lyr/featurelayer'\nimport LineStyle from '../style/linestyle'\nimport PointStyle from '../style/pointstyle'\n\nimport { Style } from '../style/style'\nimport { EventType } from '../meek/eventtype'\nimport { ExtentUtil } from '../geometry/support/extentutil'\nimport { listen, unlistenByKey } from '../core/eventmanager'\nimport {\n  closestOnSegment, \n  squaredDistanceToSegment,\n  squaredDistance, \n  distance,\n  getAngleBetweenTwoVectors\n} from '../geometry/support/geometryutil'\n\nimport {\n  getCollisionFeaturesByPoint\n} from '../utils/feature'\n\nimport { noModifierKeys, singleClick } from '../utils/mousekey'\nimport { functions } from '../utils/functions'\n\n\n/**\n * 编辑模式，启动后可以编辑图形\n *\n * @class Modify\n * @extends Component\n * @module component\n * @constructor\n * @example\n *\n *      // 实例化编辑工具\n *      var modifyTool = new mk.Modify({\n *        features: selectedFeaturs\n *      })\n */\nexport default class Modify extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor constructor\n   * @param options\n   */\n  constructor(options = {}) {\n    super(options)\n    \n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent,\n      handleUpEvent: this._handleUpEvent\n    })\n  \n    /**\n     * 可以编辑的feature集合\n     *\n     * @property features\n     * @type {Array}\n     * @private\n     */\n    this._features = []\n    \n    /**\n     * 当前鼠标点与图形之间的公差距离，小于该值后立即捕捉标注数据\n     *\n     * @property pixelTolerance\n     * @type {number}\n     * @private\n     */\n    this._pixelTolerance = options.pixelTolerance ?\n        options.pixelTolerance : 8\n  \n    /**\n     * 指定可以允许平移的图形，默认‘矩形框’\n     *\n     * @property movableGeometrys\n     * @type {[*]}\n     * @private\n     */\n    this._movableGeometrys = options.movableGeometrys ?\n        options.movableGeometrys : \n        [ Geometry.EXTENT, Geometry.ROTATABLE_EXTENT, Geometry.POINT ]\n  \n    /**\n     * 记录当前是否有可允许平移的图形开关\n     * hasMoveableGeometrys\n     * @type {boolean}\n     * @private\n     */\n    this._hasMoveableGeometrys = true\n    \n    const movableGeometrys = this._movableGeometrys\n    if (movableGeometrys === null || movableGeometrys === undefined) {\n      this._hasMoveableGeometrys = false\n    }\n  \n    if (Array.isArray(movableGeometrys)) {\n      if (movableGeometrys.length === 0) {\n        this._hasMoveableGeometrys = false\n      }\n    }\n  \n    /**\n     *\n     * @type {Set}\n     * @private\n     */\n    this.movableGeometrySet\n    \n    if (this._hasMoveableGeometrys) {\n      this.movableGeometrySet = new Set(this._movableGeometrys)\n    }\n  \n    /**\n     * @private\n     */\n    this._deleteCondition = options.deleteCondition ?\n      options.deleteCondition : this._defaultDeleteCondition\n  \n    /**\n     * 允许顶点编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._vertexEditableCondition = options.vertexEditableCondition ?\n      options.vertexEditableCondition : functions.TURE\n  \n    /**\n     * 允许边编辑的条件方法，默认可编辑\n     * @private\n     */\n    this._edgeEditableCondition = options.edgeEditableCondition ?\n      options.edgeEditableCondition : functions.TURE\n    \n    /**\n     * Determine if should snap to vertexs of gemetry\n     *\n     * snappedToVertex\n     * @type {boolean}\n     * @private\n     */\n    this._snappedToVertex = false\n\n    // snap配置解析\n    const snapOptions = options.snapOptions || {}\n\n    /**\n     * Detemene if should snap to other geometry\n     * @type {boolean}\n     * @provate\n     */\n    this._snapToOthers = snapOptions.snapToOthers ? \n      snapOptions.snapToOthers : false\n\n    /**\n     * 持有features图层\n     */\n    this._featureLayer = snapOptions.featureLayer ? \n      snapOptions.featureLayer : null\n  \n    /**\n     * 存储待编辑的数据\n     * @snapSegments\n     * @type {null}\n     * @private\n     */\n    this._snapSegments = null\n  \n    /**\n     * @vertexFeature\n     * @type {null}\n     * @private\n     */\n    this._vertexFeature = null\n\n    /**\n     * 旋转编辑的锚点\n     */\n    this._anchorFeature = null\n\n    /**\n     * 旋转锚点的样式\n     */\n    this._anchorPointStyle = new PointStyle(\n      14, [255, 255, 255], 0.9, new LineStyle([255, 0, 0], 1, 2))\n\n    /**\n     * 旋转编辑的图形对象\n     */\n    this._rotatableFeature = null\n\n    /**\n     * 记录当前一次正在旋转的图形对象\n     */\n    this._rotatingFeature = null\n\n    /**\n     * 旋转编辑辅助线（中心点-鼠标点）\n     */\n    this._rotatableLine = null\n\n    /**\n     * 辅助线样式，红色\n     */\n    this._rotatableLineStyle = new LineStyle([255, 0, 0], 1, 1)\n\n    /**\n     * 记录上次旋转的点\n     */\n    this._lastRotatablePoint = null\n  \n    /**\n     * The editable features\n     *\n     * 设置需要编辑图形的集合，\n     * 如果图形不允许编辑，请从该集合移除\n     *\n     * @property features\n     * @type {[]}\n     */\n    this.features = options.features || []\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._lastPixel = [0, 0]\n  \n    /**\n     * 初始化草稿图层，用于临时高亮显示编辑的图形\n     *\n     * @property overLayer\n     * @type {FeatureLayer}\n     * @private\n     */\n    this._overLayer = new FeatureLayer({\n      style: options.style ? options.style : this.getDefaultStyleFunction(),\n      zIndex: 1000\n    })\n  \n    this.active = true\n    \n    this._dragSegments = []\n  \n    /**\n     * 图形是否修改过，默认为false\n     *\n     * modified\n     * @type {boolean}\n     * @private\n     */\n    this._modified = false\n  \n    /**\n     * changingFeature\n     * @type {boolean}\n     * @private\n     */\n    this._changingFeature = true\n  \n    /**\n     * Tracks if the next `singleclick` event should be ignored to prevent\n     * accidental deletion right after vertex creation.\n     *\n     * ignoreNextSingleClick\n     * @type {boolean}\n     * @private\n     */\n    this._ignoreNextSingleClick = false\n  \n    /**\n     * shouldAddToVertexs\n     * @type {boolean}\n     * @private\n     */\n    this._shouldAddToVertexs = false\n  \n    /**\n     * insertVertices\n     * @type {Array}\n     * @private\n     */\n    this._insertVertices = []\n  \n    /**\n     * Keep the mouse-down point\n     *\n     * downPoint\n     * @type {null}\n     * @private\n     */\n    this._downPoint = null\n  \n    /**\n     * Keep the current moved geometry\n     *\n     * currentMovedGeometry\n     * @type {null}\n     * @private\n     */\n    this._currentMovedFeature = null\n  \n    /**\n     * 记录上一次被编辑的点\n     * 一般指的是在边上的捕捉点或者顶点本身\n     * 只是用于平行四边形的编辑使用\n     * @type {null}\n     * @private\n     */\n    this._oldEditedVertex = null\n    \n    this._mapViewChangedKey = null\n    this._mapRenderKey = null\n\n    this._featuresEventKeys = []\n  }\n  \n  /**\n   * feature的读写器，读取设置当前的feature\n   *\n   * @property features\n   * @returns {Object} feature\n   */\n  get features () { return this._features }\n  set features (value = []) {\n    this._features = value\n\n    this._snapSegments = null\n    this._rotatableFeature = null\n    this._rotatingFeature = null\n  \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n\n    if (this._anchorFeature) {\n      this._overLayer.removeFeature(this._anchorFeature)\n      this._anchorFeature = null\n    }\n    \n    this._hasMoveableGeometrys =\n      value.length === 0 ? false : true\n    \n    this._dragSegments = []\n    this._snappedToVertex = false\n\n    this._featuresEventKeys = []\n\n    this._features.forEach(f => {\n      this._featuresEventKeys.push(\n        listen(\n          f, FeatureEvent.EventType.FEATURE_VISIBLE_CHANGED, \n          this._handleFeatureVisibleChanged, this\n        )\n      )\n    })\n\n    this._initAnthorPointForRotatableGeometry(value)\n  }\n\n  _initAnthorPointForRotatableGeometry(features) {\n    if (features === null || features === undefined) {\n      return\n    }\n\n    if (!Array.isArray(features)) {\n      return\n    }\n\n    if (features.length === 0) {\n      return\n    }\n\n    const feature = features[0]\n    const geometry = feature.geometry\n\n    if (!geometry.rotable) {\n      return\n    }\n\n    this._rotatableFeature = feature\n\n    const anthor = geometry.getAnchorForRotating(this.map)\n    this._anchorFeature = new Feature(new Point(anthor[0], anthor[1]))\n    this._anchorFeature.style = [this._anchorPointStyle]\n\n    this._overLayer.addFeature(this._anchorFeature)\n  }\n  \n  /**\n   * Handle the mouse events emitted from map.\n   *\n   * 处理鼠标事件\n   *\n   * handleMouseEvent\n   * @param browserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (browserEvent) {\n    if (!(browserEvent instanceof BrowserEvent)) {\n      return true\n    }\n\n    browserEvent.coordinate = this.coordinateBeyond(browserEvent.coordinate)\n    this.lastPointerEvent_ = browserEvent\n  \n    let handled = false\n    if ( browserEvent.type == BrowserEvent.MOUSE_MOVE && \n         !this.handlingDownUpSequence) {\n      this._handlePointerMove(browserEvent)\n    }\n\n    if (this._vertexFeature && this._deleteCondition(browserEvent)) {\n      if (browserEvent.type !== BrowserEvent.SINGLE_CLICK ||\n        !this._ignoreNextSingleClick) {\n        handled = this.removePoint()\n      } else {\n        handled = true\n      }\n    }\n\n    if (browserEvent.type == BrowserEvent.SINGLE_CLICK) {\n      this._ignoreNextSingleClick = false\n    }\n  \n    return super.handleMouseEvent(browserEvent) && !handled\n  }\n\n  /**\n   * Removes the vertex currently being pointed.\n   *\n   * removePoint\n   * @return {boolean} True when a vertex was removed.\n   * @api\n   */\n  removePoint () {\n    if (this._lastPointerEvent && \n        this._lastPointerEvent.type != BrowserEvent.MOUSE_DRAG) {\n      let evt = this.lastPointerEvent_\n      this.willModifyFeatures_(evt)\n      this._removeVertex()\n      \n      this.dispatchEvent(new ModifyEvent(\n        ModifyEvent.EventType.MODIFY_END, this.features, evt))\n      this._modified = false\n      return true\n    }\n    \n    return false\n  }\n  \n  /**\n   * compareIndexes\n   * @param a\n   * @param b\n   * @returns {number}\n   * @private\n   */\n  _compareIndexes (a, b) {\n    return a.index - b.index\n  }\n  \n  /**\n   * willModifyFeatures\n   * @param event\n   * @private\n   */\n  _willModifyFeatures (event) {\n    if (!this._modified) {\n      this._modified = true\n      this.dispatchEvent(new ModifyEvent(ModifyEvent.EventType.MODIFY_START,\n        this.features, event))\n    }\n  }\n  \n  /**\n   * Handle poiner mouse down event\n   *\n   * handleDownEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDownEvent (evt) {\n    this._downPoint = evt.coordinate\n    this._dragSegments.length = 0\n    this._modified = false\n    const coordinate = evt.coordinate\n    \n    const rotatingFeature = this._rotatingFeature\n    if (rotatingFeature) {\n      return !!rotatingFeature\n    }\n    \n    const vertexFeature = this._vertexFeature\n    if (vertexFeature) {\n      const insertVertices = [this._snapSegments]\n      this._shouldAddToVertexs = true\n      this._insertVertices = insertVertices\n  \n      return !!this._vertexFeature\n    }\n    // Move the selected geometry\n    else {\n      if (!this._hasMoveableGeometrys) {\n        return\n      }\n      \n      const filters = this.features.filter(feature => {\n        const geometry = feature.geometry\n        return feature.display &&\n          this.movableGeometrySet.has(geometry.geometryType) &&\n          geometry.containsXY(coordinate[0], coordinate[1])\n      })\n      \n      // We get the first filter geometry to move\n      // Otherwise, you should reselect\n      if (filters.length > 0) {\n        this._currentMovedFeature = filters[0]\n        return true\n      }\n      \n      return false\n    }\n  }\n  \n  /**\n   * Handle pointer move event\n   *\n   * 处理点移动事件\n   *\n   * handlePointerMove\n   * @param evt {Event}\n   * @private\n   */\n  _handlePointerMove (evt) {\n    this._lastPixel = evt.pixel\n    this._handlePointerAtPixel(evt.pixel, evt.map)\n  }\n  \n  /**\n   * @param pixel {Array}\n   * @param map {map}\n   * @private\n   */\n  _handlePointerAtPixel (pixel, map) {\n    this._snapSegments = null\n    if (this.features.length === 0) {\n      return\n    }\n\n    const pixelCoordinate = map.getCoordinateFromPixel(pixel)\n\n    // 是否选中了旋转图形的锚点\n    const rotatableGeometry = this._getRotatableGeometry(\n      this.features, pixelCoordinate, 7\n    )\n    if (rotatableGeometry) {\n      return\n    }\n    \n    // 与当前屏幕内图形做碰撞检测\n    const nodes = getCollisionFeaturesByPoint(\n      this.features, pixelCoordinate, this._pixelTolerance)\n\n    if (nodes.length > 0) {\n      const sortByDistance = (s1, s2) => {\n        const d1 = this._pointDistanceToSegment(pixelCoordinate, s1)\n        const d2 = this._pointDistanceToSegment(pixelCoordinate, s2)\n        return d1 - d2\n      }\n\n      // 取最近的\n      nodes.sort(sortByDistance)\n      const node = nodes[0]\n\n      const geometry = node.geometry\n      const geometryType = geometry.geometryType\n      const closestSegment = node.segment\n\n      // 计算鼠标点在线段上的投影点\n      let vertex = this._closestOnSegment(pixelCoordinate, node)\n      const vertexPixel = map.getPixelFromCoordinate(vertex)\n      \n      // 判断当前是否选中了边\n      let dist = distance(pixel, vertexPixel)\n      if (dist <= this._pixelTolerance) {\n        /**\n         *  已经选中了边\n         */\n        this._snapSegments = node\n        \n        let vertexEditable = false\n  \n        if (geometryType === Geometry.CIRCLE &&\n          node.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n          this._snappedToVertex = true\n        } else {\n  \n          /**\n           * 再计算是否选中了线段的两个顶点\n           */\n          \n          // 判断是否允许顶点可编辑\n          if (this._vertexEditableCondition(node)) {\n            const pixel1 = map.getPixelFromCoordinate(closestSegment[0])\n            const pixel2 = map.getPixelFromCoordinate(closestSegment[1])\n\n            const squaredDist1 = squaredDistance(\n              vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1])\n            const squaredDist2 = squaredDistance(\n              vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1])\n\n            dist = Math.sqrt(Math.min(squaredDist1, squaredDist2))\n  \n            // 判断当前是否选中了顶点\n            this._snappedToVertex = dist <= this._pixelTolerance\n            if (this._snappedToVertex) {\n              vertex = squaredDist1 > squaredDist2 ?\n                closestSegment[1] : closestSegment[0]\n    \n              const coordinateIndex = geometry.getCoordinateIndex(vertex)\n\n              switch(geometryType) {\n                case Geometry.POLYGON:\n                case Geometry.PARALLELOGRAM:\n                case Geometry.ROTATABLE_EXTENT:\n                  this._snapSegments.index = coordinateIndex.index\n                  this._snapSegments.ringIndex = coordinateIndex.ringIndex\n                  break\n                case Geometry.MULTI_POLYGON:\n                  this._snapSegments.index = coordinateIndex.index\n                  this._snapSegments.ringIndex = coordinateIndex.ringIndex\n                  this._snapSegments.polygonIndex = coordinateIndex.polygonIndex\n                  break\n                default:\n                  this._snapSegments.index = coordinateIndex\n                  break\n              }\n\n              this._snapSegments.isVertex = true\n              vertexEditable = true\n            }\n          }\n\n          if (geometryType === Geometry.PARALLELOGRAM ) {\n            this._snapSegments.index = node.index\n            this._snapSegments.ringIndex = node.ringIndex\n          }\n        }\n  \n        // 边可编辑，或者顶点可编辑\n        if (this._edgeEditableCondition(node) || vertexEditable) {\n          // draw the snapping point\n          this._createOrUpdateVertexFeature(vertex)\n        } else {\n          this._snapSegments = null\n        }\n        \n        return\n      }\n    }\n    \n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n  }\n  \n  /**\n   * Handle mouse drag event.\n   *\n   * handleDragEvent\n   * @param evt {Event}\n   * @private\n   */\n  _handleDragEvent (evt) {\n    this._ignoreNextSingleClick = false\n    let vertex = evt.coordinate // 拖拽点\n\n    // 处理图形旋转\n    if (this._rotatingFeature) {\n      this._handleRotating(evt)\n      return\n    }\n\n    // 插入顶点\n    if (this._shouldAddToVertexs) {\n      const vertexFeature = this._vertexFeature\n      const vertexTemp = vertexFeature.geometry.getCoordinates()\n    \n      const insertVertices = this._insertVertices\n      for (let j = insertVertices.length - 1; j >= 0; --j) {\n        this._insertVertex(insertVertices[j], vertexTemp)\n      }\n    \n      this._shouldAddToVertexs = false\n    }\n    \n    const dragSegments = this._dragSegments\n    const len = dragSegments.length\n    let geometry = null\n\n    // snap点检测，如果有则使用snap点\n    const closeToVertex = this._calculateCloseToVertexOfOhters(evt.pixel)\n    if (closeToVertex != null) {\n      vertex = closeToVertex\n    }\n\n    /**\n     * 1、顶点、边移动\n     * 2、图形整体平移\n     */\n  \n    // 顶点/边移动 move the edge of selected geometry\n    if (len !== 0) {\n      this._willModifyFeatures(evt)\n      \n      for (let i = 0; i < len; ++i) {\n        const dragSegment = dragSegments[i]\n        const segmentData = dragSegment[0]\n        const index = dragSegment.index\n\n        let { depth, segment } = segmentData\n        let coordinates = null\n        geometry = segmentData.geometry\n        \n        switch (geometry.geometryType) {\n          case Geometry.POINT:\n            coordinates = vertex\n            segment[0] = segment[1] = vertex\n            break\n          case Geometry.MULTI_POINT:\n            coordinates = geometry.getCoordinates()\n            coordinates[segmentData.index] = vertex\n            segment[0] = segment[1] = vertex\n            break\n          case Geometry.LINE:\n            coordinates = geometry.getCoordinates()\n            coordinates[segmentData.index] = vertex\n            break\n          case Geometry.MULTI_LINE:\n            coordinates = geometry.getCoordinates()\n            coordinates[depth[0]][segmentData.index + index] = vertex\n            segment[index] = vertex\n            break\n          case Geometry.POLYGON:\n            coordinates = geometry.getCoordinates()\n            coordinates[segmentData.ringIndex][segmentData.index] = vertex\n            if (segmentData.index === 0) {\n              coordinates[segmentData.ringIndex]\n              [coordinates[segmentData.ringIndex].length - 1] = vertex\n            }\n            break\n          case Geometry.PARALLELOGRAM:\n            // 重新计算平行四边的各个顶点\n            coordinates = Parallelogram.updateCoordinatesForModification(\n              geometry, vertex, this._oldEditedVertex, dragSegment)\n            this._oldEditedVertex = vertex\n            break\n          case Geometry.ROTATABLE_EXTENT:\n            // 计算顶点移动后，各个顶点的坐标值\n            coordinates = RotatableExtent.updateCoordinatesForModification(\n              geometry, vertex, this._oldEditedVertex, dragSegment)\n\n            const withoutView = coordinates[0].find(coor => \n              !super.checkIfCoordinateWithInMapView(coor)\n            )\n\n            if (withoutView) {\n              return\n            }\n            \n            this._oldEditedVertex = vertex\n            break\n          case Geometry.EXTENT:\n            coordinates = ExtentUtil.updateExtent(geometry, vertex, dragSegment)\n            break\n          case Geometry.MULTI_POLYGON:\n            coordinates = geometry.getCoordinates()\n            coordinates[segmentData.polygonIndex]\n                       [segmentData.ringIndex]\n                       [segmentData.index] = vertex\n                       \n            if (segmentData.index === 0) {\n              coordinates[segmentData.polygonIndex]\n                         [segmentData.ringIndex]\n                         [coordinates[segmentData.polygonIndex]\n                         [segmentData.ringIndex].length - 1] = vertex\n            }\n            break\n          case Geometry.CIRCLE:\n            segment[0] = segment[1] = vertex\n            if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX) {\n              this._changingFeature = true\n              geometry.setCenter(vertex)\n              this._changingFeature = false\n            } else { // We're dragging the circle's circumference:\n              this._changingFeature = true\n              geometry.setRadius(distance(geometry.getCenter(), vertex))\n              this._changingFeature = false\n            }\n            break\n          default:\n          // pass\n        }\n\n        if (coordinates) {\n          this._setGeometryCoordinates(geometry, coordinates)\n        }\n      }\n      \n      this._createOrUpdateVertexFeature(vertex)\n    }\n    // 平移图形 move the whole selected geometry\n    else if (this._currentMovedFeature) {\n      const downPoint = this._downPoint\n      const dx = vertex[0] - downPoint[0]\n      const dy = vertex[1] - downPoint[1]\n\n      geometry = this._currentMovedFeature.geometry\n      geometry.move(dx, dy, {\n        beyond: {\n          xmin: 0,\n          ymin: 0,\n          xmax: this.map.view.dataExtent[2],\n          ymax: this.map.view.dataExtent[3]\n        }\n      })\n\n      // this.dispatchEvent(\n      //   new ModifyEvent( \n      //     ModifyEvent.EventType.MODIFY_END, \n      //     this._currentMovedFeature.clone(), \n      //     evt\n      //   )\n      // )\n\n      this._modified = true\n      \n      this.changed()\n      this._downPoint = vertex\n    }\n\n    // 顶点移动需要隐藏旋转锚点\n    this._hideAnchorFeature(geometry)\n  }\n  \n  /**\n   * handleUpEvent\n   * @param evt {Event}\n   * @returns {boolean}\n   * @private\n   */\n  _handleUpEvent (evt) {\n    let modifiedFeature = null\n    if (this._dragSegments.length > 0) {\n      modifiedFeature = this._dragSegments[0][0].feature.clone()\n    }\n\n    this._dragSegments.length = 0\n    this._shouldAddToVertexs = false\n    this._insertVertices = []\n  \n    // 顶点或边编辑清除\n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n\n    // 一次旋转编辑结束清空状态\n    if (this._rotatingFeature) {\n      // 正在旋转的图形重置，下次重新计算\n      this._rotatingFeature = null\n      // 重置上次旋转的点\n      this._lastRotatablePoint = null\n    }\n\n    // 旋转矩形和旋转参考线清空\n    if(this._rotatableLine) {\n      this._overLayer.removeFeature(this._rotatableLine)\n      this._rotatableLine = null\n    }\n\n    // 鼠标抬起后，重新显示并更新旋转锚点的位置\n    if (this._anchorFeature) {\n      if (!this._anchorFeature.display) {\n        this._anchorFeature.display = true\n\n        const anthor = this._rotatableFeature.geometry.getAnchorForRotating(this.map)\n        this._anchorFeature.geometry.setCoordinates(anthor)\n      }\n    }\n    \n    if (this._modified) {\n      this._modified = false\n\n      if (modifiedFeature === null) {\n        modifiedFeature = this._currentMovedFeature.clone()\n      }\n\n      this.dispatchEvent(\n        new ModifyEvent(ModifyEvent.EventType.MODIFY_END, modifiedFeature, evt))\n    }\n\n    this._oldEditedVertex = null\n    this._downPoint = null\n    this._currentMovedFeature = null\n    \n    return false\n  }\n  \n  /**\n   * 插入新顶点\n   * segmentData\n   * @param vertex\n   * @private\n   */\n  _insertVertex (segmentData, vertex) {\n    let { \n      segment, feature, geometry, \n      depth, isVertex, index \n    } = segmentData\n\n    let coordinates = null\n    \n    switch (geometry.geometryType) {\n      case Geometry.MULTI_LINE:\n        coordinates = geometry.getCoordinates()\n        coordinates[depth[0]].splice(index + 1, 0, vertex)\n        break\n      case Geometry.POLYGON:\n        coordinates = geometry.getCoordinates()\n        if (!isVertex) {\n          coordinates[segmentData.ringIndex].splice(index + 1, 0, vertex)\n          index = index + 1\n        } else {\n          // dragIndex = index\n        }\n        break\n      case Geometry.MULTI_POLYGON:\n        coordinates = geometry.getCoordinates()\n        if (!isVertex) {\n          coordinates[segmentData.polygonIndex][segmentData.ringIndex].\n            splice(index + 1, 0, vertex)\n          index = index + 1\n        } else {\n          // dragIndex = index\n        }\n        break\n      case Geometry.LINE:\n        coordinates = geometry.getCoordinates()\n        if (!isVertex) {\n          coordinates.splice(index + 1, 0, vertex)\n          index = index + 1\n        } else {\n          // dragIndex = index\n        }\n        break\n      case Geometry.POINT:\n        coordinates = geometry.getCoordinates()\n        coordinates = vertex\n        break \n      case Geometry.EXTENT:\n        coordinates = geometry.getCoordinates()\n        break\n      default:\n        break\n    }\n\n    if (coordinates != null) {\n      this._setGeometryCoordinates(geometry, coordinates)\n    }\n    \n    const newSegmentData = {\n      segment: [segment[0], vertex],\n      feature,\n      geometry,\n      depth,\n      index,\n      ringIndex: segmentData.ringIndex,\n      polygonIndex: segmentData.polygonIndex,\n      isVertex\n    }\n    \n    this._dragSegments.push([newSegmentData, 1])\n    this._ignoreNextSingleClick = true\n  }\n\n  _getRotatableGeometry(features, pixelCoordinate, tolarance) {\n    const rotatableFeatures = features.filter(\n      f => f.geometry.rotable && f.display\n    )\n\n    if (rotatableFeatures.length === 0) {\n      return null\n    }\n\n    if (this._anchorFeature == null) {\n      return null\n    }\n\n    // 隐藏则不参与计算\n    if (!this._anchorFeature.display) {\n      return null\n    }\n\n    const anchor = this._anchorFeature.geometry\n    const d = distance([anchor.x, anchor.y], pixelCoordinate)\n    if (d <= tolarance) {\n      this._rotatingFeature = rotatableFeatures[0]\n      return this._rotatingFeature\n    }\n\n    this._rotatingFeature = null\n    return null\n  }\n\n  /**\n   * 计算鼠标点离最近图形上的一点\n   */\n  _calculateCloseToVertexOfOhters(pixel) {\n    if (!this.snapToOthers) {\n      return null\n    }\n\n    // 需要设置featureLayer\n    if (!this.featureLayer) {\n      return null\n    }\n\n    // 排除正在编辑的feature\n    const modifiedFeatures = this.features\n    const features = this.featureLayer.features.filter( feature => \n      !modifiedFeatures.find( mf => mf.id === feature.id)\n    )\n\n    let closeToVertex = null\n    const map = this.map\n\n    const pixelCoordinate = map.getCoordinateFromPixel(pixel)\n\n    // 获取碰撞阈值内的feature列表\n    const nodes = getCollisionFeaturesByPoint(\n      features, pixelCoordinate, this._pixelTolerance)\n\n    if (nodes.length === 0) {\n      return null\n    }\n\n    const sortByDistance = (s1, s2) => {\n      const d1 = this._pointDistanceToSegment(pixelCoordinate, s1)\n      const d2 = this._pointDistanceToSegment(pixelCoordinate, s2)\n      return d1 - d2\n    }\n\n    // 取最近的\n    nodes.sort(sortByDistance)\n    const node = nodes[0]\n\n    const geometry = node.geometry\n    // const geometryType = geometry.geometryType\n    const closestSegment = node.segment\n\n    // 计算鼠标点在线段上的投影点，即是最近点\n    const vertex = this._closestOnSegment(pixelCoordinate, node)\n    const vertexPixel = map.getPixelFromCoordinate(vertex)\n\n    // 判断当前是否选中了边\n    let dist = distance(pixel, vertexPixel)\n    if (dist <= this._pixelTolerance) {\n      closeToVertex = vertex\n\n      // 顶点优先被选择\n      const pixel1 = map.getPixelFromCoordinate(closestSegment[0])\n      const pixel2 = map.getPixelFromCoordinate(closestSegment[1])\n\n      const squaredDist1 = squaredDistance(\n        vertexPixel[0], vertexPixel[1], pixel1[0], pixel1[1])\n      const squaredDist2 = squaredDistance(\n        vertexPixel[0], vertexPixel[1], pixel2[0], pixel2[1])\n\n      dist = Math.sqrt(Math.min(squaredDist1, squaredDist2))\n\n      // 计算最靠近的顶点\n      this._snappedToVertex = dist <= this._pixelTolerance\n      if (this._snappedToVertex) {\n        closeToVertex = \n          squaredDist1 > squaredDist2 ?\n          closestSegment[1] : closestSegment[0]\n      }\n    }\n\n    return closeToVertex\n  }\n  \n  _handleRotating(evt) {\n    if (!this._rotatingFeature) {\n      return\n    }\n\n    if (this._lastRotatablePoint == null) {\n      this._lastRotatablePoint = this._downPoint\n    }\n\n    if (this._anchorFeature.display) {\n      this._anchorFeature.display = false\n    }\n\n    // 编辑捕捉点\n    if (this._vertexFeature) {\n      this._overLayer.removeFeature(this._vertexFeature)\n      this._vertexFeature = null\n    }\n\n    const dragPoint = evt.coordinate\n    const downPoint = this._lastRotatablePoint\n\n    const rotatableGeometry = this._rotatingFeature.geometry\n    const flatInteriorPoint = rotatableGeometry.getFlatInteriorPoint()\n\n    const lineCoordinates = [dragPoint, flatInteriorPoint]\n    if (this._rotatableLine === null) {\n      this._rotatableLine = new Feature(new Line(lineCoordinates))\n      this._rotatableLine.style = [this._rotatableLineStyle]\n      this._overLayer.addFeature(this._rotatableLine)\n    } else {\n      this._rotatableLine.geometry.setCoordinates(lineCoordinates)\n    }\n\n    const V1 = [downPoint[0] - flatInteriorPoint[0],\n                downPoint[1] - flatInteriorPoint[1]]\n    const V2 = [dragPoint[0] - flatInteriorPoint[0],\n                dragPoint[1] - flatInteriorPoint[1]]\n\n    const angle = getAngleBetweenTwoVectors(V1[0], V1[1], V2[0], V2[1])\n    if (angle !== 0) {\n      const rotatedGeometry = this._rotatingFeature.geometry\n      // 获取旋转的坐标\n      const rotatedCoordinates = rotatedGeometry.getRotatedCoordinates(\n        angle, flatInteriorPoint)\n\n      // 越界检查\n      const withoutView = rotatedCoordinates.find(coor =>\n        !super.checkIfCoordinateWithInMapView(coor)\n      )\n\n      // 更新坐标\n      if (!withoutView) {\n        rotatedGeometry.setCoordinates([rotatedCoordinates])\n      }\n    }\n\n    this._lastRotatablePoint = evt.coordinate\n  }\n\n  _hideAnchorFeature(geometry) {\n    if (!geometry) {\n      return\n    }\n\n    // 如果是旋转图形，则需要隐藏旋转锚点\n    if (geometry.rotable) {\n      if (this._anchorFeature) {\n        if (this._anchorFeature.display) {\n          this._anchorFeature.display = false\n        }\n      }\n    }\n  }\n\n  /**\n   * 视图发生改变时，重新计算旋转矩形的锚点位置\n   */\n  _mapViewChanged() {\n    if (this._anchorFeature) {\n      if (this._anchorFeature.display) {\n        const geometry = this._rotatableFeature.geometry\n        const anthor = geometry.getAnchorForRotating(this.map)\n        this._anchorFeature.geometry.setCoordinates(anthor)\n      }\n    }\n  }\n\n  /**\n   * feature在显示与隐藏时，需要处理旋转图形\n   * @param {*} featureEvent \n   */\n  _handleFeatureVisibleChanged(featureEvent) {\n    const feature = featureEvent.feature\n    if (this._rotatableFeature === null) {\n      return\n    }\n\n    if (this._rotatableFeature.id !== feature.id) {\n      return\n    }\n\n    if (feature.display === false) {\n      if (this._anchorFeature) {\n        if (this._anchorFeature.display) {\n          this._anchorFeature.display = false\n        }\n      }\n\n      if (this._rotatableLine) {\n        if (this._rotatableLine.display) {\n          this._rotatableLine.display = false\n        }\n      }\n    } else {\n      if (this._anchorFeature) {\n        if (!this._anchorFeature.display) {\n          this._anchorFeature.display = true\n        }\n      }\n    }\n  }\n  \n  /**\n   * 设置Ceometry的坐标数据\n   *\n   * @method setGeometryCoordinates\n   * @param geometry {Object}\n   * @param coordinates {Array}\n   * @private\n   */\n  _setGeometryCoordinates (geometry, coordinates) {\n    if (coordinates) {\n      this._changingFeature = true\n      geometry.setCoordinates(coordinates)\n      this._changingFeature = false\n    }\n  }\n  \n  /**\n   * @method pointDistanceToSegment\n   *\n   * coordinates {Array}\n   * @param segmentData\n   * @returns {number}\n   * @private\n   */\n  _pointDistanceToSegment (coordinates, segmentData) {\n    const geometry = segmentData.geometry\n    \n    if (geometry.geometryType === Geometry.CIRCLE) {\n      const circleGeometry = geometry\n      \n      if (segmentData.index === Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX) {\n        const distanceToCenterSquared =\n          squaredDistance(circleGeometry.getCenter(), coordinates)\n        const distanceToCircumference =\n          Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius()\n        return distanceToCircumference * distanceToCircumference\n      }\n    }\n    \n    return squaredDistanceToSegment(coordinates, segmentData.segment)\n  }\n  \n  /**\n   * closestOnSegment\n   * @param coordinate\n   * @param segmentData\n   * @returns {*}\n   * @private\n   */\n  _closestOnSegment (coordinate, segmentData) {\n    return closestOnSegment(coordinate, segmentData.segment)\n  }\n  \n  /**\n   * Create or update the vertex feature while snapping a point\n   * on the edge of geometry\n   *\n   * createOrUpdateVertexFeature\n   * @param point {Array}\n   * @private\n   */\n  _createOrUpdateVertexFeature (point) {\n    let vertexFeature = this._vertexFeature\n    if (!vertexFeature) {\n      vertexFeature = new Feature(new Point(point[0], point[1]))\n      this._vertexFeature = vertexFeature\n      this._overLayer.addFeature(vertexFeature)\n    } else {\n      const geom = vertexFeature.geometry\n      geom.update(point[0], point[1])\n      this._overLayer.changed()\n    }\n  }\n\n  /**\n   * 获取默认的图形编辑样式\n   *\n   * @method getDefaultStyleFunction\n   * @returns {Function}\n   */\n  getDefaultStyleFunction () {\n    const style = Style.createDefaultEditing()\n    return function (feature) {\n      return style[feature.geometry.geometryType]\n    }\n  }\n  \n  /**\n   *\n   * mapBrowserEvent\n   * @returns {*}\n   * @private\n   */\n  _defaultDeleteCondition (mapBrowserEvent) {\n    return noModifierKeys(mapBrowserEvent) &&\n           singleClick(mapBrowserEvent)\n  }\n  \n  /**\n   * active读写器，读取设置当前的active状态\n   *\n   * @property active\n   * @type {Function}\n   * @returns {*}\n   */\n  get active () { return this._active }\n  set active (isActive) {\n    if (!isActive) {\n      if (this._vertexFeature) {\n        this._overLayer.removeFeature(this._vertexFeature)\n        this._vertexFeature = null\n      }\n\n      if (this._anchorFeature) {\n        this._overLayer.removeFeature(this._anchorFeature)\n        this._anchorFeature = null\n      }\n\n      if (this._rotatableLine) {\n        this._overLayer.removeFeature(this._rotatableLine)\n        this._rotatableLine = null\n      }\n\n      this._featuresEventKeys.forEach(key => unlistenByKey(key))\n    }\n\n    this._active = isActive\n  }\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @type {Function}\n   * @property map\n   * @param map {Object} mk.map\n   */\n  get map () {return this._map}\n  set map (map) {\n    if (this._mapRenderKey) {\n      unlistenByKey(this._mapRenderKey)\n      this._mapRenderKey = null\n    }\n\n    if (this._mapViewChangedKey) {\n      unlistenByKey(this._mapViewChangedKey)\n      this._mapViewChangedKey = null\n    }\n  \n    if (map) {\n      this._map = map\n      this._mapRenderKey = listen(this, EventType.CHANGE, map.render, map)\n      this._mapViewChangedKey = listen(\n        map, EventType.VIEW_CHANGED, this._mapViewChanged, this)\n      \n      map.addLayer(this._overLayer)\n    }\n  }\n\n  /**\n   * snapToOthers读写器\n   */\n  get snapToOthers() { return this._snapToOthers }\n  set snapToOthers(value) {\n    if (this._snapToOthers !== value) {\n      this._snapToOthers = value\n    }\n  }\n\n  get featureLayer() { return this._featureLayer }\n  set featureLayer(value) {\n    this._featureLayer = value\n  }\n}\n\n/**\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX = 1\n\n/**\n * @type {number}\n */\nModify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX = 0\n\n\n// WEBPACK FOOTER //\n// ./src/components/modify.js","/**\n * 修改结束时，ModifyEvent将会被派发\n *\n * @class modifyevent\n * @extends BaseObject\n * @module component\n *\n */\nimport BaseEvent from '../core/baseevent'\n\nexport default class ModifyEvent extends BaseEvent {\n  \n  constructor (type, features, event) {\n    super(type)\n  \n    /**\n     * features being modified.\n     */\n    this.features = features\n  \n    /**\n     * BrowserEvent\n     */\n    this.browserEvent = event\n  }\n  \n}\n\n\nModifyEvent.EventType = {\n  \n  /**\n   * Triggered on features modification start.\n   */\n  MODIFY_START: 'modifystart',\n  \n  /**\n   * Triggered on features modification end\n   */\n  MODIFY_END: 'modifyend'\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/modifyevent.js","\nimport BrowserEvent from '../meek/browserevent'\n\n\nexport function singleClick (browserEvent) {\n  return browserEvent.type === BrowserEvent.SINGLE_CLICK\n}\n\nexport function mouseWheel (browserEvent) {\n  return browserEvent.type === BrowserEvent.MOUSE_WHEEL ||\n         browserEvent.type === BrowserEvent.WHEEL\n}\n\nexport function noModifierKeys (browserEvent) {\n  const originalEvent = browserEvent.originalEvent\n  return ( !originalEvent.altKey &&\n  !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n  !originalEvent.shiftKey)\n}\n\n\nexport function targetNotEditable (mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target\n  const tagName = target.tagName\n  return (\n  tagName !== 'INPUT' &&\n  tagName !== 'SELECT' &&\n  tagName !== 'TEXTAREA')\n}\n\nexport default {\n  singleClick,\n  mouseWheel,\n  noModifierKeys,\n  targetNotEditable\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/mousekey.js","import Component from './component'\nimport {noModifierKeys} from '../utils/mousekey'\nimport {Coordinate} from '../utils/coordinate'\n\n/**\n * 拖动事件基础类\n *\n * @class DragPan\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class DragPan extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n\n    this.applyHandleEventOption({\n      handleDownEvent: this._handleDownEvent,\n      handleDragEvent: this._handleDragEvent\n    })\n    \n    /**\n     * @property tragetPointers\n     * @type {Array}\n     */\n    this.targetPointers = []\n  \n    /**\n     * @property lastCentroid\n     * @type {null}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * kinetic\n     * @private\n     * @type {ol.Kinetic|undefined}\n     */\n    this._kinetic = options.kinetic\n  \n    /**\n     * @property lastCentroid\n     * @type {ol.Pixel}\n     */\n    this.lastCentroid = null\n  \n    /**\n     * @property lastPointersCount\n     * @private\n     * @type {number}\n     */\n    this._lastPointersCount = null\n  \n    /**\n     * @property conidtion\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ?\n      options.condition : noModifierKeys\n  \n    /**\n     * @property noKinetic\n     * @private\n     * @type {boolean}\n     */\n    this._noKinetic = false\n\n  }\n  \n  /**\n   * 处理browserEvent\n   *\n   * @param browserEvent {BrowserPointerEvent} mapBrowserEvent Event.\n   * @return {boolean} Start drag sequence?\n   * @this {DragPan}\n   * @private\n   */\n  _handleDownEvent (browserEvent) {\n    if (this.targetPointers.length > 0 && this._condition(browserEvent)) {\n      this.lastCentroid = null\n      \n      if (this._kinetic) {\n        this._kinetic.begin()\n      }\n      \n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this._noKinetic = this.targetPointers.length > 1\n      return true\n    } else {\n      return false\n    }\n  }\n  \n  /**\n   * handleDragEvent\n   * @param browserEvent {browserEvent}\n   * @private\n   */\n  _handleDragEvent (browserEvent) {\n    const targetPointers = this.targetPointers\n    const centroid = this.centroid(targetPointers)\n\n    if (targetPointers.length === this._lastPointersCount) {\n      if (this._kinetic) {\n        this._kinetic.update(centroid[0], centroid[1])\n      }\n      \n      if (this.lastCentroid) {\n        const deltaX = this.lastCentroid[0] - centroid[0]\n        const deltaY = this.lastCentroid[1] - centroid[1]\n        const map = browserEvent.map\n        const view = map.view\n        const viewState = view.getViewState()\n        const center = [deltaX, deltaY]\n        Coordinate.scale(center, viewState.resolution)\n        Coordinate.rotate(center, viewState.rotation)\n        Coordinate.add(center, viewState.center)\n        // center = view.constrainCenter(center)\n        view.center = center\n      }\n    } else if (this._kinetic) {\n      this._kinetic.begin()\n    }\n\n    this.lastCentroid = centroid\n    this._lastPointersCount = targetPointers.length\n  }\n  \n  /**\n   * 计算视图的中心点\n   *\n   * @method centroid\n   * @param pointerEvents {pointerEvents}\n   * @returns {[*,*]}\n   */\n  centroid (pointerEvents) {\n    const length = pointerEvents.length\n    let clientX = 0\n    let clientY = 0\n    \n    for (let i = 0; i < length; i++) {\n      clientX += pointerEvents[i].originalEvent.clientX\n      clientY += pointerEvents[i].originalEvent.clientY\n    }\n    \n    return [clientX / length, clientY / length]\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/dragpan.js","import Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\n\nimport {Config} from '../meek/config'\n\nimport {mouseWheel} from '../utils/mousekey'\nimport {clamp} from '../utils/math'\n\n/**\n * 鼠标滚轮缩放基类\n *\n *\n * @class MouseWheelZoom\n * @extends Component\n * @module component\n * @constructor\n */\nexport default class MouseWheelZoom extends Component {\n\n  /**\n   * 构造函数\n   *\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}){\n    \n    super()\n  \n    /**\n     * 私有属性Delta，默认为0\n     *\n     * @property delta\n     * @type {Number}\n     * @private\n     */\n    this._delta = 0\n  \n    /**\n     * 私有属性useAnchor\n     *\n     * @property useAnchor\n     * @type {Boolean}\n     * @private\n     */\n    this._useAnchor = options.useAnchor !== undefined ?\n      options.useAnchor : true\n  \n    /**\n     * 私有属性duration\n     *\n     * @property duration\n     * @type {Boolean}\n     * @private\n     */\n    this._duration = options.duration !== undefined ?\n      options.duration : 250\n  \n    /**\n     * 私有属性lastAnchor\n     *\n     * @property lastAnchor\n     * @type {null}\n     * @private\n     */\n    this._lastAnchor = null\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._startTime = undefined\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._timeout = options.timeout !== undefined ? options.timeout : 80\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._timeoutId = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._mode = undefined\n  }\n  \n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent){\n    if (!mouseWheel(mapBrowserEvent)) {\n      return true\n    }\n  \n    mapBrowserEvent.preventDefault()\n  \n    const map = mapBrowserEvent.map\n    const wheelEvent = mapBrowserEvent.originalEvent\n  \n    if (this._useAnchor) {\n      this._lastAnchor = mapBrowserEvent.coordinate\n    }\n  \n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta\n    if (mapBrowserEvent.type == BrowserEvent.WHEEL) {\n      delta = wheelEvent.deltaY\n    } else if (mapBrowserEvent.type == BrowserEvent.MOUSE_WHEEL) {\n      delta = -wheelEvent.wheelDeltaY\n    }\n  \n    if (delta === 0) {\n      return false\n    }\n  \n    const now = Date.now()\n  \n    if (this._startTime === undefined) {\n      this._startTime = now\n    }\n  \n    this._delta += delta\n  \n    const timeLeft = Math.max(this._timeout - (now - this._startTime), 0)\n  \n    clearTimeout(this._timeoutId)\n    this._timeoutId = setTimeout(() => this._handleWheelZoom(map), timeLeft)\n  \n    return false\n  }\n  \n  /**\n   * Zoom to the map\n   *\n   * handleWheelZoom\n   * @param map\n   * @private\n   */\n  _handleWheelZoom (map) {\n    const view = map.view\n    // if (view.getAnimating()) {\n    //   view.cancelAnimations()\n    // }\n    \n    const maxDelta = Config.MOUSE_WHEEL_ZOOM_MAXDELTA\n    const delta = clamp(this._delta, -maxDelta, maxDelta)\n    \n    this.zoomByDelta(view, -delta, this._lastAnchor, this._duration)\n    \n    this._mode = undefined\n    this._delta = 0\n    this._lastAnchor = null\n    this._startTime = undefined\n    this._timeoutId = undefined\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/mousewheelzoom.js","import BaseObject from '../core/baseobject'\n\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey} from '../core/eventmanager'\n\nexport default class Control extends BaseObject {\n  constructor (options = {}) {\n    super()\n    \n    this._element = options.element ? options.element : null\n    \n    this._target = null\n    \n    this._map = null\n    \n    this._listenerKeys = []\n    \n    \n    if (options.target) {\n      this.target = options.target\n    }\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      value.render()\n    }\n  }\n  \n  set target(value) {\n    this._target = typeof value === 'string' ?\n      document.getElementById(value) :\n      value\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/control.js","\nimport Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\nexport default class Zoom extends Control {\n  \n  constructor (options = {}) {\n  \n    const className = options.className !== undefined ? options.className : 'dt-zoom'\n  \n    const delta = options.delta !== undefined ? options.delta : 1\n  \n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+'\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212'\n  \n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : '放大'\n    \n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : '缩小'\n  \n    const inElement = document.createElement('button')\n    inElement.className = `${className}-in`\n    inElement.setAttribute('type', 'button')\n    inElement.title = zoomInTipLabel\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    )\n  \n    const outElement = document.createElement('button')\n    outElement.className = `${className}-out`\n    outElement.setAttribute('type', 'button')\n    outElement.title = zoomOutTipLabel\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(inElement)\n    element.appendChild(outElement)\n  \n    super({\n      element: element,\n      target: options.target\n    })\n  \n    this._delta = delta\n    \n    listen(inElement, BrowserEvent.CLICK, this._handleClick, this)\n    listen(outElement, BrowserEvent.CLICK, this._handleClickIn, this)\n  }\n  \n  _handleClickIn (event) {\n    event.preventDefault()\n    this._zoomByDelta(-this._delta)\n  }\n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @param {Event} event The event to handle\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._zoomByDelta(this._delta)\n  }\n  \n  \n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  _zoomByDelta (delta) {\n    const map = this.map\n    const view = map.view\n    if (!view) {\n      return\n    }\n    \n    const currentResolution = view.resolution\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta)\n      view.resolution = newResolution\n    }\n  }\n  \n} \n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoom.js","import BaseObject from '../core/baseobject'\nimport CanvasRenderer from '../renderer/canvas/canvasrenderer'\nimport BrowserEventHandler from './browsereventhandler'\nimport BrowserEvent from './browserevent'\nimport View from './view'\nimport FeatureLayer from '../lyr/featurelayer'\nimport {listen} from '../core/eventmanager'\nimport {Transform} from '../data/matrix/transform'\nimport {EventType} from '../meek/eventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {componentsDefaults} from '../components/componentdefaults'\nimport {controlDefaults} from '../control/controldefaults'\n\n/**\n * Map类\n *\n * @class Map\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Map extends BaseObject {\n\n  /**\n   * @constructor\n   *\n   * @param options\n   */\n  constructor (options) {\n    super()\n\n    this._frameState = null\n    \n    /**\n     * 添加到map中的layers集合\n     * @private\n     */\n    this._layers = []\n  \n    /**\n     * 初始化矩阵转换器\n     * @type {*}\n     * @private\n     */\n    this._toPixelTransform = Transform.create()\n    this._toCoordinateTransform = Transform.create()\n\n    /**\n     *\n     * @private\n     */\n    this._animationDelayKey = undefined\n\n    /**\n     * The collection of components\n     * @private\n     */\n    this._components = []\n  \n    /**\n     * The collection of controls\n     * @type {Array}\n     * @private\n     */\n    this._controls = []\n\n    /**\n     * 默认比例\n     * @type {Number}\n     */\n    this._delta = 1\n  \n    // Create the viewport for map container\n    this._createViewport()\n  \n    this._overlayContainer = document.createElement('DIV')\n    this._overlayContainer.className = 'dt-overlaycontainer'\n    this.viewport.appendChild(this._overlayContainer)\n  \n    this._overlayContainerStopEvent = document.createElement('DIV')\n    this._overlayContainerStopEvent.className = 'dt-overlaycontainer-stopevent'\n  \n    // prevent event propagation from overlay\n    const overlayEvents = [\n      BrowserEvent.CLICK,\n      BrowserEvent.DBLCLICK,\n      BrowserEvent.MOUSE_DOWN,\n      BrowserEvent.MOUSE_UP,\n      BrowserEvent.MOUSE_WHEEL,\n      BrowserEvent.WHEEL\n    ]\n    overlayEvents.forEach(overlayEvent => {\n      listen(this._overlayContainerStopEvent, overlayEvent,\n        (evt) => {evt.stopPropagation() })\n    })\n    \n    this.viewport.appendChild(this._overlayContainerStopEvent)\n  \n    // Get the options inner\n    const optionsInner = Map.parseOptionsInner(options)\n    \n    // 是否允许图片坐标超出图片范围\n    this.allowCoordinatesBeyondImage = options.allowCoordinatesBeyondImage || false\n  \n    // Create the renderer\n    this._renderer = new optionsInner.rendererClass(this.viewport, this)\n    \n    // Create the browser events handler\n    this._createBrowserEventHandler()\n  \n    this._animationDelay = () => {\n      this._animationDelayKey = undefined\n      this._renderFrame(Date.now())\n    }\n    \n    // Set up the properties for map\n    this.layers = optionsInner.values['layers']\n    this.target = optionsInner.values['target']\n    this.view = optionsInner.values['view']\n    \n    // add default components to map\n    optionsInner.components.forEach(component =>\n      this.addComponents(component))\n    \n    // add default controls to map\n    optionsInner.controls.forEach(control => this.addControl(control))\n  \n    this._overlayIdIndex = {}\n    this._overlays = optionsInner.overlays\n    this._overlays.forEach(overlay => this._addOverlayInternal(overlay))\n    \n    // 监听view视图缩放事件\n    listen(this.view, EventType.CHANGE, this._handleViewChange, this)\n    this.dispatchEvent(EventType.VIEW_CHANGED)\n    \n    // add mouse wheel events listener\n    listen(this.viewport, BrowserEvent.MOUSE_WHEEL, this._handleMouseWheelEvent, this)\n    listen(this.viewport, BrowserEvent.WHEEL, this._handleMouseWheelEvent, this)\n  }\n\n  /**\n   * 设置map的父容器,\n   * 所有的图层对象、组件对象的父容器\n   *\n   * @method createViewport\n   * @private\n   */\n  _createViewport () {\n    const viewport = document.createElement('DIV')\n    viewport.className = 'dt-viewport'\n    viewport.style.position = 'relative'\n    viewport.style.overflow = 'hidden'\n    viewport.style.width = '100%'\n    viewport.style.height = '100%'\n\n    this._viewport = viewport\n  }\n  \n  /**\n   * 获取overlay的容器\n   *\n   * @property overlayContainer\n   * @returns {Element|*}\n   */\n  get overlayContainer () { return this._overlayContainer }\n  \n  /**\n   * 获取overlay容器的结束事件\n   *\n   * @property overlayContainerStopEvent\n   * @returns {Element|*}\n   */\n  get overlayContainerStopEvent () { return this._overlayContainerStopEvent }\n  \n  /**\n   * 获取viewport\n   *\n   * @property viewport\n   * @returns {Element|*}\n   */\n  get viewport () { return this._viewport }\n\n  /**\n   * 地图渲染器对象;默认渲染方式为canvas方式\n   *\n   * @method createRenderer\n   * @private\n   */\n  _createRenderer () {\n    this._renderer = new CanvasRenderer(this.viewport, this)\n  }\n\n  /**\n   * 创建浏览器事件的监听器\n   *\n   * 浏览器事件包括{mousedown|mousemove|mouseup|mouseover|mouseup}\n   *\n   * @method createBrowserEventHandler\n   * @private\n   */\n  _createBrowserEventHandler () {\n    this._browserEventHandler = new BrowserEventHandler(this, this.viewport)\n\n    /**\n     * 监听浏览器上的鼠标事件 mousemove,mouseup,mousedown\n     * 并处理浏览器事件\n     */\n    for (let key in BrowserEvent) {\n      listen(this._browserEventHandler, BrowserEvent[key],\n        this._handleBrowserEvent, this)\n    }\n  }\n  \n  /**\n   * Handle the mouse wheel event\n   * @param wheelEvent\n   * @private\n   */\n  _handleMouseWheelEvent (wheelEvent) {\n    const type = wheelEvent.type\n    const browserEvent = new BrowserEvent(this, wheelEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   *\n   * @param keyboardEvent\n   * @private\n   */\n  _handleKeyboardEvent (keyboardEvent) {\n    const type = keyboardEvent.type\n    const browserEvent = new BrowserEvent(this, keyboardEvent, type)\n    this._handleBrowserEvent(browserEvent)\n  }\n  \n  /**\n   * Handle browser events\n   * @param browserEvent\n   * @private\n   */\n  _handleBrowserEvent (browserEvent) {\n    const cpts = this.components\n    let i\n\n    if (this.dispatchEvent(browserEvent) !== false) {\n      for (i = cpts.length - 1; i >= 0; i--) {\n        let cpt = cpts[i]\n\n        if (!cpt.active) {\n          continue\n        }\n\n        let cont = cpt.handleMouseEvent(browserEvent)\n\n        if (!cont) {\n          break\n        }\n      }\n    }\n  }\n  \n  /**\n   * 渲染map\n   *\n   * @method renderFrame\n   * @private\n   */\n  _renderFrame () {\n    const size = this.size\n    const view = this.view\n    let frameState = null\n\n    const extent = ExtentUtil.createEmpty()\n    const viewState = view.getViewState()\n    frameState = {\n      size,\n      viewState,\n      pixelRatio: 1,\n      extent,\n      toPixelTransform: this._toPixelTransform,\n      toCoordinateTransform: this._toCoordinateTransform,\n    }\n    \n    if (frameState) {\n      frameState.extent = ExtentUtil.getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent)\n    }\n    \n    this._frameState = frameState\n    this._renderer.renderFrame(frameState)\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    if (this._animationDelayKey === undefined) {\n      this._animationDelayKey = window.requestAnimationFrame(this._animationDelay)\n    }\n  }\n  \n  /**\n   * Render map while the view has been changed\n   * @private\n   */\n  _handleViewChange () {\n    this.render()\n    this.dispatchEvent(EventType.VIEW_CHANGED)\n  }\n  \n  /**\n   * 是否渲染\n   *\n   * @method isRendered\n   * @returns {Boolean}\n   */\n  isRendered () {\n    return !!this._frameState\n  }\n\n  /**\n   * Size读写器,当前地图的大小\n   *\n   * @property size\n   * @returns {Number}\n   */\n  get size () { return this._size }\n  set size (value) {\n    this._size = value\n  }\n\n  /**\n   * 获取组件\n   *\n   * @method components\n   * @returns {Array}\n   */\n  get components () { return this._components }\n  \n  /**\n   * map中控件集合\n   * @property controls\n   * @type {[]}\n   */\n  get controls () { return this._controls }\n\n  /**\n   * 当前存储在Map中的图层集合\n   *\n   * @property layers\n   * @type {Array}\n   */\n  get layers () { return this._layers }\n  set layers (value) {\n    if (Array.isArray(value)) {\n      value.forEach( layer => {\n        this.addLayer(layer)\n      })\n    }\n  }\n\n  /**\n   * target 读写器\n   *\n   * @property target\n   * @type\n   */\n  get target () { return this._target }\n  set target (value) {\n    this._target = value\n    const targetElement = document.getElementById(this._target)\n    targetElement.appendChild(this.viewport)\n  \n    // 监听键盘点击和抬起事件\n    listen(document, BrowserEvent.KEYDOWN,\n      this._handleKeyboardEvent, this),\n    listen(document, BrowserEvent.KEYPRESS,\n        this._handleKeyboardEvent, this)\n  \n    // 监听浏览器窗口变化，并做自适应\n    const handleRize = this.updateSize.bind(this)\n    window.addEventListener(EventType.RESIZE, handleRize, false)\n    \n    this.updateSize()\n    this.render()\n  }\n\n  /**\n   * 用于添加一个Component的方法接口\n   *\n   * @method addComponents\n   * @param cpt {Component} Componnet的一个子类\n   */\n  addComponents (cpt) {\n    this.components.push(cpt)\n    cpt.map = this\n  }\n  \n  /**\n   * 添加一个控件到地图中\n   * @method addControl\n   * @param control\n   */\n  addControl (control) {\n    this.controls.push(control)\n    control.map = this\n  }\n\n  /**\n   * 添加layer\n   *\n   * @method addLayer\n   * @param layer\n   */\n  addLayer (layer) {\n    this.layers.push(layer)\n    layer.map = this\n  }\n  \n  /**\n   * 获取当前地图中的矢量图层\n   *\n   * @method getFeaturesLayer\n   * @return {Array}\n   */\n  getFeaturesLayer () {\n    return this.layers.filter( layer => layer instanceof FeatureLayer )\n  }\n  \n  /**\n   *\n   * @param overlay\n   * @private\n   */\n  _addOverlayInternal (overlay) {\n    const id = overlay.overlayId\n    if (id !== undefined) {\n      this._overlayIdIndex[id.toString()] = overlay\n    }\n    \n    overlay.map = this\n  }\n  \n  /**\n   *\n   * getTargetElement\n   * @returns {Object}\n   */\n  getTargetElement () {\n    const target = this.target\n    if(target !== undefined) {\n      return typeof target === 'string' ?\n        document.getElementById(target) :\n        target\n    }else{\n      return null\n    }\n  }\n  \n  /**\n   * 遍历鼠标点位置的所有feature\n   *\n   * @method forEachFeatureAtPiexl\n   * @param piexl {Array}\n   * @param callback\n   * @param tolerance\n   * @returns {eature}\n   */\n  forEachFeatureAtPiexl (piexl,callback,tolerance) {\n    if (!this._frameState) {\n      return\n    }\n    \n    const coordinate = this.getCoordinateFromPixel(piexl)\n    const hitTolerance = tolerance\n    \n    const layers = this.getFeaturesLayer()\n    let result = null\n    for (let i = 0, ii = layers.length; i < ii; i++){\n      let layer = layers[i]\n      if (layer.visible) {\n        result = layer.forEachFeatureAtPiexl(this._frameState,coordinate,callback,hitTolerance)\n        if (result) {\n          return callback(result, layer)\n        }\n      }\n    }\n    \n    return result\n  }\n  \n  /**\n   * 更新map viewport的大小\n   *\n   * @method updateSize\n   */\n  updateSize () {\n    const targetElement = this.getTargetElement()\n    if (!targetElement) {\n      this.size = undefined\n    } else {\n      const computedStyle = getComputedStyle(targetElement)\n      this.size = [\n        targetElement.offsetWidth -\n        Number.parseFloat(computedStyle['borderLeftWidth']) -\n        Number.parseFloat(computedStyle['paddingLeft']) -\n        Number.parseFloat(computedStyle['paddingRight']) -\n        Number.parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n        Number.parseFloat(computedStyle['borderTopWidth']) -\n        Number.parseFloat(computedStyle['paddingTop']) -\n        Number.parseFloat(computedStyle['paddingBottom']) -\n        Number.parseFloat(computedStyle['borderBottomWidth'])\n      ]\n    }\n  }\n\n  /**\n   * 获取当前视图鼠标的坐标\n   *\n   * @method getEventPixel\n   * @param {Event} event Event.\n   * @return {Array}\n   * @api stable\n   */\n  getEventPixel (event) {\n    // 获取viewport元素在浏览器视图窗口总的位置(left,top,bottom,right)\n    const viewportPosition = this.viewport.getBoundingClientRect()\n    // const eventPosition = event.changedTouches ? event.changedTouches[0] : event\n    const eventPosition = event\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ]\n  }\n  \n  /**\n   * 把坐标数据转换到标准坐标系中\n   *\n   * @method getCoordinateFromPixel\n   * @param pixelPoint {Array}\n   * @returns {Array}\n   */\n  getCoordinateFromPixel (pixelPoint) {\n    // console.log('转换到标准坐标')\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply( frameState.toCoordinateTransform, pixelPoint.slice())\n    }\n  }\n  \n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   *\n   * getPixelFromCoordinate\n   * @param coordinate\n   * @returns {Array}\n   */\n  getPixelFromCoordinate (coordinate) {\n    const frameState = this._frameState\n    if (!frameState) {\n      return null\n    } else {\n      return Transform.apply(frameState.toPixelTransform, coordinate.slice(0, 2))\n    }\n  }\n\n  /**\n   * 以地图中心点放大\n   * @return {[type]} [description]\n   */\n  zoomIn () {\n    this._zoomByDelta(this._delta)\n  }\n\n  /**\n   * 以地图中心点缩小\n   * @return {[type]} [description]\n   */\n  zoomOut () {\n    this._zoomByDelta(-this._delta)\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  _zoomByDelta (delta) {\n    const view = this.view\n    if (!view) {\n      return\n    }\n    \n    const currentResolution = view.resolution\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta)\n      view.resolution = newResolution\n    }\n  }\n\n  switchToOverview () {\n    const view = this.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n  \n  /**\n   * Parse the options passed inner\n   * parseOptionsInner\n   * @param options\n   * @static\n   * @returns {{rendererClass: CanvasRenderer, components: *, values: Map}}\n   */\n  static parseOptionsInner (options = {}) {\n    \n    const rendererClass = CanvasRenderer\n    \n    const values = {}\n    \n    values['view'] = options.view !== undefined ? options.view : new View()\n    values['target'] = options.target\n    values['layers'] = options.layers !== undefined ? options.layers : []\n    \n    let components\n    if (options.components) {\n      components = options.components\n    } else {\n      components = componentsDefaults()\n    }\n  \n    let controls\n    if (options.controls) {\n      controls = options.controls\n    } else {\n      controls = controlDefaults()\n    }\n    \n    let overlays\n    if (options.overlays !== undefined) {\n      if (Array.isArray(options.overlays)) {\n        overlays = [...options.overlays]\n      }\n    } else {\n      overlays = []\n    }\n    \n    return {\n      rendererClass,\n      components,\n      controls,\n      values,\n      overlays\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/map.js","\nimport SingleImageLayer from '../../lyr/singleimagelayer'\nimport FeatureLayer from '../../lyr/featurelayer'\nimport Renderer from '../renderer'\nimport FeatureLayerRenderer from '../canvas/featurelayerrenderer'\nimport ImageLayerRenderer from '../canvas/imagelayerrenderer'\nimport {createCanvasContext2D} from '../../utils/domutil'\nimport {Transform} from '../../data/matrix/transform'\nimport {RenderEventType} from '../rendereventtype'\nimport {stableSort} from '../../utils/array'\n\nimport RenderEvent from '../renderevent'\n\n\n/**\n * 图形渲染调度器\n *\n */\nexport default class CanvasRenderer extends Renderer {\n\n  constructor (container, map) {\n    super(container, map)\n\n    this._context = null\n    this._canvas = null\n  \n    this._rendererVisible = true\n    this._layerRenderers = []\n    this._transform = Transform.create()\n    \n    this._addToContainer(container)\n  }\n  \n  /**\n   * Add the canvas dom to the container\n   * @param container\n   * @private\n   */\n  _addToContainer (container) {\n    /**\n     * 创建CANVAS元素，并将其添加到container中\n     * 该canvas层作为图形绘制层\n     */\n    let _context = this.context\n    this._canvas = _context.canvas\n    this._canvas.style.width = '100%'\n    this._canvas.style.height = '100%'\n    this._canvas.className = 'dt-unselectable'\n    container.insertBefore(this._canvas, container.childNodes[0] || null)\n  }\n  \n  /**\n   * Render frame\n   * @param frameState\n   */\n  renderFrame (frameState) {\n    if (this.map === null) {\n      return\n    }\n    \n    if (!frameState) {\n      if (this._rendererVisible) {\n        this._canvas.style.display = 'none'\n        this._rendererVisible = false\n    \n        return\n      }\n    }\n    \n    const context = this.context\n    \n    const canvasWidth = frameState.size[0]\n    const canvasHeight = frameState.size[1]\n    \n    if (this._canvas.width !== canvasWidth || this._canvas.height !== canvasHeight) {\n      this._canvas.width = canvasWidth\n      this._canvas.height = canvasHeight\n    } else {\n      // context.clearRect(0,0,canvasWidth,canvasHeight)\n\n      this._canvas.width = canvasWidth\n      this._canvas.height = canvasHeight\n    }\n\n    \n\n    // context.translate(0.5, 0.5)\n\n    const layers = this.map.layers\n  \n    // layers rendered in order\n    stableSort(layers, this.sortByZIndex)\n    \n    // 更新转化运算矩阵\n    this.updateTransform(frameState)\n  \n    this._dispatchComposeEvent(RenderEventType.PRERENDER, frameState)\n    \n    layers.forEach( layer => {\n      if (layer.visible) {\n        let layerRender = this.getLayerRenderer(layer)\n  \n        if (layerRender.prepareFrame(frameState)) {\n          layerRender.composeFrame(frameState,context)\n        }\n      }\n    })\n  \n    this._dispatchComposeEvent(RenderEventType.POSTRENDER, frameState)\n  }\n  \n  /**\n   * Get the layer renderer by the params layer object\n   * @param layer\n   * @returns {*}\n   */\n  getLayerRenderer (layer) {\n    const layerKey = layer.id.toString()\n    // 应用层缓存\n    if (layerKey in this._layerRenderers) {\n      return this._layerRenderers[layerKey]\n    } else {\n      const layerRenderer = this.createLayerRenderer(layer)\n      this._layerRenderers[layerKey] = layerRenderer\n      return layerRenderer\n    }\n  }\n  \n  /**\n   * Create the layer renderer\n   * @param layer\n   * @returns {*}\n   */\n  createLayerRenderer(layer){\n    if (layer instanceof SingleImageLayer) {\n      return new ImageLayerRenderer(layer,this.context)\n    } else if (layer instanceof FeatureLayer) {\n      return new FeatureLayerRenderer(layer, this.context, this.map)\n    } else {\n      return null\n    }\n  }\n  \n  /**\n   * Update the transform\n   * @param frameState\n   */\n  updateTransform (frameState){\n    const viewState = frameState.viewState\n    const coordinateToPixelTransform = frameState.toPixelTransform\n    const pixelToCoordinateTransform = frameState.toCoordinateTransform\n    const size = frameState.size\n    const resolution = viewState.resolution\n    const center = viewState.center\n    const rotation = viewState.rotation\n  \n    Transform.compose(coordinateToPixelTransform,\n          size[0] / 2, size[1] / 2,\n          1 / resolution,  1 / resolution,\n          - rotation,\n          - center[0], - center[1])\n  \n    Transform.invert(Transform.setFromArray(pixelToCoordinateTransform, coordinateToPixelTransform))\n  }\n  \n  /**\n   *\n   * @param state1\n   * @param state2\n   * @returns {number}\n   */\n  sortByZIndex (state1, state2) {\n    return state1.zIndex - state2.zIndex\n  }\n  \n  get canvas(){ return this._canvas }\n  \n  get context(){\n    if(!this._context){\n      this._context = createCanvasContext2D()\n    }\n    \n    return this._context\n  }\n  \n  \n  /**\n   * \n   * @private\n   */\n  _dispatchComposeEvent (type, frameState) {\n    const map = this.map\n    const context = this.context\n    if (map.hasListener(type)) {\n    \n      // const transform = this.getTransform(frameState)\n    \n      const composeEvent = new RenderEvent(type,\n        frameState, context, null)\n      \n      map.dispatchEvent(composeEvent)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/canvasrenderer.js","import BaseObject from '../core/baseobject'\n\n/**\n * 地图渲染器基类，\n * @class Renderer\n * @extends BaseObject\n * @module renderer\n */\nexport default class Renderer extends BaseObject {\n\n  constructor (contianer, map) {\n    super()\n\n    this._map = map\n  }\n  \n  /**\n   * @property map\n   * @type {mk.Map}\n   */\n  get map () { return this._map }\n  \n  /**\n   *\n   * @method renderFrame\n   * @abstract\n   * @param frameState {Object}\n   */\n  renderFrame (frameState) {} // eslint-disable-line no-unused-vars\n\n  /**\n   * @method clear\n   * @abstract\n   */\n  clear () {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderer.js","import LayerRenderer from '../../renderer/canvas/layerrenderer'\nimport PointRender from '../render/pointrender'\nimport LineRender from '../render/linerender'\nimport PolygonRender from '../render/polygonrender'\nimport TextRender from '../render/textrender'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class FeatureLayerRenderer extends LayerRenderer {\n  \n  \n  constructor (layer, context, map) {\n    super(layer, context)\n\n    this._map = map\n  \n    /**\n     *\n     * @type {Map}\n     * @private\n     */\n    this._geometryRenderGroup = new Map()\n  \n    /**\n     *\n     * @type {TextRender}\n     * @private\n     */\n    this._textRender = new TextRender(this.context)\n  \n    /**\n     *\n     * @type {null}\n     * @private\n     */\n    this._maxExtent = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._renderFeatures = []\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderResolution = Number.NaN\n  \n    /**\n     *\n     * @type {[*]}\n     * @private\n     */\n    this._renderExtent = [Infinity, Infinity, -Infinity, -Infinity]\n  \n    /**\n     *\n     * @type {NaN}\n     * @private\n     */\n    this._renderRevision = NaN\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._cacheableThisTime = true\n  \n  }\n  \n  /**\n   *  Get a renderer by geometry type\n   * @param geometry\n   * @returns {*}\n   * @private\n   */\n  _getGeometryRender (geometry) {\n    const type = geometry.geometryType\n    \n    if ( !this._geometryRenderGroup.has(type) ) {\n      this._geometryRenderGroup.set(type, new FeatureLayerRenderer.GeometryRender[type](this.context))\n    }\n    \n    return this._geometryRenderGroup.get(type)\n  }\n \n  \n  _renderFeaturesInOrder (features) {\n    if (features === null || features === undefined) {\n      return features\n    }\n    \n    if (features.length === 0) {\n      return features\n    }\n    \n  }\n\n  _calculaterFeaturesFontSize(features) {\n    const view = this._map.view\n    const originResolution = view._originalResolution\n    const resolutions = view._resolutions\n    const resolution = view._resolution\n\n    if (!resolutions) {\n      return\n    }\n\n    const oriIndex = resolutions.findIndex(r => r == originResolution)\n    const curIndex = resolutions.findIndex(r => r == resolution)\n\n    let deep = curIndex-oriIndex\n    if (deep <= 0) {\n      deep = 0\n    }\n\n    let font = 12 + (deep * 2)\n    if (font >= 24) {\n      font = 24\n    }\n\n    // const fontStr = `normal ${font}px Arial`\n\n    features.forEach(feature => {\n      const style = feature.style[0]\n      const fontStr = style.textStyle.font\n      \n      const boldFont = `${fontStr.split(' ')[0]} ${font}px Arial`\n\n      style.textStyle.font = boldFont\n    })\n\n  }\n  \n  /**\n   * 1、对渲染对象需要做切割 （当前范围内）\n   */\n  prepareFrame (frameState) {\n    const layer = this.layer\n    const frameExtent = frameState.extent\n    const viewState = frameState.viewState\n    const resolution = viewState.resolution\n    const layerRevision = layer.revision\n    const featureLayerRenderBuffer = layer.renderBuffer\n    \n    const renderExtent = ExtentUtil.buffer(frameExtent,\n      featureLayerRenderBuffer * resolution)\n    \n    if (this._renderResolution === resolution &&\n        this._renderRevision === layerRevision &&\n        ExtentUtil.containsExtent(this._renderExtent, renderExtent)) {\n      this._cacheableThisTime = true\n      \n      // return true\n    }\n  \n    // 加载当前屏的图形\n    const features = this.layer.loadFeature(renderExtent)\n\n    this._cacheableThisTime = false\n    this._renderFeatures = features\n    this._maxExtent = renderExtent\n    this._renderResolution = resolution\n    this._renderExtent = renderExtent\n    this._renderRevision = layerRevision\n    \n    if (features.length === 0) {\n      return false\n    }\n    \n    return true\n  }\n  \n  /**\n   *\n   */\n  composeFrame (frameStateOpt, context) {\n    const frameState = frameStateOpt\n    const viewState = frameState.viewState\n    const layer = this.layer\n    const features = this._renderFeatures\n    const resolution = viewState.resolution\n  \n    const transform = this.getTransform(frameState, 0)\n  \n    this.preCompose(context, frameState, transform)\n    \n    // Clip the current extent so that the parts of geometries\n    // will not be rendered\n    this._clipExtent(transform, context)\n    \n    features.forEach(feature => {\n      let renderStyle\n      \n      if (feature.style) {\n        renderStyle = feature.style\n      } else {\n        let styleFunction = layer.styleFunction\n        if (styleFunction) {\n          renderStyle = styleFunction(feature, resolution)\n  \n          // 应用图层样式\n          feature.style = this._cloneRenderStyle(renderStyle)\n        }\n      }\n      \n      let geomertyRender = this._getGeometryRender(feature.geometry)\n      this._resetRender(geomertyRender)\n      geomertyRender.render(feature, renderStyle, transform)\n  \n      /**\n       * Render text\n       */\n      if (feature.textDisplay) {\n        this._calculaterFeaturesFontSize([feature])\n        this._textRender.render(feature, feature.style, transform)\n      }\n    })\n  \n    context.restore()\n    \n    this.postCompose(context, frameState, transform)\n    \n    return true\n  }\n  \n  /**\n   *\n   * @param renderStyle\n   * @returns {*}\n   * @private\n   */\n  _cloneRenderStyle (renderStyle) {\n    if (renderStyle) {\n      const newStyle = []\n      renderStyle.forEach( rs => {\n        newStyle.push(rs.clone())\n      })\n      \n      return newStyle\n    }\n    \n    return null\n  }\n  \n  /**\n   * Clip the context\n   * @param transform\n   * @private\n   */\n  _clipExtent (transform, context) {\n    const flatClipCoords = this.getClipCoords(transform)\n    \n    context.save()\n    context.beginPath()\n    context.moveTo(flatClipCoords[0], flatClipCoords[1])\n    context.lineTo(flatClipCoords[2], flatClipCoords[3])\n    context.lineTo(flatClipCoords[4], flatClipCoords[5])\n    context.lineTo(flatClipCoords[6], flatClipCoords[7])\n    context.clip()\n  }\n  \n  /**\n   * Get clip coordinates\n   * @param transform\n   * @returns {[*,*,*,*,*,*,*,*]}\n   */\n  getClipCoords (transform) {\n    const maxExtent = this._maxExtent\n    const minX = maxExtent[0]\n    const minY = maxExtent[1]\n    const maxX = maxExtent[2]\n    const maxY = maxExtent[3]\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY]\n    Transform.transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords)\n    return flatClipCoords\n  }\n  \n  /**\n   *\n   * @param geomertyRender\n   * @private\n   */\n  _resetRender (geomertyRender) {\n    if (!this._cacheableThisTime) {\n      geomertyRender.resetRenderOption()\n    }\n  }\n  \n  preCompose () {\n    \n  }\n  \n  postCompose () {\n    \n  }\n  \n}\n\nFeatureLayerRenderer.GeometryRender = {}\n\nFeatureLayerRenderer.GeometryRender['point'] = PointRender\nFeatureLayerRenderer.GeometryRender['line'] = LineRender\nFeatureLayerRenderer.GeometryRender['polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['multi_polygon'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['extent'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['parallelogram'] = PolygonRender\nFeatureLayerRenderer.GeometryRender['rotatable_extent'] = PolygonRender\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/featurelayerrenderer.js","import BaseObject from '../../core/baseobject'\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport {ImageState} from '../../lyr/image/imagestate'\nimport {EventType} from '../../meek/eventtype'\nimport {Canvas} from '../../utils/canvas'\n\nimport {listen} from '../../core/eventmanager'\n\nexport default class LayerRenderer extends BaseObject {\n  \n  constructor (layer,context) {\n    super()\n    \n    this._context = context\n    this._layer = layer\n  \n    this.renderedResolution = undefined\n    \n    this._transform = ExtentUtil.createEmpty()\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param offsetX\n   * @returns {*|!Transform}\n   */\n  getTransform (frameState, offsetX) {\n    const viewState = frameState.viewState\n    const pixelRatio = 1\n    const dx1 = pixelRatio * frameState.size[0] / 2\n    const dy1 = pixelRatio * frameState.size[1] / 2\n    const sx = pixelRatio / viewState.resolution\n    const sy = sx\n    const angle = -viewState.rotation\n    const dx2 = -viewState.center[0] + offsetX\n    const dy2 = -viewState.center[1]\n    return Transform.compose(this._transform, dx1, dy1, sx, sy, angle, dx2, dy2)\n  }\n  \n  /**\n   * Load the image\n   * @param image\n   * @returns {boolean}\n   */\n  loadImage (image) {\n    let imageState = image.state\n    if (imageState !== ImageState.LOADED &&\n        imageState !== ImageState.ERROR) {\n      listen(image, EventType.CHANGE, this._handleImageChange, this)\n    }\n    \n    if (imageState === ImageState.IDLE) {\n      image.load()\n      imageState = image.state\n    }\n    \n    return imageState === ImageState.LOADED\n  }\n  \n  /**\n   *\n   * @param event\n   * @private\n   */\n  _handleImageChange (event) {\n    const image = event.target\n    if (image.state === ImageState.LOADED) {\n      this.renderIfReadyAndVisible()\n    }\n  }\n  \n  /**\n   *\n   */\n  renderIfReadyAndVisible () {\n    const layer = this.layer\n    // if (layer.visible && layer.getSourceState() == State.READY) {\n    if (layer.visible) {\n      layer.changed()\n      // this.changed()\n    }\n  }\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param extent\n   */\n  clip (context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio\n    const width = frameState.size[0] * pixelRatio\n    const height = frameState.size[1] * pixelRatio\n    const rotation = frameState.viewState.rotation\n    const topLeft = ExtentUtil.getTopLeft((extent))\n    const topRight = ExtentUtil.getTopRight((extent))\n    const bottomRight = ExtentUtil.getBottomRight((extent))\n    const bottomLeft = ExtentUtil.getBottomLeft((extent))\n    \n    Transform.apply(frameState.toPixelTransform, topLeft)\n    Transform.apply(frameState.toPixelTransform, topRight)\n    Transform.apply(frameState.toPixelTransform, bottomRight)\n    Transform.apply(frameState.toPixelTransform, bottomLeft)\n    \n    context.save()\n    Canvas.rotateAtOffset(context, -rotation, width / 2, height / 2)\n    context.beginPath()\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio)\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio)\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio)\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio)\n    context.clip()\n    Canvas.rotateAtOffset(context, rotation, width / 2, height / 2)\n  }\n  \n  \n  /**\n   *\n   * @returns {*}\n   */\n  get layer () { return this._layer }\n  get context () {return this._context}\n  \n  /**\n   *\n   * @param frameStateOpt\n   */\n  prepareFrame (frameStateOpt) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param frameStateOpt\n   * @param context\n   */\n  composeFrame (frameStateOpt, context) {}// eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  postCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n  \n  /**\n   *\n   * @param context\n   * @param frameState\n   * @param optTransform\n   */\n  preCompose (context, frameState, optTransform){} // eslint-disable-line no-unused-vars\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/layerrenderer.js","/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3x3 martrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\nexport const Transform = {\n  \n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  tmp_: new Array(6),\n  \n  /**\n   * 恒等矩阵\n   *\n   * Create an identity（恒等） transform.\n   * @return {!Transform} Identity transform.\n   */\n  create: function () {\n    return [1, 0, 0, 1, 0, 0]\n  },\n  \n  /**\n   * Resets the given transform to an identity（恒等） transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Transform.\n   */\n  reset: function (transform) {\n    return transform.set(transform, 1, 0, 0, 1, 0, 0)\n  },\n  \n  /**\n   *\n   * @param flatCoordinates\n   * @param offset\n   * @param end\n   * @param stride\n   * @param transform\n   * @param opt_dest\n   * @returns {Array}\n   */\n  transform2D: function (flatCoordinates, offset, end, stride, transform, opt_dest) {\n    const dest = opt_dest ? opt_dest : []\n    let i = 0\n    let j\n    \n    for (j = offset; j < end; j += stride) {\n      const x = flatCoordinates[j]\n      const y = flatCoordinates[j + 1]\n      dest[i++] = transform[0] * x + transform[2] * y + transform[4]\n      dest[i++] = transform[1] * x + transform[3] * y + transform[5]\n    }\n    \n    if (opt_dest && dest.length != i) {\n      dest.length = i\n    }\n    \n    return dest\n  },\n  \n  /**\n   * 矩阵相乘\n   *\n   * Multiply（相乘） the underlying matrices of two transforms and return the result in\n   * the first transform.\n   *\n   * @param {!Transform} transform1 Transform parameters of matrix 1.\n   * @param {!Transform} transform2 Transform parameters of matrix 2.\n   * @return {!Transform} transform1 multiplied with transform2.\n   */\n  multiply: function (transform1, transform2) {\n    const a1 = transform1[0]\n    const b1 = transform1[1]\n    const c1 = transform1[2]\n    const d1 = transform1[3]\n    const e1 = transform1[4]\n    const f1 = transform1[5]\n    const a2 = transform2[0]\n    const b2 = transform2[1]\n    const c2 = transform2[2]\n    const d2 = transform2[3]\n    const e2 = transform2[4]\n    const f2 = transform2[5]\n    \n    transform1[0] = a1 * a2 + c1 * b2\n    transform1[1] = b1 * a2 + d1 * b2\n    transform1[2] = a1 * c2 + c1 * d2\n    transform1[3] = b1 * c2 + d1 * d2\n    transform1[4] = a1 * e2 + c1 * f2 + e1\n    transform1[5] = b1 * e2 + d1 * f2 + f1\n    \n    return transform1\n  },\n  \n  /**\n   * Set the transform components a-f on a given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} a The a component of the transform.\n   * @param {number} b The b component of the transform.\n   * @param {number} c The c component of the transform.\n   * @param {number} d The d component of the transform.\n   * @param {number} e The e component of the transform.\n   * @param {number} f The f component of the transform.\n   * @return {!Transform} Matrix with transform applied.\n   */\n  set: function (transform, a, b, c, d, e, f) {\n    transform[0] = a\n    transform[1] = b\n    transform[2] = c\n    transform[3] = d\n    transform[4] = e\n    transform[5] = f\n    return transform\n  },\n  \n  /**\n   * Set transform on one matrix from another matrix.\n   *\n   * @param {!Transform} transform1 Matrix to set transform to.\n   * @param {!Transform} transform2 Matrix to set transform from.\n   * @return {!Transform} transform1 with transform from transform2 applied.\n   */\n  setFromArray: function (transform1, transform2) {\n    transform1[0] = transform2[0]\n    transform1[1] = transform2[1]\n    transform1[2] = transform2[2]\n    transform1[3] = transform2[3]\n    transform1[4] = transform2[4]\n    transform1[5] = transform2[5]\n    return transform1\n  },\n  \n  /**\n   * 矩阵运算\n   * 将坐标值矩阵运算\n   *\n   * Transforms the given coordinate with the given transform returning the\n   * resulting, transformed coordinate. The coordinate will be modified in-place.\n   *\n   * @param {Transform} transform The transformation.\n   * @param {Coordinate|Pixel} coordinate The coordinate to transform.\n   * @return {Coordinate|Pixel} return coordinate so that operations can be\n   *     chained together.\n   */\n  apply: function (transform, coordinate) {\n    const x = coordinate[0]\n    const y = coordinate[1]\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4]\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5]\n    return coordinate\n  },\n  \n  /**\n   * Applies rotation to the given transform.\n   *\n   * 矩阵旋转\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} angle Angle in radians.\n   * @return {!Transform} The rotated transform.\n   */\n  rotate: function (transform, angle) {\n    const cos = Math.cos(angle)\n    const sin = Math.sin(angle)\n    return transform.multiply(transform, transform.set(transform.tmp_, cos, sin, -sin, cos, 0, 0))\n  },\n  \n  /**\n   *  Applies scale to a given transform.\n   *\n   * 矩阵缩放\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} x Scale factor x.\n   * @param {number} y Scale factor y.\n   * @return {!Transform} The scaled transform.\n   */\n  scale: function (transform, x, y) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, x, 0, 0, y, 0, 0))\n  },\n  \n  /**\n   * Applies translation to the given transform.\n   *\n   * 矩阵转换\n   *\n   * @param {!Transform} transform Transform.\n   * @param {number} dx Translation x.\n   * @param {number} dy Translation y.\n   * @return {!Transform} The translated transform.\n   */\n  translate: function (transform, dx, dy) {\n    return transform.multiply(transform,\n      transform.set(transform.tmp_, 1, 0, 0, 1, dx, dy))\n  },\n  \n  /**\n   * Creates a composite transform given an initial translation, scale, rotation, and\n   * final translation (in that order only, not commutative).\n   *\n   * 复杂矩形运算\n   *\n   * @param {!Transform} transform The transform (will be modified in place).\n   * @param {number} dx1 Initial translation x.\n   * @param {number} dy1 Initial translation y.\n   * @param {number} sx Scale factor x.\n   * @param {number} sy Scale factor y.\n   * @param {number} angle Rotation (in counter-clockwise radians).\n   * @param {number} dx2 Final translation x.\n   * @param {number} dy2 Final translation y.\n   * @return {!Transform} The composite transform.\n   */\n  compose: function (transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    const sin = Math.sin(angle)\n    const cos = Math.cos(angle)\n    transform[0] = sx * cos\n    transform[1] = sy * sin\n    transform[2] = -sx * sin\n    transform[3] = sy * cos\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1\n    return transform\n  },\n  \n  /**\n   * Invert the given transform.\n   *\n   * @param {!Transform} transform Transform.\n   * @return {!Transform} Inverse of the transform.\n   */\n  invert: function (transform) {\n    const det = Transform.determinant(transform)\n    \n    const a = transform[0]\n    const b = transform[1]\n    const c = transform[2]\n    const d = transform[3]\n    const e = transform[4]\n    const f = transform[5]\n    \n    transform[0] = d / det\n    transform[1] = -b / det\n    transform[2] = -c / det\n    transform[3] = a / det\n    transform[4] = (c * f - d * e) / det\n    transform[5] = -(a * f - b * e) / det\n    \n    return transform\n  },\n  \n  /**\n   * Returns the determinant of the given matrix.\n   *\n   * 行列式\n   *\n   * @param {!Transform} mat Matrix.\n   * @return {number} Determinant.\n   */\n  determinant: function (mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2]\n  }\n}\n\nexport default {\n  Transform\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/matrix/transform.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class PointRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   * Render a point\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if(!feature){\n      return\n    }\n    \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geomerty = feature.geometry\n  \n    const coordinates = [geomerty.x, geomerty.y]\n\n    // TODO  Should be cached\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    const x = pixelCoordinates[0]\n    const y = pixelCoordinates[1]\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n      \n      let renderOptions = {\n        centerX: (x + 0.5) | 0,\n        centerY: (y + 0.5) | 0,\n        radius: styleObj.size / 2 || styleObj.borderStyle.width / 2,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n      \n      this.drawCircle(ctx,renderOptions)\n    }\n    \n  }\n  \n  drawCircle (ctx,renderOptions) {\n    // console.log('类型为圆，开始绘制圆')\n    ctx.save()\n    ctx.beginPath()\n    ctx.arc(renderOptions.centerX, renderOptions.centerY,\n            renderOptions.radius, 0, 2 * Math.PI, true)\n  \n    if (renderOptions.fillStyle) {\n      ctx.fillStyle = renderOptions.fillStyle\n      ctx.fill()\n    }\n    \n    const borderStyle = renderOptions.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n\n      if (borderStyle.lineDash) {\n        ctx.setLineDash(borderStyle.lineDash)\n      }\n\n      ctx.stroke()\n    }\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/pointrender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\n\nimport BaseObject from '../../core/baseobject'\nimport {equals} from '../../utils/array'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class GeomertyRender extends BaseObject {\n  constructor (context) {\n    super()\n  \n    /**\n     *\n     */\n    this._context = context\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._pixelCoordinates = null\n  \n    /**\n     *\n     * @type {*}\n     */\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   */\n  resetRenderOption () {\n    this._pixelCoordinates = null\n    this.renderedTransform = Transform.create()\n  }\n  \n  /**\n   *\n   * @param transform1\n   * @param transform2\n   */\n  equalsTransform (transform1, transform2) {\n    return equals(transform1, transform2)\n  }\n  \n  /**\n   * context getter\n   * @returns {*}\n   */\n  get context () { return this._context }\n  \n  /**\n   * abstract function\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {} // eslint-disable-line no-unused-vars\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/geomertyrender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\n\nimport {colorToString} from '../../utils/helpers'\nimport {Transform} from '../../data/matrix/transform'\n\nexport default class LineRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param renderStyle\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const transform2D =  Transform.transform2D\n    let coordinates = []\n    // TODO find a way to cache the rendered data\n    if (this._pixelCoordinates &&\n        this.equalsTransform(transform, this.renderedTransform)) {\n      coordinates = this._pixelCoordinates\n      // console.log('get the rendered data from chche for line')\n    } else {\n      const geometryCoordinates = geometry.getCoordinates()\n  \n      geometryCoordinates.forEach(function(points){\n        let coordinate = transform2D(\n          points, 0, points.length, 2,\n          transform)\n    \n        coordinate[0] = (coordinate[0] + 0.5 ) | 0\n        coordinate[1] = (coordinate[1] + 0.5 ) | 0\n    \n        coordinates.push(coordinate)\n      })\n  \n      this._pixelCoordinates = coordinates\n      Transform.setFromArray(this.renderedTransform, transform)\n      // console.log('caclulate the rendered data for line')\n    }\n    \n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: coordinates,\n        width: styleObj.width,\n        strokeStyle: colorToString(styleObj.color,styleObj.alpha),\n        lineCap: styleObj.lineCap,\n        lineJion: styleObj.lineJion,\n        miterLimit: styleObj.miterLimit,\n        hasDash: styleObj.style === LineStyle.DASH ? true : false\n      }\n      \n      this.drawLine(ctx, renderOptions)\n    }\n  }\n  \n  drawLine (ctx, renderOpt) {\n    ctx.save()\n    ctx.strokeStyle = renderOpt.strokeStyle\n    ctx.lineWidth = renderOpt.width\n  \n    ctx.lineCap = renderOpt.lineCap\n    ctx.lineJoin = renderOpt.lineJion\n    ctx.miterLimit = renderOpt.miterLimit\n  \n    ctx.beginPath()\n    const coordinates = renderOpt.coordinates\n    ctx.moveTo(coordinates[0][0], coordinates[0][1])\n    for (let i = 0,ii = coordinates.length ; i < ii - 1 ; i++) {\n      ctx.lineTo(coordinates[i+1][0],coordinates[i+1][1])\n    }\n  \n    if (renderOpt.hasDash) {\n      ctx.setLineDash([5, 5])\n    }\n  \n    ctx.stroke()\n    \n    ctx.closePath()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/linerender.js","/**\n * Created by zhangyong on 2017/3/20.\n */\nimport Geometry from '../../geometry/geometry'\nimport GeometryRender from '../render/geomertyrender'\nimport LineStyle from '../../style/linestyle'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n\nexport default class PolygonRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  }\n  \n  /**\n   * Render a polygon\n   * @param feature\n   * @param transform\n   * @returns {boolean}\n   */\n  render (feature, renderStyle, transform) {\n    if (!feature) {\n      return\n    }\n  \n    const ctx = this.context\n    const styleArray = renderStyle\n    const geometry = feature.geometry\n  \n    const  transform2D =  Transform.transform2D\n    let geometryCoordinages = geometry.getCoordinates()\n    if (geometry.geometryType === Geometry.EXTENT) {\n      geometryCoordinages = [geometryCoordinages]\n    }\n    \n    if (!geometryCoordinages) {\n      return false\n    }\n    \n    if (geometryCoordinages.length === 0) {\n      return false\n    }\n  \n    // TODO find a way to cache the rendered data\n    let coordinates = []\n    let renderCoords = []\n    \n    if (this._pixelCoordinates &&\n      this.equalsTransform(transform, this.renderedTransform)) {\n      renderCoords = this._pixelCoordinates\n    } else {\n      if (geometry.geometryType === Geometry.MULTI_POLYGON) {\n        let polygonCoords = []\n        // 遍历各个多边形\n        geometryCoordinages.forEach( polygon => {\n          polygon.forEach( rings => {\n            rings.forEach( points => {\n              let coordinate = transform2D(\n                points, 0, points.length, 2,\n                transform)\n  \n              coordinate[0] = (coordinate[0] + 0.5 ) | 0\n              coordinate[1] = (coordinate[1] + 0.5 ) | 0\n  \n              coordinates.push(coordinate)\n            })\n  \n            polygonCoords.push(coordinates)\n            coordinates = []\n          })\n          \n          renderCoords.push(polygonCoords)\n          polygonCoords = []\n        })\n        \n        this.renderMutilPolygon (ctx, styleArray, renderCoords)\n      } else {\n        // 遍历多边形各个环\n        geometryCoordinages.forEach( rings => {\n          rings.forEach(points => {\n            let coordinate = transform2D(\n              points, 0, points.length, 2,\n              transform)\n      \n            coordinate[0] = (coordinate[0] + 0.5 ) | 0\n            coordinate[1] = (coordinate[1] + 0.5 ) | 0\n      \n            coordinates.push(coordinate)\n          })\n    \n          renderCoords.push(coordinates)\n          coordinates = []\n        })\n      }\n      \n      this.renderPolygon(ctx, styleArray, renderCoords)\n    }\n  \n    this._pixelCoordinates = renderCoords\n    Transform.setFromArray(this.renderedTransform, transform)\n  \n    return true\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderMutilPolygon (ctx, styleArray, renderCoords) {\n    renderCoords.forEach( polygon => {\n      this.renderPolygon(ctx, styleArray, polygon)\n    })\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param styleArray\n   * @param renderCoords\n   */\n  renderPolygon (ctx, styleArray, renderCoords) {\n    const len = styleArray.length\n    for(let i = 0; i < len ; i ++){\n      let styleObj = styleArray[i]\n    \n      let renderOptions = {\n        coordinates: renderCoords,\n        fillStyle: colorToString(styleObj.color,styleObj.alpha),\n        borderStyle: styleObj.borderStyle\n      }\n    \n      this.drawStylePolygon(ctx, renderOptions)\n    }\n  }\n  \n  /**\n   * 绘制多边形，需要注意多边形各个环的绘制\n   * @param ctx\n   * @param renderOpt\n   */\n  drawStylePolygon (ctx, renderOpt) {\n    ctx.save()\n    \n    if (renderOpt.fillStyle) {\n      ctx.fillStyle = renderOpt.fillStyle\n    }\n  \n    const borderStyle = renderOpt.borderStyle\n    if (borderStyle) {\n      ctx.strokeStyle = colorToString(borderStyle.color,borderStyle.alpha)\n      ctx.lineWidth = borderStyle.width\n    \n      if (borderStyle.style === LineStyle.DASH) {\n        ctx.setLineDash([5, 5])\n      }\n    }\n    \n    const coords = renderOpt.coordinates\n    coords.forEach( (coordinates, index) => {\n      if (index === 0) {\n        ctx.beginPath()\n      }\n      \n      ctx.moveTo(coordinates[0][0],coordinates[0][1])\n      for(let k = 1, kk = coordinates.length ; k < kk ; k ++){\n        let cd = coordinates[k]\n        ctx.lineTo(cd[0],cd[1])\n      }\n  \n      ctx.closePath()\n    })\n  \n    ctx.fill()\n    ctx.stroke()\n    ctx.restore()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/polygonrender.js","/**\n * Created by zhangyong on 2017/3/24.\n */\n\nimport GeometryRender from './geomertyrender'\nimport {Transform} from '../../data/matrix/transform'\nimport {colorToString} from '../../utils/helpers'\n// import TextStyle from '../../style/textstyle'\n// import LineStyle from '../../style/linestyle'\n\nexport default class TextRender extends GeometryRender {\n  \n  constructor (context) {\n    super(context)\n  \n    this._pixelCoordinates = []\n  }\n  \n  /**\n   *\n   * @param feature\n   * @param transform\n   */\n  render (feature, renderStyle, transform) {\n    let textStyle = renderStyle[0].textStyle\n    if (!feature.displayText || !textStyle) {\n      return\n    }\n    \n    const displayText = String(feature.displayText)\n    textStyle.text = displayText\n\n    const ctx = this.context\n    ctx.save()\n    \n    const geometry = feature.geometry\n    const coordinates = geometry.getFlatInteriorPoint()\n    \n    this._pixelCoordinates = []\n    const pixelCoordinates = Transform.transform2D(\n      coordinates, 0, coordinates.length, 2,\n      transform, this._pixelCoordinates)\n    \n    for (let i = 0, len = pixelCoordinates.length ;i < len ; i += 2) {\n      const xValue = pixelCoordinates[i]\n      const yValue = pixelCoordinates[i + 1]\n      \n      // set the context text style\n      this._setTextStyle(ctx, textStyle)\n  \n      // const offsetX = textStyle.offsetX + 10\n      const offsetX = textStyle.offsetX\n      // const offsetY = textStyle.offsetY + 10\n      const offsetY = textStyle.offsetY - 3\n\n\n      const stroke = textStyle.stroke ? true : false\n      const fill = textStyle.fill ? true : false\n      const text = textStyle.text\n  \n      let x = xValue + offsetX\n      let y = yValue + offsetY\n  \n      let lines = text.split('\\n')\n      const numLines = lines.length\n      let fontSize, lineY\n      if (numLines > 1) {\n        fontSize = Math.round(ctx.measureText('M').width * 1.5)\n        lineY = y - (((numLines - 1) / 2) * fontSize)\n      } else {\n        fontSize = 0\n        lineY = y\n      }\n  \n      for (let lineIndex = 0; lineIndex < numLines; lineIndex++) {\n        const lineText = lines[lineIndex]\n        if (stroke) {\n          ctx.strokeText(lineText, x, lineY)\n        }\n\n        if (fill) {\n          ctx.fillText(lineText, x, lineY)\n        }\n    \n        lineY = lineY + fontSize\n      }\n    }\n  \n    ctx.restore()\n  }\n  \n  /**\n   *\n   * @param ctx\n   * @param textStyle\n   * @private\n   */\n  _setTextStyle (ctx, textStyle) {\n    const borderStyle = textStyle.stroke\n  \n    ctx.font = textStyle.font\n    ctx.strokeStyle = colorToString(borderStyle.color, 1)\n    ctx.fillStyle = colorToString(textStyle.fill, 1)\n    ctx.textBaseline = textStyle.textBaseline\n    ctx.textAlign = textStyle.textAlign\n    ctx.lineWidth = borderStyle.width\n    ctx.lineCap = borderStyle.lineCap\n    ctx.lineJoin = borderStyle.lineJion\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/render/textrender.js","import LayerRenderer from '../../renderer/canvas/layerrenderer'\n\nimport {Transform} from '../../data/matrix/transform'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\n\nexport default class ImageLayerRenderer extends LayerRenderer {\n  constructor (layer) {\n    super(layer)\n    \n    this._image = null\n    \n    this._imageTransform = Transform.create()\n  \n    this.coordinateToCanvasPixelTransform = Transform.create()\n  }\n  \n  /**\n   * @inheritDoc\n   */\n  get image () {\n    return !this._image ? null : this._image.getDomImage()\n  }\n  \n  \n  /**\n   * @inheritDoc\n   */\n  get imageTransform () { return this._imageTransform }\n  \n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @returns {boolean}\n   */\n  prepareFrame (frameState) {\n    const pixelRatio = frameState.pixelRatio\n    const size = frameState.size\n    const viewState = frameState.viewState\n    const viewCenter = viewState.center\n    const viewResolution = viewState.resolution\n    \n    let image\n    const imageLayer = this.layer\n    let renderedExtent = frameState.extent\n    \n    if (!ExtentUtil.isEmpty(renderedExtent)) {\n      const projection = viewState.projection\n\n      image = imageLayer.getImageInternal(renderedExtent,\n        viewResolution, pixelRatio, projection)\n      \n      // Load the image\n      if (image) {\n        const loaded = this.loadImage(image)\n        if (loaded) {\n          this._image = image\n        }\n      }\n    }\n    \n    if (this._image) {\n      image = this._image\n      const imageExtent = image.extent\n      const imageResolution = image.resolution\n      const imagePixelRatio = image.pixelRatio\n      const scale = pixelRatio * imageResolution /\n        (viewResolution * imagePixelRatio)\n      \n      const transform = Transform.compose(this.imageTransform,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, -scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution)\n      \n      Transform.compose(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1])\n    }\n    \n    return !!this.image\n  }\n  \n  /**\n   *\n   * @param frameState\n   * @param layerState\n   * @param context\n   */\n  composeFrame (frameState, context) {\n    this.preCompose(context, frameState)\n    const image = this.image\n    if (image) {\n      // clipped rendering if layer extent is set\n      const extent = undefined\n      const clipped = extent !== undefined &&\n        !ExtentUtil.containsExtent(extent, frameState.extent) &&\n         ExtentUtil.intersects(extent, frameState.extent)\n      \n      if (clipped) {\n        this.clip(context, frameState, extent)\n      }\n  \n      const imageLayer = this.layer\n      const imageTransform = this.imageTransform\n      const alpha = context.globalAlpha\n      context.globalAlpha = imageLayer.opacity\n      \n      const dx = imageTransform[4]\n      const dy = imageTransform[5]\n      const dw = image.width * imageTransform[0]\n      const dh = image.height * imageTransform[3]\n      context.imageSmoothingEnabled = false\n      context.drawImage(image, 0, 0, +image.width, +image.height,\n        Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh))\n      \n      context.globalAlpha = alpha\n      \n      if (clipped) {\n        context.restore()\n      }\n    }\n    \n    this.postCompose(context, frameState)\n  }\n  \n  \n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/canvas/imagelayerrenderer.js","/**\n * Created by zhangyong on 2017/5/15.\n */\n\n\nexport const RenderEventType = {}\n\n/**\n *\n * @type {string}\n */\nRenderEventType.PRERENDER =  'prerender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.POSTRENDER = 'postrender'\n\n/**\n *\n * @type {string}\n */\nRenderEventType.RENDER = 'render'\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/rendereventtype.js","/**\n * Created by zhangyong on 2017/6/27.\n */\n\nimport BaseEvent from '../core/baseevent'\n\n/**\n * @class RenderEvent\n * @extends BaseEvent\n * @module renderer\n * @constructor\n */\nexport default class RenderEvent extends BaseEvent {\n  \n  constructor (type, frameState, context, trasform) {\n    \n    super(type)\n  \n  \n    /**\n     * @property frameState\n     * @type {Object}\n     */\n    this.frameState = frameState\n  \n  \n    /**\n     * @property trasform\n     * @type {Object}\n     */\n    this.trasform = trasform\n  \n    /**\n     *@property context\n     *@type {HTML5.}\n     */\n    this.context = context\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/renderevent.js","import BaseObject from '../core/baseobject'\nimport {listen, unlistenByKey} from '../core/eventmanager'\nimport BrowserEvent from './browserevent'\n\nexport default class BrowserEventHandler extends BaseObject {\n\n  constructor (map, element) {\n    super()\n\n    this.map = map\n\n    /**\n     *\n     * @private\n     */\n    this._element = element\n  \n    /**\n     *\n     * @type {boolean}\n     * @private\n     */\n    this._dragging = false\n  \n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * @private\n     */\n    this._down = null\n  \n    /**\n     *\n     * @type {Array}\n     * @private\n     */\n    this._dragListenerKeys = []\n  \n    /**\n     *\n     * @type {number}\n     * @private\n     */\n    this._clickTimeoutId = 0\n    \n\n    // 事件和对应的处理方法\n    // 映射关系\n    this._mapping = {\n      'mousedown': this._mousedown,\n      'mousemove': this._mousemove,\n      'mouseup': this._mouseup,\n      'mouseover': this._mouseover,\n      'mouseout': this._mouseout\n    }\n\n    this._registerSource()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _registerSource () {\n    // console.log('注册鼠标事件')\n    const events = this.getEvents()\n    events.forEach(eventName =>\n        listen(this._element, eventName, this._mapping[eventName], this))\n  }\n\n  /**\n   * 得到事件\n   *\n   * @method getEvents\n   * @return {Array}\n   */\n  getEvents () {\n    return Object.keys(this._mapping)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousedown (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DOWN)\n    this.dispatchEvent(event)\n  \n    this._dragging = false\n    this._down = e\n    \n    if (this._dragListenerKeys.length === 0) {\n      const documentDom = document\n  \n      this._dragListenerKeys.push(\n        listen(documentDom, BrowserEvent.MOUSE_MOVE, this._mousemove, this),\n        listen(documentDom, BrowserEvent.MOUSE_UP, this._mouseup, this)\n      )\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mousemove (e) {\n  \n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_MOVE)\n  \n    if (event.coordinate === null) {\n      return\n    }\n    \n    this.dispatchEvent(event)\n    \n    if (this._isMoving(e)) {\n      this._dragging = true\n  \n      const newEvent = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_DRAG, this._dragging)\n      this.dispatchEvent(newEvent)\n    }\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseup (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_UP)\n    this.dispatchEvent(event)\n  \n    if (!this._dragging && this._down) {\n      this._emulateClick(this._down)\n    }\n  \n    this._dragListenerKeys.forEach(unlistenByKey)\n    this._dragListenerKeys.length = 0\n    this._dragging = false\n    this._down = null\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseover (e) {\n    let event = new BrowserEvent(this.map, e,BrowserEvent.MOUSE_OVER)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param e\n   * @private\n   */\n  _mouseout (e) {\n    let event = new BrowserEvent(this.map, e, BrowserEvent.MOUSE_OUT)\n    this.dispatchEvent(event)\n  }\n\n  /**\n   *\n   * @param event\n   * @private\n   */\n  _emulateClick (event) {\n    let newEvent = new BrowserEvent(this.map,event,BrowserEvent.CLICK)\n    this.dispatchEvent(newEvent)\n  \n    // double click\n    if (this._clickTimeoutId !== 0) {\n      clearTimeout(this._clickTimeoutId)\n      this._clickTimeoutId = 0\n      newEvent = new BrowserEvent(this.map,event,BrowserEvent.DBLCLICK)\n      this.dispatchEvent(newEvent)\n    } else {\n      // single click\n      this._clickTimeoutId = setTimeout(function() {\n        this._clickTimeoutId = 0\n        let newEvent = new BrowserEvent(this.map,event,BrowserEvent.SINGLE_CLICK)\n        this.dispatchEvent(newEvent)\n      }.bind(this), 250)\n    }\n  }\n\n  /**\n   *\n   * @param event\n   * @return {boolean}\n   * @private\n   */\n  _isMoving (event) {\n    if (this._down === null) {\n      return false\n    }\n    \n    return event.clientX !== this._down.clientX ||\n           event.clientY !== this._down.clientY\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/meek/browsereventhandler.js","import BaseObject from '../core/baseobject'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {Config} from '../meek/config'\n\nimport {linearFindNearest} from '../utils/array'\nimport {clamp} from '../utils/math'\n\n/**\n * View 视图类\n *\n * @class View\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class View extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options) {\n    super()\n    \n    const _innerOptions = Object.assign({}, options)\n    \n    this._applyOptions(_innerOptions)\n  }\n  \n  /**\n   * Parse options and apply to view\n   * @param options\n   * @private\n   */\n  _applyOptions (options) {\n    \n    const resolutionConstraint = this._createResolutionConstraint(options)\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._maxResolution = resolutionConstraint.maxResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minResolution = resolutionConstraint.minResolution\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._zoomFactor = resolutionConstraint.zoomFactor\n  \n    /**\n     * @private\n     * @type {Array.<number>|undefined}\n     */\n    this._resolutions = options.resolutions\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minZoom = resolutionConstraint.minZoom\n  \n    const centerConstraint = this._createCenterConstraint(options)\n    const constraint = resolutionConstraint.constraint\n    const rotationConstraint = this._createRotationConstraint(options)\n  \n    /**\n     * center、resolution、ratation\n     * @private\n     */\n    this._constraints = {\n      center: centerConstraint,\n      resolution: constraint,\n      rotation: rotationConstraint\n    }\n  \n    this.center = options.center !== undefined ?\n         options.center : this._calculateCenter()\n\n    this.resolution = options.resolution !== undefined ?\n      options.resolution : \n      this.constrainResolution(this._maxResolution, options.zoom - this._minZoom)\n\n    // 记录原始 view 参数\n    this._originalCenter = this.center\n    this._originalResolution = this.resolution\n    \n    this.rotation = 0\n    \n    this.dataExtent = resolutionConstraint.extent\n    \n    this._options = options\n  }\n  \n  \n  _createRotationConstraint () {\n    return 0\n  }\n  \n  /**\n   * 创建视图中心限制条件\n   *\n   * @method createCenterConstraint\n   * @param options\n   * @returns {Function}\n   * @private\n   */\n  _createCenterConstraint () {\n    return function (center) {\n      return center\n    }\n  }\n  \n  /**\n   * 创建分辨率限制条件\n   *\n   * @method createResolutionConstraint\n   * @param options\n   * @returns {{constraint: *, maxResolution: *, minResolution: *, minZoom: *, zoomFactor: number}}\n   * @private\n   */\n  _createResolutionConstraint (options) {\n    let resolutionConstraint\n    let maxResolution\n    let minResolution\n    let extent\n  \n    const defaultMaxZoom = Config.DEFAULT_MAX_ZOOM\n    const defaultZoomFactor = Config.DEFAULT_ZOOM_FACTOR\n    const defaultMinZoom = Config.DEFAULT_MIN_ZOOM\n    const defaultTileSize = Config.DEFAULT_TILE_SIZE\n  \n    let minZoom = options.minZoom !== undefined ?\n      options.minZoom : defaultMinZoom\n  \n    let maxZoom = options.maxZoom !== undefined ?\n      options.maxZoom : defaultMaxZoom\n  \n    const zoomFactor = options.zoomFactor !== undefined ?\n      options.zoomFactor : defaultZoomFactor\n  \n    const projection = options.projection\n    extent = projection.extent\n    \n    if (options.resolutions !== undefined) {\n      const resolutions = options.resolutions\n      maxResolution = resolutions[0]\n      minResolution = resolutions[resolutions.length - 1]\n      resolutionConstraint = this.createSnapToResolutions(resolutions)\n    } else {\n      // calculate the default min and max resolution\n      const size = Math.max(ExtentUtil.getWidth(extent), ExtentUtil.getHeight(extent))\n      const defaultMaxResolution = size / defaultTileSize / Math.pow(\n          defaultZoomFactor, defaultMinZoom)\n    \n      const defaultMinResolution = defaultMaxResolution / Math.pow(\n          defaultZoomFactor, defaultMaxZoom - defaultMinZoom)\n    \n      // user provided maxResolution takes precedence\n      maxResolution = options.maxResolution\n      if (maxResolution !== undefined) {\n        minZoom = 0\n      } else {\n        maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom)\n      }\n    \n      // user provided minResolution takes precedence\n      minResolution = options.minResolution\n      if (minResolution === undefined) {\n        if (options.maxZoom !== undefined) {\n          if (options.maxResolution !== undefined) {\n            minResolution = maxResolution / Math.pow(zoomFactor, maxZoom)\n          } else {\n            minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom)\n          }\n        } else {\n          minResolution = defaultMinResolution\n        }\n      }\n    \n      // given discrete zoom levels, minResolution may be different than provided\n      maxZoom = minZoom + Math.floor(\n        Math.log(maxResolution / minResolution) / Math.log(zoomFactor)\n      )\n      minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom)\n    \n      resolutionConstraint = this.createSnapToPower(\n        zoomFactor, maxResolution, maxZoom - minZoom)\n    }\n    \n    return {\n      constraint: resolutionConstraint,\n      maxResolution,\n      minResolution,\n      minZoom,\n      zoomFactor,\n      extent\n    }\n  }\n  \n  /**\n   *\n   * @param power\n   * @param maxResolution\n   * @param opt_maxLevel\n   * @returns {Function}\n   */\n  createSnapToPower (power, maxResolution, opt_maxLevel) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset)\n        let newLevel = Math.max(oldLevel + delta, 0)\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel)\n        }\n  \n        const reso = maxResolution / Math.pow(power, newLevel)\n        return reso\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  /**\n   *\n   * @param resolutions\n   * @returns {Function}\n   */\n  createSnapToResolutions (resolutions) {\n    return function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction)\n        z = clamp(z + delta, 0, resolutions.length - 1)\n        const index = Math.floor(z)\n        if (z != index && index < resolutions.length - 1) {\n          let power = resolutions[index] / resolutions[index + 1]\n          return resolutions[index] / Math.pow(power, z - index)\n        } else {\n          return resolutions[index]\n        }\n      } else {\n        return undefined\n      }\n    }\n  }\n  \n  _calculateCenter () {\n    return [500, 500]\n  }\n  \n  \n  /**\n   * 获取视图状态\n   *\n   * @method getViewState\n   * @returns {{center: (ArrayBuffer|*|Array.<T>|Blob|string), resolution: *, rotation: *}}\n   */\n  getViewState () {\n    const center = this.center\n    const resolution = this.resolution\n    const rotation = this.rotation\n    \n    return {\n      center: center.slice(),\n      resolution,\n      rotation\n    }\n  }\n  \n  /**\n   * 分辨率限制\n   *\n   * @method constrainResolution\n   * @param resolution\n   * @param opt_delta\n   * @param opt_direction\n   * @returns {*}\n   */\n  constrainResolution (resolution, opt_delta, opt_direction) {\n    const delta = opt_delta || 0\n    const direction = opt_direction || 0\n    return this._constraints.resolution(resolution, delta, direction)\n  }\n  \n  /**\n   * 计算缩放中心点\n   *\n   * @method calculateCenterZoom\n   * @param resolution {Number}\n   * @param anchor {Number}\n   * @returns {Array}\n   */\n  calculateCenterZoom (resolution, anchor) {\n    let center\n    const currentCenter = this.center\n    const currentResolution = this.resolution\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] -\n        resolution * (anchor[0] - currentCenter[0]) / currentResolution\n      const y = anchor[1] -\n        resolution * (anchor[1] - currentCenter[1]) / currentResolution\n      center = [x, y]\n    }\n    \n    return center\n  }\n  \n  /**\n   * 是否限制视图中心\n   *\n   * @method constrainCenter\n   * @param center\n   * @returns {Boolean}\n   */\n  constrainCenter (center) {\n    this._constraints.center = center\n    this._center = center\n    return true\n  }\n\n  /**\n   * 视图中心点读写器\n   *\n   * @property center\n   * @return {*}\n   */\n  get center () { return this._center }\n  set center ( value ) {\n    this.constrainCenter(value)\n    this.changed()\n  }\n\n  /**\n   * 分辨率读写器\n   *\n   * @property resolution\n   * @return {*}\n   */\n  get resolution () { return this._resolution }\n  set resolution (value){\n    this._resolution = value\n  \n    this.changed()\n  }\n\n  /**\n   * 旋转率读写器\n   *\n   * @property rotation\n   * @return {*}\n   */\n  get rotation () { return this._rotation }\n  set rotation (value){\n    this._rotation = value\n  }\n\n  /**\n   * dataExtent读写器\n   *\n   * @property dataExtent\n   * @return {*}\n   */\n  get dataExtent () { return this._dataExtent }\n  set dataExtent (value) {\n    this._dataExtent = value\n  }\n\n  /**\n   * 获取最小分辨率\n   *\n   * @property minResolution\n   * @return {Number}\n   */\n  get minResolution () { return this._minResolution }\n\n  /**\n   * 获取最大分辨率\n   *\n   * @property maxResolution\n   * @returns {Number}\n   */\n  get maxResolution () { return this._maxResolution }\n  \n  \n  /**\n   * 获取初始设置的地图中心点\n   *\n   * @property originalCenter\n   * @type {Array}\n   */\n  get originalCenter () { return this._originalCenter }\n  \n  /**\n   * 获取初始设置的地图级别\n   *\n   * @property originalResolution\n   * @type {Number}\n   */\n  get originalResolution () { return this._originalResolution }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/view.js","import Kinetic from './kinetic'\nimport DragPan from './dragpan'\nimport MouseWheelZoom from './mousewheelzoom'\nimport KeyboardHome from './keyboardhome'\nimport KeyboardZoom from './keyboardzoom'\nimport KeyboardPan from './keyboardpan'\n\n/**\n *\n * @param options\n * @returns {Set}\n */\nexport function componentsDefaults (options = {}) {\n  const components = new Set()\n  \n  const kinetic = new Kinetic(-0.005, 0.05, 100)\n  \n  const dragPan = options.dragPan !== undefined ? options.dragPan : true\n  if (dragPan) {\n    components.add(new DragPan({\n      kinetic: kinetic\n    }))\n  }\n  \n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true\n  if (mouseWheelZoom) {\n    components.add(new MouseWheelZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }))\n  }\n  \n  const keyboard = options.keyboard !== undefined ? options.keyborad : true\n  if (keyboard) {\n    components.add(new KeyboardHome(options))\n    components.add(new KeyboardPan(options))\n    components.add(new KeyboardZoom({\n      delta: options.zoomDelta\n    }))\n  }\n  \n  return components\n}\n\n\nexport default {\n  componentsDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/componentdefaults.js","\nimport BaseObject from '../core/baseobject'\n\nexport default class Kinetic extends BaseObject{\n  \n  constructor(decay, minVelocity, delay){\n  \n    super()\n    \n    /**\n     * @private\n     * @type {number}\n     */\n    this._decay = decay\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._minVelocity = minVelocity\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delay = delay\n  \n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._points = []\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._angle = 0\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   */\n  begin () {\n    this._points.length = 0\n    this._angle = 0\n    this._initialVelocity = 0\n  }\n  \n  \n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update (x, y) {\n    this._points.push(x, y, Date.now())\n  }\n  \n  \n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end () {\n    if (this._points.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false\n    }\n    const delay = Date.now() - this._delay\n    const lastIndex = this._points.length - 3\n    if (this._points[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false\n    }\n    \n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3\n    while (firstIndex > 0 && this._points[firstIndex + 2] > delay) {\n      firstIndex -= 3\n    }\n    \n    const duration = this._points[lastIndex + 2] - this._points[firstIndex + 2]\n    const dx = this._points[lastIndex] - this._points[firstIndex]\n    const dy = this._points[lastIndex + 1] - this._points[firstIndex + 1]\n    this._angle = Math.atan2(dy, dx)\n    this._initialVelocity = Math.sqrt(dx * dx + dy * dy) / duration\n    return this._initialVelocity > this._minVelocity\n  }\n  \n  \n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance () {\n    return (this._minVelocity - this._initialVelocity) / this._decay\n  }\n  \n  \n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  angle () {\n    return this._angle\n  }\n \n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/kinetic.js","import Component from './component'\nimport {targetNotEditable, noModifierKeys} from '../utils/mousekey'\n\n/**\n *\n */\nexport default class KeyboardHome extends Component {\n  \n  constructor (options = {}) {\n    super()\n  \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n          (keyCode === 36))\n    }\n    \n    /**\n     * @private\n     * @type {ol.EventsConditionType}\n     */\n    this._condition = options.condition ? options.condition : this._defaultCondition\n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (this._condition(mapBrowserEvent)) {\n      this._goToHome()\n    }\n  \n    return !stopEvent\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardhome.js","import Component from './component'\nimport BrowserEvent from '../meek/browserevent'\nimport {targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardZoom extends Component {\n  constructor (options = {}) {\n    super()\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition ? options.condition : targetNotEditable\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._delta = options.delta ? options.delta : 1\n    \n  }\n  \n  /**\n   *\n   * @param mapBrowserEvent\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type == BrowserEvent.KEYDOWN ||\n        mapBrowserEvent.type == BrowserEvent.KEYPRESS) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const charCode = keyEvent.charCode\n      if (this._condition(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n        const map = mapBrowserEvent.map\n        const delta = (charCode == '+'.charCodeAt(0)) ? this._delta : -this._delta\n        const view = map.view\n        super.zoomByDelta(view, delta, undefined, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    \n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardzoom.js","import Component from './component'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {noModifierKeys, targetNotEditable} from '../utils/mousekey'\n\nexport default class KeyboardPan extends Component {\n  constructor (options = {}) {\n  \n    super()\n    \n    this._defaultCondition = function(mapBrowserEvent) {\n      const keyCode = mapBrowserEvent.originalEvent.keyCode\n      return noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent) && (\n        (keyCode === 40 || keyCode === 37 || keyCode === 39 || keyCode === 38))\n    }\n  \n    /**\n     * @private\n     */\n    this._condition = options.condition !== undefined ?\n      options.condition : this._defaultCondition\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._duration = options.duration !== undefined ? options.duration : 100\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._pixelDelta = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128\n  }\n  \n  /**\n   * \n   * @param event\n   * @returns {boolean}\n   */\n  handleMouseEvent (mapBrowserEvent) {\n    let stopEvent = false\n    if (mapBrowserEvent.type === BrowserEvent.KEYDOWN) {\n      const keyEvent = mapBrowserEvent.originalEvent\n      const keyCode = keyEvent.keyCode\n      if (this._condition(mapBrowserEvent) ) {\n        const map = mapBrowserEvent.map\n        const view = map.view\n        const mapUnitsDelta = view.resolution * this._pixelDelta\n        let deltaX = 0, deltaY = 0\n        \n        if (keyCode === 40) {\n          deltaY = mapUnitsDelta\n        } else if (keyCode === 37) {\n          deltaX = -mapUnitsDelta\n        } else if (keyCode === 39) {\n          deltaX = mapUnitsDelta\n        } else {\n          deltaY = -mapUnitsDelta\n        }\n        \n        const delta = [deltaX, deltaY]\n        super.pan(view, delta, null)\n        mapBrowserEvent.preventDefault()\n        stopEvent = true\n      }\n    }\n    return !stopEvent\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboardpan.js","import Zoom from './zoom'\nimport Home from './home'\nimport zoomPercentage from './zoompercentage'\n\nexport function controlDefaults (options = {}) {\n  \n  const controls = []\n  \n  const zoomControl = options.zoom !== undefined ? options.zoom : true\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions))\n  }\n  \n  const homeControl = options.home !== undefined ? options.home : true\n  if (homeControl) {\n    controls.push(new Home(options.homeOptions))\n  }\n  \n  const zoomPercentageControl = options.zoomPercentage !== undefined ? options.zoomPercentage : true\n  if (zoomPercentageControl) {\n    controls.push(new zoomPercentage(options.zoomPercentageOptions))\n  }\n  \n  return controls\n}\n\nexport default {\n  controlDefaults\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/controldefaults.js","import Control from './control'\nimport BrowserEvent from '../meek/browserevent'\n\nimport {listen} from '../core/eventmanager'\n\n/**\n *\n */\nexport default class Home extends Control {\n  constructor (options = {}) {\n    const className = options.className ? options.className : 'dt-zoom-extent'\n    const homeLabel = options.homeLabel ? options.homeLabel : 'H'\n    const homeLabelTip = options.homeLabelTip ? options.homeLabelTip : '全图'\n  \n    const homeElement = document.createElement('button')\n    homeElement.setAttribute('type', 'button')\n    homeElement.title = homeLabelTip\n    homeElement.appendChild(\n      typeof homeLabel === 'string' ? document.createTextNode(homeLabel) : homeLabel\n    )\n  \n    const cssClasses = `${className} dt-unselectable dt-control`\n    const element = document.createElement('div')\n    element.className = cssClasses\n    element.appendChild(homeElement)\n  \n    super({\n      element,\n      target: options.target\n    })\n  \n    listen(homeElement, BrowserEvent.CLICK, this._handleClick, this)\n  }\n  \n  /**\n   * 处理按钮点击事件\n   * @param event\n   * @private\n   */\n  _handleClick ( event) {\n    event.preventDefault()\n    this._goToHome()\n  }\n  \n  /**\n   * 将视图还原到最初\n   * @private\n   */\n  _goToHome () {\n    const view = this.map.view\n    if (view) {\n      const orignalCenter = view.originalCenter\n      const originalResolution = view.originalResolution\n      \n      view.center = orignalCenter\n      view.resolution = originalResolution\n    }\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/home.js","import Control from './control'\nimport {removeNode} from '../utils/domutil'\nimport {unlistenByKey, listen} from '../core/eventmanager'\nimport {EventType} from '../meek/eventtype'\n\nexport default class ZoomPercentage extends Control {\n  constructor (options = {}) {\n    super()\n    \n    this._map = undefined\n    \n    const className = options.className ? options.className : 'dt-scale-line'\n    \n    this._innerElement = document.createElement('DIV')\n    this._innerElement.className = `${className}-inner`\n    \n    this._element = document.createElement('DIV')\n    this._element.className = `${className} dt-unselectable`\n    this._element.appendChild(this._innerElement)\n  }\n  \n  get map() { return this._map }\n  set map(value) {\n    if (this.map) {\n      removeNode(this._element)\n    }\n    \n    this._listenerKeys.forEach(listener => unlistenByKey(listener) )\n    \n    this._listenerKeys.length = 0\n    this._map = value\n    \n    if (this._map) {\n      const target = this._target ? this._target : value.overlayContainerStopEvent\n      target.appendChild(this._element)\n      \n      this._listenerKeys.push(listen(value, EventType.VIEW_CHANGED, this.render, this))\n      \n      this.render()\n    }\n  }\n  \n  render () {\n    const view = this.map.view\n    const resolution =  (1 / view.resolution).toFixed(2)\n    const html = `&#8195;缩放比${resolution * 100}% &#8195;`\n    this._innerElement.innerHTML = html\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/control/zoompercentage.js","import BaseObject from '../core/baseobject'\nimport {listen} from '../core/eventmanager'\nimport {RenderEventType} from '../renderer/rendereventtype'\nimport {ExtentUtil} from '../geometry/support/extentutil'\nimport {outerWidth, outerHeight, removeChildren} from '../utils/domutil'\n\n/**\n * Overlay类提供一个可以漂浮在map上的容器，\n * 凡是需要有和地图交互的表单，必须使用该容器承载\n *\n * @class Overlay\n * @extends BaseObject\n * @module meek\n * @constructor\n */\nexport default class Overlay extends BaseObject {\n\n  /**\n   * @constructor\n   * @param options\n   */\n  constructor (options = {}) {\n    super()\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._element = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._map = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._offset = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._position = undefined\n  \n    /**\n     *\n     * @type {undefined}\n     * @private\n     */\n    this._positioning = undefined\n    \n    \n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this._overlay = options.id\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true\n  \n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._stopEvent = options.stopEvent !== undefined ?\n      options.stopEvent : true\n  \n    /**\n     * @private\n     * @type {Element}\n     */\n    this._element = document.createElement('DIV')\n    this._element.className = 'dt-overlay-container dt-selectable'\n    this._element.style.position = 'absolute'\n  \n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false\n  \n    /**\n     * @private\n     */\n    this._autoPanAnimation = options.autoPanAnimation || {}\n  \n    /**\n     * @private\n     * @type {number}\n     */\n    this._autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20\n  \n    /**\n     * @private\n     * @type {{bottom_: string,\n   *         left_: string,\n   *         right_: string,\n   *         top_: string,\n   *         visible: boolean}}\n     */\n    this._rendered = {\n      _bottom: '',\n      _left: '',\n      _right: '',\n      _top: '',\n      _visible: true\n    }\n  \n    /**\n     * @private\n     * @type {EventsKey}\n     */\n    this._mapPostrenderListenerKey = null\n  \n    if (options.element !== undefined) {\n      this.popupEelement = options.element\n    }\n  \n    this.offset = options.offset !== undefined ?\n      options.offset : [0, 0]\n  \n    this.positioning = options.positioning !== undefined ? options.positioning :\n      OverlayPositioning.TOP_LEFT\n  \n    if (options.position !== undefined) {\n      this.position = options.position\n    }\n  }\n  \n  /**\n   * 执行渲染\n   *\n   * @method render\n   */\n  render () {\n    this.updatePixelPosition()\n  }\n  \n  /**\n   * 更新鼠标点的位置信息\n   *\n   * @method updatePixelPosition\n   */\n  updatePixelPosition () {\n    const map = this.map\n    if (map) {\n      const position = this.position\n      if (!map || !map.isRendered() || !position) {\n        this.setVisible(false)\n        return\n      }\n  \n      const pixel = map.getPixelFromCoordinate(position)\n      const mapSize = map.size\n      this.updateRenderedPosition(pixel, mapSize)\n    }\n  }\n  \n  /**\n   * 更新渲染视图位置\n   *\n   * @param pixel {Array}\n   * @param mapSize {Number}\n   */\n  updateRenderedPosition (pixel, mapSize) {\n    const style = this._element.style\n    const offset = this.offset\n    const positioning = this.positioning\n    \n    this.setVisible(true)\n    \n    let offsetX = offset[0]\n    let offsetY = offset[1]\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n      positioning == OverlayPositioning.CENTER_RIGHT ||\n      positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this._rendered.left_ !== '') {\n        this._rendered.left_ = style.left = ''\n      }\n      \n      const right = `${Math.round(mapSize[0] - pixel[0] - offsetX)}px`\n      if (this._rendered.right_ != right) {\n        this._rendered.right_ = style.right = right\n      }\n    } else {\n      if (this._rendered.right_ !== '') {\n        this._rendered.right_ = style.right = ''\n      }\n      \n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this._element.offsetWidth / 2\n      }\n      \n      const left = `${Math.round(pixel[0] + offsetX)}px`\n      if (this._rendered.left_ != left) {\n        this._rendered.left_ = style.left = left\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n      positioning == OverlayPositioning.BOTTOM_CENTER ||\n      positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this._rendered.top_ !== '') {\n        this._rendered.top_ = style.top = ''\n      }\n      \n      const bottom = `${Math.round(mapSize[1] - pixel[1] - offsetY)}px`\n      if (this._rendered.bottom_ != bottom) {\n        this._rendered.bottom_ = style.bottom = bottom\n      }\n    } else {\n      if (this._rendered.bottom_ !== '') {\n        this._rendered.bottom_ = style.bottom = ''\n      }\n      \n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this._element.offsetHeight / 2\n      }\n      \n      const top = `${Math.round(pixel[1] + offsetY)}px`\n      if (this._rendered.top_ != top) {\n        this._rendered.top_ = style.top = top\n      }\n    }\n  }\n  \n  /**\n   * 设置浮云框是否可见\n   *\n   * @method setVisible\n   * @param visible\n   */\n  setVisible (visible) {\n    if (this._rendered.visible !== visible) {\n      this._element.style.display = visible ? '' : 'none'\n      this._rendered.visible = visible\n    }\n  }\n  \n  /**\n   * 表单自动适应视图范围\n   * 如果当前表单出现的位置不全在地图中，则会平移至地图\n   * 可视范围内\n   *\n   * @private\n   */\n  _panIntoView () {\n    const map = this.map\n    \n    if (!map || !map.getTargetElement()) {\n      return\n    }\n    \n    const mapRect = this._getRect(map.getTargetElement(), map.size)\n    const element = this.popupEelement\n\n    if(element.clientHeight === 0 && element.clientWidth === 0){\n      return\n    }\n    const overlayRect = this._getRect(element,\n      [outerWidth(element), outerHeight(element)])\n    \n    const margin = this._autoPanMargin\n    if (!ExtentUtil.containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0]\n      const offsetRight = mapRect[2] - overlayRect[2]\n      const offsetTop = overlayRect[1] - mapRect[1]\n      const offsetBottom = mapRect[3] - overlayRect[3]\n      \n      const delta = [0, 0]\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin\n      }\n      \n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin\n      }\n      \n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = map.view.center\n        const centerPx = map.getPixelFromCoordinate(center)\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ]\n        \n        map.view.center = map.getCoordinateFromPixel(newCenterPx)\n      }\n    }\n  }\n\n  /**\n   *\n   * @param element\n   * @param size\n   * @return {*[]}\n   * @private\n   */\n  _getRect (element, size) {\n    const box = element.getBoundingClientRect()\n    const offsetX = box.left + window.pageXOffset\n    const offsetY = box.top + window.pageYOffset\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ]\n  }\n\n  /**\n   * 获取当前浮云框对象的 ID\n   *\n   * @property overlayId\n   * @type {number|string|undefined}\n   */\n  get overlayId () { return this._overlayId }\n\n  /**\n   * 获取表单元素\n   *\n   * @property popupEelement\n   * @type {DOM}\n   */\n  get popupEelement () { return this._popupEelement }\n  set popupEelement (value) {\n    this._popupEelement = value\n  \n    this._setElement()\n  }\n\n  /**\n   *\n   * @private\n   */\n  _setElement () {\n    removeChildren(this._element)\n    const pelement = this.popupEelement\n    if (pelement) {\n      this._element.appendChild(pelement)\n    }\n  }\n\n\n  /**\n   * map读写器, 读取设置当前map\n   *\n   * @property map\n   * @type {mk.map}\n   */\n  get map () { return this._map }\n  set map (value) {\n    this._map = value\n    if (this._map) {\n      const map = this._map\n      this._mapPostrenderListenerKey = listen(map,\n        RenderEventType.POSTRENDER, this.render, this)\n      this.updatePixelPosition()\n      const container = this._stopEvent ?\n        map.overlayContainerStopEvent : map.overlayContainer\n      if (this._insertFirst) {\n        container.insertBefore(this._element, container.childNodes[0] || null)\n      } else {\n        container.appendChild(this._element)\n      }\n    }\n  }\n\n  /**\n   * 偏移量读写器\n   *\n   * @property offset\n   * @return {*|undefined}\n   */\n  get offset () { return this._offset }\n  set offset (value) {\n    this._offset = value\n    this.updatePixelPosition()\n  }\n\n  /**\n   * 鼠标点位置读写器\n   *\n   * @property position\n   * @return {undefined|*}\n   */\n  get position () { return this._position }\n  set position (value) {\n    this._position = value\n    \n    this.updatePixelPosition()\n    \n    if (this._position && this.autoPan) {\n      this._panIntoView()\n    }\n  }\n\n  /**\n   *\n   *\n   * positioning\n   * @return {undefined|*}\n   */\n  get positioning () { return this._positioning }\n  set positioning (value) {\n    this._positioning = value\n    this.updatePixelPosition()\n  }\n}\n\n\nconst OverlayPositioning = {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/meek/overlay.js","import Geometry from '../../geometry/geometry'\nimport Point from '../../geometry/point'\nimport Polygon from '../../geometry/polygon'\nimport MutilPolygon from '../../geometry/mutilpolygon'\nimport Line from '../../geometry/line'\nimport Extent from '../../geometry/extent'\nimport Parallelogram from '../../geometry/parallelogram'\nimport RotatableExtent from '../../geometry/rotatableextent'\nimport Feature from '../../meek/feature'\nimport Obj from '../../utils/obj'\n\n/**\n *\n */\nexport default class GeoJSON {\n  \n  /**\n   * 解析 GeoJSON 并返回 Feature 的集合\n   *\n   * @static\n   * @method read\n   * @param json geojson格式的数据\n   * @returns {Array} 返回 features 的集合\n   */\n  static read (json) {\n    const features = []\n\n    if(!json) {\n      return\n    }\n    const featuresObj = json.features\n    featuresObj.forEach( featureObj => {\n      if (featureObj.type === 'Feature') {\n        if (featureObj.geometry) {\n          let constructor = undefined\n          const geometryObj = featureObj.geometry\n          const geometryType = geometryObj.type\n          if (geometryType === 'Point') {\n            constructor = Point\n          } else if (geometryType === 'LineString') {\n            constructor = Line\n          } else if (geometryType === 'Polygon') {\n            constructor = Polygon\n          } else if (geometryType === 'ExtentPolygon') {\n            constructor = Extent\n          } else if (geometryType === 'MutilPolygon') {\n            constructor = MutilPolygon\n          } else if (geometryType === 'ParallelogramPolygon') {\n            constructor = Parallelogram\n          } else if (geometryType === 'RotatableExtent') {\n            constructor = RotatableExtent\n          }\n          \n          if (constructor === undefined) {\n            throw new Error('包含未定义的 Geometry 类型')\n          } else {\n            const coordinates = geometryObj.coordinates\n            const geometry = new constructor()\n            geometry.setCoordinates(coordinates)\n  \n            let propertiesObj\n            if (featureObj.properties) {\n              propertiesObj = featureObj.properties\n            }\n  \n            let title = featureObj.title\n            const feature = new Feature(geometry, propertiesObj, title)\n            features.push(feature)\n          }\n        }\n      }\n    })\n    \n    return features\n  }\n  \n  /**\n   *\n   * 将 Feature 集合写入到 GeoJSON 的格式对象中\n   *\n   * @static\n   * @method write\n   * @param features Feature 集合\n   * @returns {Object} 返回 GeoJSON 格式的数据\n   */\n  static write (features) {\n    const featuresArr = []\n    \n    features.forEach( feature => {\n      const properties = Obj.mapToObject(feature._attributesMap)\n      Reflect.deleteProperty(properties, '_originStyle')\n      Reflect.deleteProperty(properties, 'Symbol(hasmutilselected)')\n\n      featuresArr.push({\n        type: 'Feature',\n        geometry: {\n          type: GeoJSON.getGeoJSONGeometryType(feature.geometry),\n          coordinates: feature.geometry.getCoordinates()\n        },\n        properties,\n        title: feature.displayText\n      })\n    })\n    \n    return {\n      type: 'FeatureCollection',\n      features: featuresArr\n    }\n  }\n  \n  /**\n   * 获取Geometry的类型\n   *\n   * @static\n   * @method getGeoJSONGeometryType\n   * @param geometry\n   * @returns {*}\n   */\n  static getGeoJSONGeometryType (geometry) {\n    const type = geometry.geometryType\n    let jsonType\n    switch (type) {\n      case Geometry.POINT :\n        jsonType = 'Point'\n        break\n      case Geometry.LINE :\n        jsonType = 'LineString'\n        break\n      case Geometry.POLYGON :\n        jsonType = 'Polygon'\n        break\n      case Geometry.MULTI_POLYGON :\n        jsonType = 'MutilPolygon'\n        break\n      case Geometry.EXTENT :\n        jsonType = 'ExtentPolygon'\n        break\n      case Geometry.PARALLELOGRAM :\n        jsonType = 'ParallelogramPolygon'\n        break\n      case Geometry.ROTATABLE_EXTENT:\n        jsonType = 'RotatableExtent'\n        break\n    }\n\n    return jsonType\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/json/geojson.js","import Geometry from '../../geometry/geometry'\nimport {ExtentUtil} from '../support/extentutil'\n\n/**\n * 判断任意图形是否相交\n * @TODO 算法返回的结果修改为：找到碰撞的图形或部分，而不是返回布尔值，\n * 这样可以避免二次寻找\n *\n * @method intersects\n * @param geometry1\n * @param geometry2\n * @returns {Boolean}\n */\nexport default function intersects (geometry1, geometry2) {\n  if ( (geometry1 === null || geometry1 === undefined ) ||\n       (geometry2 === null || geometry2 === undefined )) {\n    return false\n  }\n  \n  const extent1 = geometry1.extent\n  const extent2 = geometry2.extent\n  const ext1Arr = [extent1.xmin, extent1.ymin, extent1.xmax, extent1.ymax]\n  const ext2Arr = [extent2.xmin, extent2.ymin, extent2.xmax, extent2.ymax]\n  \n  // 如果两个图形的外界矩形不相交，则跳出判断\n  if (!ExtentUtil.intersects(ext1Arr, ext2Arr)) {\n    return false\n  }\n  \n  const geometryType = geometry1.geometryType\n  \n  let result = false\n  switch (geometryType) {\n  case Geometry.POINT :\n    result = pointIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.LINE :\n    result = lineIntersectsGeometry(geometry1, geometry2)\n    break\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    if (geometry2.geometryType === Geometry.MULTI_POLYGON) {\n      result = mutilPolygonIntersectsGeometry(geometry2, geometry1)\n    } else {\n      result = polygonIntersectsGeometry(geometry1, geometry2)\n    }\n    break\n  case Geometry.MULTI_POLYGON:\n    result = mutilPolygonIntersectsGeometry(geometry1, geometry2)\n    break\n  }\n\n  \n  return result\n}\n\n/**\n * 点和图形相交判断\n * @param point\n * @param geometry\n * @returns {*}\n */\nconst pointIntersectsGeometry = function(point, geometry) {\n  const geometryType = geometry.geometryType\n  \n  switch (geometryType) {\n  case Geometry.POINT:\n  case Geometry.LINE:\n  case Geometry.POLYGON:\n  case Geometry.MULTI_POLYGON:\n  case Geometry.EXTENT:\n    return geometry.containsXY(point.x, point.y)\n  }\n  \n  return false\n}\n\n/**\n * 线和图形相交判断\n * @param line\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst lineIntersectsGeometry = function (line, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return line.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsLine(line, geometry)\n  case Geometry.POLYGON:\n  case Geometry.EXTENT:\n    return lineIntersectsPolygon(line, geometry)\n  }\n}\n\n/**\n * 线与线相交判断\n * @param line1\n * @param line2\n */\nconst lineIntersectsLine = function(line1, line2) {\n  const lineLinearRings1 = line1.getCoordinates()\n  const lineLinearRings2 = line2.getCoordinates()\n  \n  return intersectsByLinearRings(lineLinearRings1, lineLinearRings2)\n}\n\n/**\n * 多边形和图形相交判断\n * @param poly\n * @param geometry\n * @returns {Boolean|boolean|*}\n */\nconst polygonIntersectsGeometry = function (poly, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n  case Geometry.POINT:\n    return poly.containsXY(geometry.x, geometry.y)\n  case Geometry.LINE:\n    return lineIntersectsPolygon(geometry, poly)\n  case Geometry.POLYGON:\n  case Geometry.MUTIL_POLYGON:\n  case Geometry.EXTENT:\n    return polygonIntersectsPolygon(poly, geometry)\n  }\n}\n\nconst mutilPolygonIntersectsGeometry = function(mutilPoly, geometry) {\n  const geometryType = geometry.geometryType\n  switch (geometryType) {\n    case Geometry.POINT:\n      return mutilPoly.containsXY(geometry.x, geometry.y)\n    // case Geometry.LINE:\n      // return lineIntersectsPolygon(geometry, poly);\n    case Geometry.POLYGON:\n    case Geometry.MULTI_POLYGON:\n    case Geometry.EXTENT:\n      return mutilPolygonIntersectsPolygon(mutilPoly, geometry)\n  }\n}\n\n/**\n * 线和多边形相交判断\n * @param line\n * @param polygon\n */\nconst lineIntersectsPolygon = function (line, polygon) {\n  const lineLinearRings = line.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()\n  \n  if (polygon.geometryType === Geometry.POLYGON ||\n      polygon.geometry === Geometry.MULTI_POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0] // 只获得外环\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  if (!intersect) {\n    // check if this poly contains points of the ring/linestring\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\n/**\n * 多边形和多边形相交判断\n * @param poly\n * @param polygon\n */\nconst polygonIntersectsPolygon = function (poly, polygon) {\n  let lineLinearRings = poly.getCoordinates()\n  let polygon2LinearRings = polygon.getCoordinates()// 只获得外环\n  \n  if (poly.geometryType === Geometry.POLYGON) {\n    lineLinearRings = lineLinearRings[0]\n  }\n  \n  if (polygon.geometryType === Geometry.POLYGON) {\n    polygon2LinearRings = polygon2LinearRings[0]\n  }\n  \n  let intersect = intersectsByLinearRings(lineLinearRings, polygon2LinearRings)\n  \n  // 两个多边形要做相互内含关系的判断\n  \n  // 正向检查\n  if (!intersect) {\n    for (let i = 0, len = lineLinearRings.length; i < len; ++i) {\n      const point = lineLinearRings[i]\n      intersect = polygon.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  // 反向检查\n  if (!intersect) {\n    for (let i = 0, len = polygon2LinearRings.length; i < len; ++i) {\n      const point = polygon2LinearRings[i]\n      intersect = poly.containsXY(point[0], point[1])\n      if (intersect) {\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst mutilPolygonIntersectsPolygon = function(mutilPoly, polygon) {\n  const intersectsByLinearRingsFn = intersectsByLinearRings\n  let lineLinearRings = mutilPoly.getCoordinates()\n  let polygon2LinearRings = []\n\n  const polygonGeometryType = polygon.geometryType\n  if (polygonGeometryType == Geometry.EXTENT) {\n    polygon2LinearRings = [polygon.getCoordinates()]\n  } else if (polygonGeometryType == Geometry.POLYGON) {\n    polygon2LinearRings = [polygon.getCoordinates()[0]] // 取外环\n  } else if (polygonGeometryType == Geometry.MULTI_POLYGON) {\n    polygon2LinearRings = polygon.getCoordinates()\n  }\n\n  let result = lineLinearRings.find( ring => {\n    const oneRingIntersects = polygon2LinearRings.find( \n      linarRing => intersectsByLinearRingsFn(ring[0], linarRing))\n\n    return oneRingIntersects !== undefined ? true : false\n  })\n\n  return result !== undefined ? true : false\n}\n\nconst intersectsByLinearRings = function (LinearRing1, LinearRings2) {\n  let intersect = false\n  const segs1 = getSortedSegments(LinearRing1)\n  const segs2 = getSortedSegments(LinearRings2)\n  \n  let seg1, seg1x1, seg1x2, seg1y1, seg1y2,\n    seg2, seg2y1, seg2y2\n  \n  // sweep right\n  for(let i = 0, len = segs1.length; i < len; ++i) {\n    seg1 = segs1[i]\n    seg1x1 = seg1.x1\n    seg1x2 = seg1.x2\n    seg1y1 = seg1.y1\n    seg1y2 = seg1.y2\n    \n    for(let j = 0, jlen = segs2.length; j < jlen; ++j) {\n      seg2 = segs2[j]\n      if(seg2.x1 > seg1x2) {\n        // seg1 still left of seg2\n        break\n      }\n      \n      if(seg2.x2 < seg1x1) {\n        // seg2 still left of seg1\n        continue\n      }\n      \n      seg2y1 = seg2.y1\n      seg2y2 = seg2.y2\n      if (Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n        // seg2 above seg1\n        continue\n      }\n      \n      if (Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n        // seg2 below seg1\n        continue\n      }\n      \n      if (segmentsIntersect(seg1, seg2)) {\n        intersect = true\n        break\n      }\n    }\n  }\n  \n  return intersect\n}\n\nconst getSortedSegments = function (points) {\n  const numSeg = points.length - 1\n  let segments = new Array(numSeg), point1, point2\n  \n  for (let i = 0; i < numSeg; ++i) {\n    point1 = points[i]\n    point2 = points[i + 1]\n    \n    if (point1[0] < point2[0]) {\n      segments[i] = {\n        x1: point1[0],\n        y1: point1[1],\n        x2: point2[0],\n        y2: point2[1]\n      }\n    } else {\n      segments[i] = {\n        x1: point2[0],\n        y1: point2[1],\n        x2: point1[0],\n        y2: point1[1]\n      }\n    }\n  }\n  \n  // more efficient to define this somewhere static\n  function byX1(seg1, seg2) {\n    return seg1.x1 - seg2.x1\n  }\n  \n  return segments.sort(byX1)\n}\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n        \n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x,\n    y,\n    along\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/intersects.js","import contains from './contains'\nimport {ExtentUtil} from '../../geometry/support/extentutil'\nimport Polygon from '../../geometry/polygon'\n\n\nlet isDividedPointSymbol = Symbol('isDividedPoint')\nlet alreadyUsedSymbol = Symbol('alreadyUsed')\nlet dividePointSymbol = Symbol('dividePoint')\n\n/**\n * 使用直线来切割多边形,\n * 暂时只支持不带洞的多边形的分割\n *\n * @method splitPolygonByLine\n * @param polygon {Geometry} 被切割多边形\n * @param line {Geometry} 切割直线\n * @returns {Array}\n */\nexport default function splitPolygonByPolyline(targetPolygon, splitLine) {\n  \n  // 不再原对象上处理\n  const polygon = targetPolygon.clone()\n  const line = splitLine.clone()\n  \n  const polygonCoordinates = polygon.getCoordinates()[0]\n  const lineCoordinates = line.getCoordinates()\n  \n  // 找到直线和面的相交点\n  let dividedPointList = findIntersectionPoints(polygonCoordinates, lineCoordinates)\n  \n  // 0交点或者交点为奇数，则认为非法输入\n  if (dividedPointList.length === 0 || dividedPointList.length % 2 === 1) {\n    return []\n  }\n  \n  // 参入到原来分割线中\n  const afterInsertLineCoords = insertDiveidePointsToSplitLineCoords(dividedPointList, lineCoordinates)\n  \n  const allPartsScliedFromLineCoords = sliceDividedPointFromLine(dividedPointList, afterInsertLineCoords)\n  \n  // 按照顺序插入分割点到分割多边形顶多序列中\n  const vertexListAfterDivide = insertDividePointsToCoordinates(dividedPointList, polygonCoordinates)\n  \n  // 重塑多边形\n  const results = renewal(vertexListAfterDivide, allPartsScliedFromLineCoords)\n  \n  const featureCollection = []\n  results.forEach( r=> {\n    const coords = []\n    r.forEach(arrs => {\n      coords.push([arrs[0], arrs[1]])\n    })\n    const polygon = new Polygon()\n    polygon.setCoordinates([coords])\n    featureCollection.push(polygon)\n  })\n  \n  // 处理带洞多边形\n  handleHolesForPolygon(polygon, featureCollection, line)\n  \n  return featureCollection\n}\n\n\nconst renewal = function(vertexListAfterDivide, allPartsScliedFromLineCoords) {\n  \n  let i = 0\n  let len = vertexListAfterDivide.length\n  \n  const isInArray = (point, singlePolygonCoords) =>\n    singlePolygonCoords.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  \n  \n  // 找到分割点在同一分割边上的其他点\n  const findPartners = function(point) {\n    for (let j = 0, jLen = allPartsScliedFromLineCoords.length; j < jLen; j++) {\n      const parts = allPartsScliedFromLineCoords[j]\n      const fp = parts[0]\n      const ep = parts[parts.length - 1]\n      \n      // 如果是首点\n      if (fp[0] === point[0] && fp[1] === point[1]) {\n        return parts\n      }\n      \n      if (ep[0] === point[0] && ep[1] === point[1]) {\n        const newParts = [].concat(parts)\n        return newParts.reverse()\n      }\n    }\n  }\n  \n  // 寻找点在多边形序列的下一点\n  const findNextPoint = function(point) {\n    for (let m = 0, mlen = vertexListAfterDivide.length; m < mlen; m++) {\n      const item = vertexListAfterDivide[m]\n      if (item[0] === point[0] && item[1] === point[1]) {\n        if (m === vertexListAfterDivide.length - 1) {\n          return item\n        } else {\n          return vertexListAfterDivide[m + 1]\n        }\n      }\n    }\n  }\n  \n  let singlePolygonCoords = []\n  let allPolygonCoords = []\n  \n  // 递归分割\n  const goThrough = function(ePoint, singlePolygonCoords ) {\n    if (singlePolygonCoords.length > 1) {\n      const firstPoint = singlePolygonCoords[0]\n      if (firstPoint[0] === ePoint[0] && firstPoint[1] === ePoint[1]) {\n        singlePolygonCoords.push(ePoint)\n        return true\n      }\n    }\n    \n    // 找到分割点，就需要添加它的伙伴（不管顺逆方向）\n    if (ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol) {\n      const parts = findPartners(ePoint)\n      parts.forEach(p => {\n        singlePolygonCoords.push(p)\n      })\n  \n      // 判断此时是否已经完成绘制\n      const ffpoint = singlePolygonCoords[0]\n      const eepoint = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (ffpoint[0] === eepoint[0] && ffpoint[1] === eepoint[1]) {\n        return true\n      }\n    \n      const endPoint = parts[parts.length - 1]\n      const nextPoint = findNextPoint(endPoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    } else if(ePoint.length === 2) {\n      singlePolygonCoords.push(ePoint)\n      \n      const nextPoint = findNextPoint(ePoint)\n      goThrough(nextPoint, singlePolygonCoords)\n    }\n  }\n  \n  // 更新多边形顶点的状态\n  const updataStatus = function(singlePolygonCoords, vertexListAfterDivide) {\n    vertexListAfterDivide.forEach(vertex => {\n      if (isInArray(vertex, singlePolygonCoords)) {\n        // 如果是原多边形顶点，则设置为alreadyUsedSymbol\n        if (vertex.length === 2) {\n          vertex.push(alreadyUsedSymbol)\n        }\n        // 如果是分割点，则只能使用2次\n        else if (vertex.length === 3 && vertex[2] === isDividedPointSymbol) {\n          vertex.push('1')\n        }\n        //\n        else if(vertex.length === 4 ) {\n          if (vertex[3] === '1') {\n            vertex[3] = '2'\n          }\n        }\n      }\n    })\n  }\n  \n  // 检测这两个点是否是切割边\n  const isInOneSegment = function(onePoint, otherPoint) {\n    const allPartsScliedFromLineCoordsTemp = allPartsScliedFromLineCoords\n    let findCount = 0\n    \n    for (let i = 0, len = allPartsScliedFromLineCoordsTemp.length; i < len; i++) {\n      const group = allPartsScliedFromLineCoordsTemp[i]\n      findCount = 0\n      \n      for (let j = 0, jjlen = group.length; j < jjlen; j++) {\n        const item = group[j]\n        if (item[0] === onePoint[0] && item[1] === onePoint[1]) {\n          findCount ++\n        }\n        \n        if (item[0] === otherPoint[0] && item[1] === otherPoint[1]) {\n          findCount ++\n        }\n        \n        if (findCount === 2) {\n          return true\n        }\n      }\n    }\n  \n    return false\n  }\n\n  for (; i < len - 1; i++) {\n    const fPoint = vertexListAfterDivide[i]\n    // 如果是普通点\n    if (fPoint.length === 2) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n    // 如果是分割点\n    else if (fPoint.length === 3 && fPoint[2] === isDividedPointSymbol) {\n      if (!isInArray(fPoint, singlePolygonCoords)) {\n        singlePolygonCoords.push(fPoint)\n      }\n  \n      const ePoint = vertexListAfterDivide[i + 1]\n      goThrough(ePoint, singlePolygonCoords)\n  \n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    } else if (fPoint.length === 4 && fPoint[3] === '1') {\n      let ePoint = vertexListAfterDivide[i + 1]\n      \n      // 分割点，必须是构成同一边，不能是异边\n      if(ePoint.length >= 3 && ePoint[2] === isDividedPointSymbol && isInOneSegment(fPoint, ePoint)) {\n        ePoint = fPoint\n      }\n      // 异边，则重新启动分割流程\n      else {\n        if (!isInArray(fPoint, singlePolygonCoords)) {\n          singlePolygonCoords.push(fPoint)\n        }\n      }\n  \n      goThrough(ePoint, singlePolygonCoords)\n      updataStatus(singlePolygonCoords, vertexListAfterDivide)\n  \n      const fp = singlePolygonCoords[0]\n      const tp = singlePolygonCoords[singlePolygonCoords.length - 1]\n      if (fp[0] !== tp[0] || fp[1] !== tp[1]) {\n        singlePolygonCoords.push(fp)\n      }\n      \n      allPolygonCoords.push(singlePolygonCoords)\n      singlePolygonCoords = []\n    }\n  }\n  \n  return allPolygonCoords\n}\n\nconst sliceDividedPointFromLine = function(dividedPointList, afterInsertLineCoords) {\n  let allParts = []\n  let singleParts = []\n  let isDividePointStart = false\n  \n  for (let i = 0, len = afterInsertLineCoords.length; i < len; i++) {\n    const item = afterInsertLineCoords[i]\n    \n    if (isDividePointStart === false && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = true\n      \n      continue\n    }\n    \n    if (isDividePointStart) {\n      if (item.length === 2) {\n        singleParts.push(item)\n        \n        continue\n      }\n    }\n    \n    if (isDividePointStart && item.length === 3) {\n      singleParts.push([item[0], item[1]])\n      isDividePointStart = false\n      \n      allParts.push(singleParts)\n      singleParts = []\n    }\n  }\n  \n  return allParts\n}\n\nconst insertDiveidePointsToSplitLineCoords = function(dividedPointList, lineCoordinates) {\n  \n  const getDividePoints = function (fP, eP) {\n    return dividedPointList.filter(dp => {\n      const dfPoint = dp.intersectFrom.fromPoint\n      const dePoint = dp.intersectFrom.endPoint\n      \n      return dfPoint[0] === fP[0] &&\n             dfPoint[1] === fP[1] &&\n             dePoint[0] === eP[0] &&\n             dePoint[1] === eP[1]\n    })\n  }\n  \n  const isInArray = function(point) {\n    return afterArr.find( item =>\n      item[0] === point[0] && item[1] === point[1]\n    )\n  }\n  \n  let len = lineCoordinates.length\n  let i = 0\n  const afterArr = []\n  for (;i < len - 1; i ++) {\n    const fPoint = lineCoordinates[i]\n    const ePoint = lineCoordinates[i + 1]\n  \n    if (!isInArray(fPoint)) {\n      afterArr.push(fPoint)\n    }\n    \n    const dividePoints = getDividePoints(fPoint, ePoint)\n    if (dividePoints.length !== 0) {\n      // 插入分割点\n      if (dividePoints.length === 1) {\n        afterArr.push([dividePoints[0].point.x, dividePoints[0].point.y, dividePointSymbol])\n      } else {\n        // 多个分割点需要排序\n        \n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n        \n        dividePoints.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n  \n        dividePoints.forEach(item => {\n          afterArr.push([item.point.x, item.point.y, dividePointSymbol])\n        })\n      }\n    }\n  \n    if (!isInArray(ePoint)) {\n      afterArr.push(ePoint)\n    }\n  }\n  \n  return afterArr\n}\n\n\nconst distance = function(p1, p2) {\n  return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y))\n}\n\nconst insertDividePointsToCoordinates = function(dividedPointList, polygonCoordinates) {\n  const afterInserted = []\n  \n  const isInDividedPointList = function(firstPoint, endPoint) {\n    return dividedPointList.filter(item => {\n      const orialPoint = item.originPoint\n      const ofPoint = orialPoint.fromPoint\n      const oePoint = orialPoint.toPoint\n      \n      return firstPoint[0] === ofPoint[0] &&\n        firstPoint[1] === ofPoint[1] &&\n        endPoint[0] === oePoint[0] &&\n        endPoint[1] === oePoint[1]\n    })\n  }\n  \n  const len = polygonCoordinates.length\n  let i = 0\n  \n  for (; i < len - 1; i++) {\n    const fPoint = polygonCoordinates[i]\n    const ePoint = polygonCoordinates[i + 1]\n    \n    afterInserted.push(fPoint)\n    const itemDividedPoint = isInDividedPointList(fPoint, ePoint)\n    \n    if (itemDividedPoint.length > 0) {\n      if (itemDividedPoint.length > 1) {\n        const firstPointXY = {\n          x: fPoint[0],\n          y: fPoint[1]\n        }\n    \n        itemDividedPoint.sort((item1, item2) =>\n          distance(item1.point, firstPointXY) - distance(item2.point, firstPointXY)\n        )\n      }\n  \n      itemDividedPoint.forEach(item => {\n        const point = item.point\n        afterInserted.push([point.x, point.y, isDividedPointSymbol])\n      })\n    }\n  }\n  \n  afterInserted.push(afterInserted[0])\n  return afterInserted\n}\n\nconst findOneIntersectionPoints = function(polygonCoordinates, lineCoordinates) {\n  const _ExtentUtil = ExtentUtil\n  const lineCoordinatesExtent = _ExtentUtil.boundingExtentFromTwoPoints(lineCoordinates[0], lineCoordinates[1])\n  const lineCoordinatesExtentBuffer = _ExtentUtil.buffer(lineCoordinatesExtent, 4)\n  \n  const seg2 = {\n    x1: lineCoordinates[0][0],\n    y1: lineCoordinates[0][1],\n    x2: lineCoordinates[1][0],\n    y2: lineCoordinates[1][1]\n  }\n  \n  const ntersectionPoints = []\n  \n  for (let j = 0, jj = polygonCoordinates.length - 1; j < jj; j ++) {\n    let points = polygonCoordinates[j]\n    let nextPoints = polygonCoordinates[j + 1]\n    \n    let pathExtent = _ExtentUtil.boundingExtentFromTwoPoints(points, nextPoints)\n    // 如果两边的extent相交，则判断他们是否相交\n    if (_ExtentUtil.intersects(pathExtent, lineCoordinatesExtentBuffer)) {\n      \n      const seg1 = {\n        x1: points[0],\n        y1: points[1],\n        x2: nextPoints[0],\n        y2: nextPoints[1]\n      }\n      \n      const intersectPoint = segmentsIntersect(seg1, seg2, {point: true})\n      if (intersectPoint instanceof Object) {\n        ntersectionPoints.push({\n          point: intersectPoint,\n          originPoint:{\n            fromPoint: points,\n            toPoint: nextPoints\n          },\n          index: j\n        })\n      }\n    }\n  }\n  \n  return ntersectionPoints\n}\n\nconst findIntersectionPoints = function (polygonCoordinates, lineCoordinates) {\n  const _findOneIntersectionPoints = findOneIntersectionPoints\n  let ntersectionPoints = []\n  \n  for (let i = 0, len = lineCoordinates.length - 1; i < len ; i++) {\n    const firstPoint = lineCoordinates[i]\n    const endPoint = lineCoordinates[i + 1]\n    \n    const intersectionPoints = _findOneIntersectionPoints(polygonCoordinates, [firstPoint, endPoint])\n    intersectionPoints.forEach( ntp => {\n      ntp.intersectIndex = i\n      ntp.intersectFrom = {\n        fromPoint: firstPoint,\n        endPoint: endPoint\n      }\n    })\n    \n    ntersectionPoints = ntersectionPoints.concat(intersectionPoints)\n  }\n  \n  return ntersectionPoints\n}\n\n\nconst segmentsIntersect = function (seg1, seg2, options) {\n  const point = options && options.point\n  const tolerance = options && options.tolerance\n  let intersection = false\n  const x11_21 = seg1.x1 - seg2.x1\n  const y11_21 = seg1.y1 - seg2.y1\n  const x12_11 = seg1.x2 - seg1.x1\n  const y12_11 = seg1.y2 - seg1.y1\n  const y22_21 = seg2.y2 - seg2.y1\n  const x22_21 = seg2.x2 - seg2.x1\n  const d = (y22_21 * x12_11) - (x22_21 * y12_11)\n  const n1 = (x22_21 * y11_21) - (y22_21 * x11_21)\n  const n2 = (x12_11 * y11_21) - (y12_11 * x11_21)\n  \n  if (d == 0) {\n    // parallel\n    if (n1 == 0 && n2 == 0) {\n      // coincident\n      intersection = true\n    }\n  } else {\n    const along1 = n1 / d\n    const along2 = n2 / d\n    if (along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n      // intersect\n      if (!point) {\n        intersection = true\n      } else {\n        // calculate the intersection point\n        const x = seg1.x1 + (along1 * x12_11)\n        const y = seg1.y1 + (along1 * y12_11)\n        intersection = { 'x':x, 'y':y }\n      }\n    }\n  }\n  \n  if (tolerance) {\n    let dist\n    if (intersection) {\n      if (point) {\n        const segs = [seg1, seg2]\n        let seg, x, y\n        // check segment endpoints for proximity to intersection\n        // set intersection to first endpoint within the tolerance\n        for (let i = 0; i < 2; ++i) {\n          seg = segs[i]\n          for (let j = 1; j < 3; ++j) {\n            x = seg['x' + j]\n            y = seg['y' + j]\n            \n            dist = Math.sqrt(\n              Math.pow(x - intersection.x, 2) +\n              Math.pow(y - intersection.y, 2)\n            )\n            \n            if (dist < tolerance) {\n              intersection.x = x\n              intersection.y = y\n              break\n            }\n          }\n        }\n      }\n    } else {\n      // no calculated intersection, but segments could be within\n      // the tolerance of one another\n      const segs = [seg1, seg2]\n      let source, target, p, result\n      // check segment endpoints for proximity to intersection\n      // set intersection to first endpoint within the tolerance\n      for (let i = 0; i < 2; ++i) {\n        source = segs[i]\n        target = segs[(i + 1) % 2]\n        for (let j = 1; j < 3; ++j) {\n          p = {x: source['x' + j], y: source['y' + j]}\n          result = distanceToSegment(p, target)\n          if (result.distance < tolerance) {\n            if (point) {\n              intersection = { 'x':p.x, 'y':p.y }\n            } else {\n              intersection = true\n            }\n            \n            break\n          }\n        }\n      }\n    }\n  }\n  return intersection\n}\n\nconst distanceToSegment = function (point, segment) {\n  let result = distanceSquaredToSegment(point, segment)\n  result.distance = Math.sqrt(result.distance)\n  return result\n}\n\nconst distanceSquaredToSegment = function (point, segment) {\n  const x0 = point.x\n  const y0 = point.y\n  const x1 = segment.x1\n  const y1 = segment.y1\n  const x2 = segment.x2\n  const y2 = segment.y2\n  const dx = x2 - x1\n  const dy = y2 - y1\n  const along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) / (Math.pow(dx, 2) + Math.pow(dy, 2))\n  let x, y\n  \n  if(along <= 0.0) {\n    x = x1\n    y = y1\n  } else if(along >= 1.0) {\n    x = x2\n    y = y2\n  } else {\n    x = x1 + along * dx\n    y = y1 + along * dy\n  }\n  \n  return {\n    distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n    x: x, y: y,\n    along: along\n  }\n}\n\n/**\n * 处理带洞多边形\n * @param polygon\n * @param geometryCollection\n * @param splitLine\n */\nconst handleHolesForPolygon = function(polygon, geometryCollection, splitLine) {\n  if (!polygon.hasHoles()) {\n    return\n  }\n  \n  const addHoleToPolygon = function(polyCoods, geometryCollection) {\n    const poly = new Polygon([polyCoods])\n    const needPoly = geometryCollection.find( polygon => {\n      return contains(polygon, poly)\n    })\n    \n    if (needPoly) {\n      needPoly.getCoordinates().push(polyCoods)\n    }\n  }\n  \n  // 判断洞是否与切割线相交\n  const coords = polygon.getCoordinates()\n  const lineCoords = splitLine\n  \n  for (let i = 1, len = coords.length ;i < len ; i++) {\n    const dividedPoints = findIntersectionPoints(coords[i], lineCoords)\n    \n    // 如果分割线和洞不相交，需要判断洞的归属\n    if (dividedPoints.length === 0) {\n      // console.log('Find one need to appended to collection.')\n      addHoleToPolygon (coords[i], geometryCollection)\n    }\n  }\n  \n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/splitpolygon.js","import Geometry from '../../geometry/geometry'\nimport Polygon from '../../geometry/polygon'\n\n/**\n *\n * 判断多边形是否包含另外一个图形\n *\n * @method contains\n * @param polygon\n * @param geometry\n * @returns {*}\n */\nexport default function contains (polygon, geometry) {\n  const polyGeometryType = polygon.geometryType\n  let isContained = false\n  \n  if (polyGeometryType === Geometry.POLYGON ||\n      polyGeometryType === Geometry.MULTI_POLYGON ||\n      polyGeometryType === Geometry.EXTENT ) {\n    const targetGeometryType = geometry.geometryType\n    \n    if (targetGeometryType === Geometry.POINT ) {\n      return polygon.containsXY(geometry.x, geometry.y)\n    } else if (targetGeometryType === Geometry.LINE ) {\n      return polyContainsLine(polygon, geometry)\n    } else if (targetGeometryType === Geometry.POLYGON ) {\n      return polyContainsPoly(polygon, geometry)\n    } else if (targetGeometryType === Geometry.MULTI_POLYGON) {\n      return polyContainsMultiPoly(polygon, geometry)\n    }else if (targetGeometryType === Geometry.PARALLELOGRAM) {\n      return polyContainsPoly(polygon, new Polygon(geometry.getCoordinates()))\n    }\n  }\n  \n  return isContained\n}\n\n\nconst polyContainsLine = function (poly, line) {\n  const lineCoords = line.getCoordinates()\n  return polygonContainsLinestring(poly, lineCoords)\n}\n\n\nconst polyContainsPoly = function (poly, poly2) {\n  const poly2Type = poly2.geometryType\n  if (poly2Type === Geometry.POLYGON ) {\n    const outRing = poly2.getCoordinates()[0]\n    return polygonContainsLinestring(poly, outRing)\n  }\n\n  return false\n}\n\nconst polyContainsMultiPoly = function (polygon, mutilpolygon) {\n  const polys = mutilpolygon.convertToPolygons()\n  const contained = polys.find( p => !polyContainsPoly(polygon, p))\n\n  return contained == undefined ? true: false\n}\n\n\nconst polygonContainsLinestring = function (poly, coords) {\n  const hasOne = coords.some( coord =>\n    !poly.containsXY(coord[0], coord[1])\n  )\n  \n  return !hasOne\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/contains.js","import Geometry from '../../geometry/geometry'\nimport MultiPolygon from '../../geometry/mutilpolygon'\nimport {linearRingIsClockwise} from '../support/orient'\nimport contains from './contains'\n\n/**\n *\n * @param polygon\n * @param holePolygon\n * @returns {*}\n */\nexport default function polygonWithHoles (polygon1, polygon2) {\n  \n  const polygon = polygon1.clone()\n  const holePolygon = polygon2.clone()\n  \n  let resultPolygon = polygon\n  const holeCoordinates = holePolygon.getCoordinates()\n  const polygonCoordinates = polygon.getCoordinates()\n  \n  const type = polygon.geometryType\n  // if (type === Geometry.POLYGON || type === Geometry.MULTI_POLYGON ) {\n  if (type === Geometry.POLYGON ) {\n    // 必须要被包含在多边形内\n    if (contains(polygon, holePolygon)) {\n      const holeOutRings = holeCoordinates[0]\n      const polygonOutRings = polygonCoordinates[0]\n      \n      let tempHoleOutRings = []\n      let tempPolygonOutRings = []\n  \n      holeOutRings.forEach( ring => {\n        tempHoleOutRings.push(ring[0], ring[1])\n      })\n  \n      polygonOutRings.forEach( ring => {\n        tempPolygonOutRings.push(ring[0], ring[1])\n      })\n      \n      const holeOriented = linearRingIsClockwise(tempHoleOutRings, 0, tempHoleOutRings.length, 2)\n      const polygonOutRingOriented = linearRingIsClockwise(tempPolygonOutRings, 0, tempPolygonOutRings.length, 2)\n      \n      // 带洞多边形\n      if (polygonCoordinates.length > 1) {\n        // 如果有带洞多边形，需要处理的更多\n        // 这里只是简单的存储进去\n  \n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n        \n      } else {\n        // 不同向\n        if (holeOriented !== polygonOutRingOriented) {\n          polygonCoordinates.push(holeOutRings.slice())\n        } else {\n          polygonCoordinates.push(holeOutRings.slice().reverse())\n        }\n      }\n    }\n  } else if (type === Geometry.MULTI_POLYGON) {\n    const polygons = polygon.convertToPolygons()\n\n    const polygonsWithHole = []\n\n    polygons.forEach(poly => {\n      const polyWithHole = polygonWithHoles(poly, holePolygon)\n      polygonsWithHole.push(polyWithHole)\n    })\n\n    const coordinates = []\n    polygonsWithHole.forEach(poly => {\n      coordinates.push(poly.getCoordinates())\n    })\n\n    const multiPolygon = new MultiPolygon()\n    multiPolygon.setCoordinates(coordinates)\n\n    resultPolygon = multiPolygon\n  }\n  \n  return resultPolygon\n}\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/analysis/polygonwithhole.js"],"sourceRoot":""}